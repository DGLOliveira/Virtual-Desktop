"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[600],{3600:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var r=a(5043),s=a(184),o=a(1462);const i=JSON.parse('[{"Level":0,"Bars":15,"Matrix":[{"x":1,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":2,"w":4,"h":3,"s":1},{"x":13,"y":2,"w":4,"h":3,"s":1},{"x":19,"y":2,"w":4,"h":3,"s":1},{"x":25,"y":2,"w":4,"h":3,"s":1},{"x":1,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":6,"w":4,"h":3,"s":1},{"x":13,"y":6,"w":4,"h":3,"s":1},{"x":19,"y":6,"w":4,"h":3,"s":1},{"x":25,"y":6,"w":4,"h":3,"s":1},{"x":1,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":10,"w":4,"h":3,"s":1},{"x":13,"y":10,"w":4,"h":3,"s":1},{"x":19,"y":10,"w":4,"h":3,"s":1},{"x":25,"y":10,"w":4,"h":3,"s":1}]},{"Level":1,"Bars":15,"Matrix":[{"x":0,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":3,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":3,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":4,"h":3,"s":1},{"x":0,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":4,"h":3,"s":1},{"x":0,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":10,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":10,"w":4,"h":3,"s":1}]},{"Level":2,"Bars":15,"Matrix":[{"x":0,"y":2,"w":2,"h":3,"s":1},{"x":7,"y":4,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":4,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":2,"h":3,"s":1},{"x":0,"y":6,"w":2,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":2,"h":3,"s":1},{"x":0,"y":16,"w":2,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":16,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":16,"w":2,"h":3,"s":1}]},{"Level":3,"Bars":0,"Matrix":[]}]');var l=a(579);const n=60,c=1e3/n,d=30,y=30,u={x:12,y:27,w:6},h={x:15,y:50,r:.5,dirX:.25,dirY:-.25},x={x:15,y:52,r:.25,dirX:0,dirY:-.25,t:-5,color:""};function w(e){let{controls:t,updateScoreboard:a,isSelected:s,gameState:o,setGameState:w}=e;const f=(0,r.useRef)(null),[p,S]=(0,r.useState)(JSON.parse(JSON.stringify(i))),[m,b]=(0,r.useState)(0),[g,k]=(0,r.useState)(p[m]),[v,P]=(0,r.useState)(g.Bars),[j,M]=(0,r.useState)(0),[C,E]=(0,r.useState)(0);let[T,O]=(0,r.useState)(Object.create(u)),[B,R]=(0,r.useState)(Object.create(h)),[F]=(0,r.useState)(Object.create(x));F.color="blue";let[N]=(0,r.useState)(Object.create(x));N.color="green";let[G]=(0,r.useState)(Object.create(x));G.color="red";let[D]=(0,r.useState)(Object.create(x));D.color="yellow";let[L]=(0,r.useState)(Object.create(x));L.color="cyan";let[A]=(0,r.useState)(Object.create(x));A.color="magenta";let[K]=(0,r.useState)(Object.create(x));K.color="white";const Y={time:0,score:0,gameState:"Start"};let[I,W]=(0,r.useState)(0);(0,r.useEffect)((()=>{t.pause&&("Play"===o?w("Pause"):"Pause"===o?w("Play"):"Win"!==o&&"End"!==o&&"Start"!==o||w("Restart")),t.left&&!t.right&&T.x+T.w>T.w&&(T.x=T.x-1),t.right&&!t.left&&T.x+T.w<y&&(T.x=T.x+1)}),[t]);const X=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},U=(e,t,a,r)=>{for(let s=0;s<12;s++)e.fillStyle=r.color,e.scale(1,.5),e.beginPath(),e.arc(r.x*t+Math.cos(2*Math.PI/12*s)*r.t*2*t,r.y*a+2*Math.sin(2*Math.PI/12*s)*r.t*2*a,r.r/1*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)},V=(e,t,a,r)=>{switch(X(e),e.fillStyle="red",e.font="40px monospace",r){case 4:default:e.fillText("Next Level",5*t,17*a,500);break;case 3:e.fillText("3 sec",9*t,17*a,500);break;case 2:e.fillText("2 sec",9*t,17*a,500);break;case 1:e.fillText("1 sec",9*t,17*a,500)}},J=(e,t,a)=>{let r,s;r=T.x,s=T.y,e.fillStyle="cyan",e.fillRect(r*t,s*a,T.w*t,a)},H=(e,t,a,r)=>{let s;switch(r.h){case 3:s="green";break;case 2:s="yellow";break;case 1:s="orange";break;default:s="blue"}e.fillStyle=s,e.fillRect(r.x*t,r.y*a,r.w*t,a)},q=(e,t,a)=>{for(let r=0;r<g.Bars;r++)g.Matrix[r].h>0&&H(e,t,a,g.Matrix[r])},Q=e=>{e.h-1>=0&&(e.h=e.h-1,I+=e.s,W(I)),0===e.h&&(P(v-1),v-1===0&&w("LevelUp"))},Z=e=>{let t;0!==e.x&&e.x!==y||(e.dirX=-e.dirX),0===e.y?e.dirY=-e.dirY:e.y===2*d&&w("End"),e.y+e.r===2*T.y&&e.x>=T.x&&e.x<=T.x+T.w&&(e.dirY=-e.dirY);for(let a=0;a<g.Bars;a++)t=g.Matrix[a],t.h>0&&e.x+e.r>=t.x&&e.x-e.r<=t.x+t.w&&e.y+e.r>=2*t.y&&e.y-e.r<=2*(t.y+1)&&(e.x+e.r>t.x&&e.x-e.r<t.x+t.w&&(e.dirY=-e.dirY,Q(t)),e.y+e.r>2*t.y&&e.y-e.r<2*(t.y+1)&&(e.dirX=-e.dirX,Q(t)))},$=(e,t,a,r)=>{e.fillStyle="#FFFFFF",e.scale(1,.5),e.beginPath(),e.arc(r.x*t,r.y*a,r.r*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)};return(0,r.useEffect)((()=>{const e=f.current.getContext("2d");let t,r=e.canvas.width/y,s=e.canvas.height/d;switch(o){case"Play":X(e),J(e,r,s),q(e,r,s),B.x=B.x+B.dirX,B.y=B.y+B.dirY,Z(B),$(e,r,s,B),setTimeout((()=>{M(j+1)}),[c]);break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,17*a,500)})(e,r,s);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,r,s);break;case"Restart":S(JSON.parse(JSON.stringify(i))),b(0),k(p[m]),P(g.Bars),R(Object.create(h)),O(Object.create(u)),W(0),M(1),w("Play");break;case"LevelUp":m+1===3?w("Win"):(V(e,r,s,4),setTimeout((()=>{X(e),V(e,r,s,3)}),[1e3]),setTimeout((()=>{V(e,r,s,2)}),[2e3]),setTimeout((()=>{V(e,r,s,1)}),[3e3]),setTimeout((()=>{b(m+1),k(p[m+1]),P(g.Bars),R(Object.create(h)),X(e),q(e,r,s),w("Play")}),[4e3]));break;case"Win":k(p[3]),((e,t,a)=>{X(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",8*t,17*a,500)})(e,r,s),J(e,r,s),((e,t,a)=>{let r;for(let s=0;s<=6;s++){switch(s){case 0:r=F;break;case 1:r=N;break;case 2:r=G;break;case 3:r=D;break;case 4:r=L;break;case 5:r=A;break;case 6:r=K}r.t<=-5?(r.t=Math.floor(4*Math.random())+1,r.x=T.x+T.w/2,r.y=52,r.dirX=(Math.random()-.5)/8,r.dirY=-.25):r.t>3?r.t=r.t-1/n:r.t>0?(r.x=r.x+r.dirX,r.y=r.y+r.dirY,Z(r),$(e,t,a,r),r.t=r.t-1/n):r.t>-5&&(U(e,t,a,r),r.t=r.t-1/n)}})(e,r,s),setTimeout((()=>{E(C+1)}),[c]);break;default:X(e)}Y.time=Math.floor(j/n),Y.score=I,Y.gameState=o,a(Y);const l=()=>{t=window.requestAnimationFrame(l)};return l(),()=>{window.cancelAnimationFrame(t)}}),[j,C,o]),(0,l.jsx)("canvas",{ref:f})}const f=e=>{let{controls:t,updateScoreboard:a,isSelected:s,gameState:o,setGameState:i}=e;let n=(0,r.useRef)(null),[c,d]=(0,r.useState)(!1),[y]=(0,r.useState)({x:0,y:0}),[u,h]=(0,r.useState)(0),[x]=(0,r.useState)({direction:"right",x:0,y:0}),[w,f]=(0,r.useState)("right"),[p,S]=(0,r.useState)({x:[],y:[]}),[m,b]=(0,r.useState)(!1);const g={time:0,score:0,gameState:"Start"};(0,r.useEffect)((()=>{t.pause&&t.pause&&("Play"===o?i("Pause"):"Pause"===o?i("Play"):"Win"!==o&&"End"!==o&&"Start"!==o||i("Restart")),void 0===p.x[0]?t.up?x.direction="up":t.down?x.direction="down":t.left?x.direction="left":t.right&&(x.direction="right"):t.up&&"down"!==w?x.direction="up":t.down&&"up"!==w?x.direction="down":t.left&&"right"!==w?x.direction="left":t.right&&"left"!==w&&(x.direction="right")}),[t]);const k=(e,t,a)=>{e.fillStyle="#000000",e.fillRect(0,0,t,a)};let[v,P]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=n.current.getContext("2d");let t,r=e.canvas.width/30,s=e.canvas.height/30;"Play"===o?(k(e,e.canvas.width,e.canvas.height),((e,t,a)=>{let r,s,o,i=!1;if(c)r=y.x,s=y.y;else{if(y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random()),void 0===p.x[0])for(;y.x===x.x&&y.y===x.y;)y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());else{for(let e=0;e<p.x.length;e++)y.x===p.x[e]&&(o=!0),y.y===p.y[e]&&(i=!0);for(;!0===o&&!0===i;){y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());let e=!1,t=!1;for(let a=0;a<p.x.length;a++)y.x===p.x[a]&&(e=!0),y.y===p.y[a]&&(t=!0);o=e,i=t}}r=y.x,s=y.y,d(!0)}e.fillStyle="#00FF00",e.fillRect(r*t,s*a,t,a)})(e,r,s),((e,t,a)=>{let r,s;if(m)switch(x.direction){case"right":r=x.x+1,s=x.y,x.x=x.x+1;break;case"left":r=x.x-1,s=x.y,x.x=x.x-1;break;case"up":r=x.x,s=x.y-1,x.y=x.y-1;break;case"down":r=x.x,s=x.y+1,x.y=x.y+1}else r=10*t,s=10*a,b(!0),x.x=10,x.y=10;if(f(x.direction),void 0!==p.x[2])for(let o=2;o<p.x.length;o++)p.x[o]===x.x&&p.y[o]===x.y&&i("End");x.x>=30||x.x<0||x.y<0||x.y>=30?i("End"):y.x===x.x&&y.y===x.y&&(d(!1),h(u+1),p.x.unshift(x.x),p.y.unshift(x.y)),e.fillStyle="#00FFFF",e.fillRect(r*t,s*a,t,a)})(e,r,s),((e,t,a)=>{for(let r=0;r<p.x.length;r++)e.fillStyle="#00FFFF",e.fillRect(p.x[r]*t,p.y[r]*a,t,a);p.x.unshift(x.x),p.y.unshift(x.y),p.x.pop(),p.y.pop()})(e,r,s),setTimeout((()=>{P(v+1)}),[1e3/(u/2+4)])):"Pause"===o?((e,t,a)=>{k(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Paused",8*t,17*a,500)})(e,r,s):"End"===o?(k(e,e.canvas.width,e.canvas.height),((e,t,a)=>{k(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,r,s)):"Restart"===o&&(i("Play"),P(1),d(!1),b(!1),h(0),S({x:[],y:[]})),g.time=Math.floor(v/(u/2+4)),g.score=u,g.gameState=o,a(g);const l=()=>{t=window.requestAnimationFrame(l)};return l(),()=>{window.cancelAnimationFrame(t)}}),[v,o]),(0,l.jsx)("canvas",{height:"150",width:"150",ref:n})},p=JSON.parse('{"1":{"Level":1,"Enemies":72,"Matrix":[[0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,9,0,0,9,0,9,0,0,9,0,9,0,0,9,0,9,0,9,0,9,0,0,9,0]]}}'),S=60,m=1e3/S,b=150,g=300,k=10,v={id:1,x:10,y:10,row:0,life:1,currSprite:1,totalSprites:2,w:10,h:10,hit:!1,color:"green",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,0,1,1,0,1,1,0],[1,1,0,0,1,1,0,0,1,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,0,1,0,1,1,0,1,0,0],[0,1,1,0,1,1,0,1,1,0],[0,1,0,0,0,0,0,0,1,1]]}},P={id:2,x:10,y:10,row:0,life:2,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"red",sprites:{1:[[0,1,0,0,0,0,0,0,1,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,0,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0,0]],2:[[0,0,1,0,0,0,0,1,0,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,1,0,0,1,1,1,0]]}},j={id:3,x:10,y:10,row:0,life:3,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"cyan",sprites:{1:[[0,1,1,0,0,0,0,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,1,0,0,0,0,0,0,1,1]]}},M={id:8,x:10,y:10,life:1,hit:!1,currSprite:1,totalSprites:2,w:20,h:10,color:"magenta",sprites:{1:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]],2:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]]}},C={id:10,x:10,y:130,speed:2,move:"none",shooting:!1,cooling:0,currSprite:1,w:10,h:10,color:"white",cooldown:250,sprites:{1:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,1,0,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,0,0,1,0,0,1,0,0,1]]}},E={id:9,x:10,y:10,currSprite:1,w:10,h:10,color:"gray",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,0,0]]}},T={id:"player",x:10,y:10,h:9,w:2,speed:5,color:"white",currSprite:1,totalSprites:2,sprites:{1:[[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1]],2:[[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1]]}},O={id:"invader",x:10,y:10,currSprite:1,totalSprites:1,w:2,h:9,speed:2,color:"yellow",sprites:{1:[[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1]]}};function B(e){let{controls:t,updateScoreboard:a,isSelected:s,gameState:o,setGameState:i}=e;const n=(0,r.useRef)(null),[c,d]=(0,r.useState)(0),[y,u]=(0,r.useState)(3),[h,x]=(0,r.useState)(1),[w,f]=(0,r.useState)(0),[B,R]=(0,r.useState)(0),[F,N]=(0,r.useState)({index:0,rows:[]}),[G,D]=(0,r.useState)([]),[L,A]=(0,r.useState)([]),[K,Y]=(0,r.useState)([]),I=500;let[W,X]=(0,r.useState)(Object.create(C));const U={time:0,score:0,gameState:"Start"};(0,r.useEffect)((()=>{if(t.pause)switch(o){case"Play":i("Pause");break;case"Pause":i("Play");break;case"Win":case"End":case"Start":i("Restart")}"Play"===o&&(t.left&&!t.right?W.move="left":t.right&&!t.left?W.move="right":t.left&&t.right?W.move="none":t.left||t.right||(W.move="none"),t.up?W.shooting=!0:t.up||(W.shooting=!1))}),[t]);const V=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},J=(e,t)=>{!0===t.hit?e.fillStyle="white":e.fillStyle=t.color;for(let a=0;a<t.sprites[t.currSprite].length;a++)for(let r=0;r<t.sprites[t.currSprite][a].length;r++)1===t.sprites[t.currSprite][a][r]&&e.fillRect(t.x+r,t.y+a,1,1);t.sprites.length>1&&(t.currSprite<t.sprites.length-1?t.currSprite++:t.currSprite=1)},H=e=>{for(let t=0;t<G.length;t++)J(e,G[t]);for(let t=0;t<L.length;t++)J(e,L[t]);J(e,W),(e=>{let t=0,a=0,r=0;if(K.length>0)for(let s=0;s<K.length;s++){K[s].decay<=166.66666666666666?t=Math.floor(255*K[s].decay/166.66666666666666):K[s].decay<=1e3/3?(t=255,a=Math.floor(255*(K[s].decay-166.66666666666666)/166.66666666666666)):(t=255,a=255,r=Math.floor(255*(K[s].decay-1e3/3)/166.66666666666666)),e.fillStyle="rgb("+t+","+a+","+r+")";let o=2*K[s].decay/(I+K[s].decay),i=K[s].w/2*o-10;e.fillRect(K[s].x+2*i/3,K[s].y+2*i/3,2,2),e.fillRect(K[s].x-2*i/3,K[s].y+2*i/3,2,2),e.fillRect(K[s].x+2*i/3,K[s].y-2*i/3,2,2),e.fillRect(K[s].x-2*i/3,K[s].y-2*i/3,2,2),e.fillRect(K[s].x+i,K[s].y,2,2),e.fillRect(K[s].x-i,K[s].y,2,2),e.fillRect(K[s].x,K[s].y+i,2,2),e.fillRect(K[s].x,K[s].y-i,2,2)}})(e)},q=e=>{let t={x:e.x+e.w/2-1,y:e.y+e.h/2-1,w:e.w,h:e.h,decay:I};K.push(t),Y(K)},Q=e=>{G[e].life-1>0?(G[e].life=G[e].life-1,G[e].hit=!0,d(c+5),setTimeout((()=>{G[e].hit=!1}),[W.cooldown/2])):(q(G[e]),8!==G[e].id?(R(B-1),d(c+10)):d(c+150),G.splice(e,1)),D(G)},Z=e=>{q(G[e])},$=e=>{let t=!1;for(let a=0;a<G.length;a++)"player"===L[e].id?L[e].x>G[a].x&&L[e].x<G[a].x+G[a].w&&L[e].y>G[a].y&&L[e].y<G[a].y+G[a].h&&(t=!0,9===G[a].id?Z(a):Q(a)):L[e].x>W.x&&L[e].x<W.x+W.w&&L[e].y>W.y-W.h&&L[e].y<W.y?(t=!0,y-1>=0?(u(y-1),q(W)):i("End")):L[e].x>G[a].x&&L[e].x<G[a].x+G[a].w&&L[e].y>G[a].y-G[a].h&&L[e].y<G[a].y&&9===G[a].id&&(t=!0,Z(a));return t},z=()=>{w*m%(1200*m)===0&&(()=>{let e=Object.create(M);Math.random()>.5?(e.x=0,e.speed=1):(e.x=g-e.w,e.speed=-1),e.y=2,G.push(e),D(G)})(),(()=>{let e={};!0===W.shooting&&0===W.cooling&&(e=Object.create(T),e.x=W.x-1+W.w/2,e.y=W.y,L.push(e),W.cooling=W.cooldown,setTimeout((()=>{W.cooling=0}),[W.cooldown]),A(L))})(),(()=>{let e={},t=Math.random(),a=Math.floor(Math.random()*B);t>.95&&(e=Object.create(O),e.x=G[a].x+W.w/2,e.y=G[a].y,L.push(e),A(L))})(),(()=>{let e=[];if(L.length>0){for(let t=0;t<L.length;t++)$(t)||("player"===L[t].id?L[t].y>0&&(L[t].y-=L[t].speed,L[t].currSprite<L[t].totalSprites?L[t].currSprite=L[t].currSprite+1:L[t].currSprite=1,e.push(L[t])):L[t].y<b&&(L[t].y+=L[t].speed,e.push(L[t])));A(e)}})(),(()=>{if(K.length>0){for(let e=0;e<K.length;e++)K[e].decay-m>0?K[e].decay=K[e].decay-m:K.splice(e,1);Y(K)}})(),"left"===W.move&&W.x+W.w>W.w?W.x=W.x-W.speed:"right"===W.move&&W.x+W.w<g&&(W.x=W.x+W.speed),(()=>{switch(F.index>=B&&(F.index=0),F.rows[G[F.index].row]){case"left":G[F.index].x>2?G[F.index].x=G[F.index].x-1:(F.rows[G[F.index].row]="right",G[F.index].x=G[F.index].x+1);break;case"right":G[F.index].x+G[F.index].w<g-1?G[F.index].x=G[F.index].x+1:F.rows[G[F.index].row]="left"}G[F.index].currSprite<G[F.index].totalSprites?G[F.index].currSprite=G[F.index].currSprite+1:G[F.index].currSprite=1,F.index++;for(let e=0;e<G.length;e++)8===G[e].id&&(G[e].x+G[e].w>0&&G[e].x<g?(G[e].x=G[e].x+G[e].speed,G[e].currSprite<G[e].totalSprites?G[e].currSprite=G[e].currSprite+1:G[e].currSprite=1):G.splice(e,1));D(G),N(F)})()};return(0,r.useEffect)((()=>{const e=n.current.getContext("2d");let t;switch(o){case"Play":y>=0&&B>0?(V(e),z(),H(e),s=k,l=k,(r=e).fillStyle="red",r.font="10px monospace",r.fillText("LIFE:"+y,s/2,b-l/4,500),setTimeout((()=>{f(w+1)}),[m])):y<0?i("End"):0===B&&i("Win");break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,8*a,500)})(e,k,k);break;case"Win":((e,t,a)=>{V(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",7*t,8*a,500)})(e,k,k);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,8*a,500)})(e,k,k);break;case"Start":default:break;case"Restart":x(1),d(0),u(3),Y([]),A([]),(()=>{let e={},t=[],a={index:0,rows:[]};for(let r=0;r<p[h].Matrix.length;r++)for(let s=0;s<p[h].Matrix[r].length;s++)switch(p[h].Matrix[r][s]){case 1:e=Object.create(v),e.x=s*k*1.2,e.y=15+r*k*1.2,e.row=r,t.push(e),void 0===a.rows[r]&&a.rows.push("right");break;case 2:e=Object.create(P),e.x=s*k*1.2,e.y=15+r*k*1.2,e.row=r,t.push(e),void 0===a.rows[r]&&a.rows.push("right");break;case 3:e=Object.create(j),e.x=s*k*1.2,e.y=15+r*k*1.2,e.row=r,t.push(e),void 0===a.rows[r]&&a.rows.push("right");break;case 9:e=Object.create(E),e.x=s*k*1.2,e.y=5+r*k*1.2,t.push(e)}R(p[h].Enemies),D(t),N(a)})(),X(Object.create(C)),f(1),i("Play")}var r,s,l;U.time=Math.floor(w/S),U.score=c,U.gameState=o,a(U);const g=()=>{t=window.requestAnimationFrame(g)};return g(),()=>{window.cancelAnimationFrame(t)}}),[o,w]),(0,l.jsx)("canvas",{ref:n,width:300,height:150})}const R=(e,t,a,r,s)=>{switch(e){case"Keybinds":s.setShowKeybindDialog(!s.showKeybindDialog),t(!1);break;case"Play / Pause":"Play"===s.gameState?s.setGameState("Pause"):"Pause"===s.gameState&&s.setGameState("Play"),t(!1);break;case"New":s.setGameState("Restart"),t(!1);break;case"scoreboard":s.setShowScoreboard(!s.showScoreboard),t(!1);break;case"touchscreenControls":s.setShowControls(!s.showControls),t(!1);break;case!1:break;default:t(!1)}},F=(e,t,a)=>{if(null===e)t({Game:{"New Game":{action:"New",keybind:"Alt+N",disabled:!0},"Play / Pause":{action:"Play / Pause",keybind:"P",disabled:!0},LineBreak1:{},Keybinds:{action:"Keybinds",disabled:!1},LineBreak2:{},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},View:{Scoreboard:{action:"scoreboard",checkbox:!0,disabled:!1},"Touchscreen Controls":{action:"touchscreenControls",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{t({...e,Game:{...e.Game,"New Game":{...e.Game["New Game"],disabled:!a.gameChoice},"Play / Pause":{...e.Game["Play / Pause"],disabled:!a.gameChoice}},View:{...e.View,Scoreboard:{...e.View.Scoreboard,checkbox:a.showScoreboard},"Touchscreen Controls":{...e.View["Touchscreen Controls"],checkbox:a.showControls}}})}},N=e=>{let{showKeybindDialog:t,setShowKeybindDialog:a,setAppDialog:s,keyboard:o,setKeyboard:i}=e;const[n,c]=(0,r.useState)(structuredClone(o)),[d,y]=(0,r.useState)(""),[u,h]=(0,r.useState)(0),x=(0,l.jsxs)("div",{children:[Object.keys(n).map((e=>(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",marginLeft:"5px"},children:[(0,l.jsx)("div",{style:{width:"55px",height:"30px",display:"flex",justifyContent:"start",alignItems:"center",textAlign:"center"},children:(0,l.jsxs)("b",{children:[e,":"]})}),n[e].keys.map(((t,a)=>(0,l.jsx)("button",{style:{width:"75px",height:"30px",border:"1px solid dimgray"},onContextMenu:t=>((e,t)=>{n[e].keys.splice(t,1),c(n),h(u+1)})(e,a),onClick:()=>((e,t)=>{y("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((a=>{n[e].keys[t]=a,c(n),y("")})).catch((e=>{y(e)}))})(e,a),children:t},e))),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:n[e].keys.length<3&&(0,l.jsx)("button",{onClick:()=>(e=>{y("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((t=>{n[e].keys[n[e].keys.length]=t,c(n),y("")})).catch((e=>{y(e)}))})(e),children:"+"})})]},e))),d]}),w={Confirm:()=>{i(n),a(!1),s(null)},Reset:()=>{c(o),h(u+1)},Cancel:()=>{c(o),a(!1),s(null)}};return(0,r.useEffect)((()=>{t&&s({title:"Keybinds",info:x,actions:w})}),[t,n,d,u]),(0,l.jsx)(l.Fragment,{})};function G(e){let{isSelected:t,action:a,setAction:i,appMenu:n,setAppMenu:c,appDialog:d,setAppDialog:y,contextMenu:u}=e;const h=(0,r.useRef)(),[x,p]=(0,r.useState)({up:{keys:["w","W","ArrowUp"],active:!0},down:{keys:["s","S","ArrowDown"],active:!0},left:{keys:["a","A","ArrowLeft"],active:!0},right:{keys:["d","D","ArrowRight"],active:!0},one:{keys:["1"],active:!1},two:{keys:["2"],active:!1},pause:{keys:["p","P","Pause"],active:!0}}),S=function(e,t){var[a,s]=(0,r.useState)({up:!1,down:!1,left:!1,right:!1,one:!1,two:!1,pause:!1});const o=(0,r.useCallback)(((e,a)=>{const r=Object.keys(t);for(let o=0;o<r.length;o++){let i=t[r[o]].keys;for(let t=0;t<i.length;t++)i[t]===e&&s((e=>({...e,[r[o]]:a})))}}),[t]),i=(0,r.useCallback)((e=>{o(e.key,!0)}),[o]),l=(0,r.useCallback)((e=>{o(e.key,!1)}),[o]);return(0,r.useEffect)((()=>(document.addEventListener("keydown",i),document.addEventListener("keyup",l),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",l)})),[i,l]),(0,r.useEffect)((()=>{e||s({...a,pause:!0})}),[e]),a}(t,x),[m,b]=(0,r.useState)("Start"),[g,k]=(0,r.useState)("None"),[v,P]=(0,r.useState)(!0),[j,M]=(0,r.useState)(!0),[C,E]=(0,r.useState)(!0),[T,O]=(0,r.useState)(!1),[G,D]=(0,r.useState)({time:0,score:0,gameState:"Start"}),L=e=>{D(e)},A=(e,t,a)=>{document.dispatchEvent(new KeyboardEvent(t,{key:x[e].keys[0],repeat:a}))},K=(e,t)=>{let a={};if(e.preventDefault(),"keypad"===t)a={Hide:{action:()=>{M(!1)}}};else if("scoreboard"===t)a={Hide:{action:()=>{E(!1)}}};else if("canvas"===t&&"None"!==g){let e="Play"===m?"Pause":"Play";a={"Play/Pause":{action:()=>{b(e)}},"New Game":{action:()=>{b("Restart")}}}}u.setOpen(),u.setPosition(e.clientX,e.clientY),u.setContent(a)};return(0,r.useEffect)((()=>{P("Play"!==m)}),[m]),(0,r.useEffect)((()=>{R(a,i,d,y,{gameState:m,setGameState:b,showControls:j,setShowControls:M,showScoreboard:C,setShowScoreboard:E,showKeybindDialog:T,setShowKeybindDialog:O})}),[a]),(0,r.useEffect)((()=>{F(n,c,{gameState:m,showControls:j,showScoreboard:C,gameChoice:g})}),[m,g,j,C]),(0,l.jsxs)("div",{id:"arcadeContainer",children:[(0,l.jsxs)("select",{id:"gameMenu",onChange:e=>{k(e.target.value),b("Start")},children:[(0,l.jsx)("option",{value:"None",children:"Select Game"}),(0,l.jsx)("option",{value:"Snake",children:"Snake"}),(0,l.jsx)("option",{value:"Breakout",children:"Breakout"}),(0,l.jsx)("option",{value:"Space Invaders",children:"Space Invaders"})]}),C&&(0,l.jsxs)("div",{id:"arcadeScoreboard",onContextMenu:e=>K(e,"scoreboard"),children:[(0,l.jsxs)("div",{id:"arcadeScore",children:["Time: ",G.time," seconds",(0,l.jsx)("br",{}),"Score: ",G.score,(0,l.jsx)("br",{})]}),(0,l.jsx)("div",{id:"arcadePlayButton",className:"arcadeButton",onClick:()=>{A("pause","keydown",!1),setTimeout((()=>A("pause","keyup",!1)),50)},children:v?(0,l.jsx)(o.i8P,{}):(0,l.jsx)(o.bb6,{})})]}),(0,l.jsx)("div",{id:"arcadeCanvasContainer",ref:h,onContextMenu:e=>K(e,"canvas"),children:"Snake"===g?(0,l.jsx)(f,{controls:S,updateScoreboard:L,isSelected:t,gameState:m,setGameState:b}):"Breakout"===g?(0,l.jsx)(w,{controls:S,updateScoreboard:L,isSelected:t,gameState:m,setGameState:b}):"Space Invaders"===g?(0,l.jsx)(B,{controls:S,updateScoreboard:L,isSelected:t,gameState:m,setGameState:b}):(0,l.jsx)(l.Fragment,{})}),j&&(0,l.jsxs)("div",{id:"arcadeControls",onContextMenu:e=>K(e,"keypad"),children:[(0,l.jsx)("div",{id:"arcadeLeftButton",className:S.left?"arcadeButton arcadeButtonOn":"arcadeButton",onMouseDown:()=>A("left","keydown",!0),onMouseUp:()=>A("left","keyup",!0),onTouchStart:()=>A("left","keyup",!0),onTouchEnd:()=>A("left","keyup",!0),children:(0,l.jsx)(s.QVr,{})}),(0,l.jsxs)("div",{id:"arcadeVerticalControls",children:[(0,l.jsx)("div",{id:"arcadeUpButton",className:S.up?"arcadeButton arcadeButtonOn":"arcadeButton",onMouseDown:()=>A("up","keydown",!0),onMouseUp:()=>A("up","keyup",!0),onTouchStart:()=>A("up","keyup",!0),onTouchEnd:()=>A("up","keyup",!0),children:(0,l.jsx)(s.uCC,{})}),(0,l.jsx)("div",{id:"arcadeDownButton",className:S.down?"arcadeButton arcadeButtonOn":"arcadeButton",onMouseDown:()=>A("down","keydown",!0),onMouseUp:()=>A("down","keyup",!0),onTouchStart:()=>A("down","keyup",!0),onTouchEnd:()=>A("down","keyup",!0),children:(0,l.jsx)(s.$TP,{})})]}),(0,l.jsx)("div",{id:"arcadeRightButton",className:S.right?"arcadeButton arcadeButtonOn":"arcadeButton",onMouseDown:()=>A("right","keydown",!0),onMouseUp:()=>A("right","keyup",!0),onTouchStart:()=>A("right","keyup",!0),onTouchEnd:()=>A("right","keyup",!0),children:(0,l.jsx)(s.Z0P,{})})]}),(0,l.jsx)(N,{showKeybindDialog:T,setShowKeybindDialog:O,setAppDialog:y,keyboard:x,setKeyboard:p})]})}}}]);
//# sourceMappingURL=600.5d765530.chunk.js.map