"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[164],{2164:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var s=i(5043);var l=i(579);function n(){var e=[];return function(){e=[];for(let i=0;i<360;i++){var t=5;i%90===0?t=20:(i+45)%90===0?t=15:i%15===0&&(t=10),e.push(t)}}(),(0,l.jsxs)("g",{id:"degrees",children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"white",stroke:"black",strokeWidth:"1"}),e.map(((e,t)=>(0,l.jsx)("line",{x1:70*Math.cos(t*(Math.PI/180))+100,y1:70*Math.sin(t*(Math.PI/180))+100,x2:Math.cos(t*(Math.PI/180))*(70+e)+100,y2:Math.sin(t*(Math.PI/180))*(70+e)+100,stroke:270===t?"red":"black",strokeWidth:5===e?.5:1},t))),(0,l.jsx)("polygon",{points:"100,25 96,10.9 100,10.8 104,10.9",fill:"red"})]})}function r(e){let{TRANSITION_TIME:t,rotation:i}=e;var s=[];return function(){s=[];const e=100;let t,i,l,n,r,o,a,c,d,h,x,k,u;for(let y=0;y<16;y++)y>=12?(x=90*y,k=60,u=15):y>=8?(x=90*y-45,k=50,u=12.5):(x=360*y/8+22.5,k=40,u=10),t=Math.cos(x*(Math.PI/180))*k+e,i=Math.sin(x*(Math.PI/180))*k+e,l=Math.cos((x+45)*(Math.PI/180))*u+e,n=Math.sin((x+45)*(Math.PI/180))*u+e,r=e,o=e,a=Math.cos((x-45)*(Math.PI/180))*u+e,c=Math.sin((x-45)*(Math.PI/180))*u+e,d=t+","+i+" "+l+","+n+" 100,100 "+a+","+c,h=t+","+i+" "+l+","+n+" 100,100",s.push([d,h])}(),(0,l.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`},children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"60",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"50.5",stroke:"gray",strokeWidth:"0.5"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"40.5",stroke:"gray",strokeWidth:"0.5"}),s.map(((e,t)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("polygon",{points:e[0],fill:"white",stroke:"black",strokeWidth:"1"},t+"a"),(0,l.jsx)("polygon",{points:e[1],fill:"black"},t+"b"),t>=12&&t<16?(0,l.jsx)("line",{x1:60*Math.cos((t-12)*(Math.PI/2))+100,y1:60*Math.sin((t-12)*(Math.PI/2))+100,x2:70*Math.cos((t-12)*(Math.PI/2))+100,y2:70*Math.sin((t-12)*(Math.PI/2))+100,stroke:"black",strokeWidth:"0.5"},t+"c"):null]}))),(0,l.jsx)("polygon",{points:"100,30 96,45 100,50 104,45",fill:"white",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("polygon",{points:"100,30 104,45 100,45",fill:"black"}),(0,l.jsx)("polygon",{points:"100,45 96,45 100,50",fill:"black"}),(0,l.jsx)("rect",{x:"96",y:"48",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"})]})}function o(e){let{pitch:t,roll:i,TRANSITION_TIME:s}=e;return(0,l.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,l.jsx)("circle",{cx:5*Math.sin(t)+100,cy:5*Math.sin(i)+100,r:"5",fill:"black",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("circle",{cx:5.5*-Math.sin(t)+100,cy:5.5*-Math.sin(i)+100,r:"4.5",fill:"black",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:"invert(100%)"}})]})}function a(e){let{pitch:t,roll:i,TRANSITION_TIME:s}=e;const n=5*Math.sin(t),r=5*Math.sin(i);return(0,l.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:"100",y1:"87",x2:"100",y2:"113",stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:"87",y1:"100",x2:"113",y2:"100",stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsxs)("g",{children:[(0,l.jsx)("line",{x1:101+n,y1:101+r,x2:106+n,y2:101+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:101+n,y1:101+r,x2:101+n,y2:106+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:101+n,y1:99+r,x2:101+n,y2:94+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:101+n,y1:99+r,x2:106+n,y2:99+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:99+n,y1:101+r,x2:99+n,y2:106+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:99+n,y1:101+r,x2:94+n,y2:101+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:99+n,y1:99+r,x2:94+n,y2:99+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,l.jsx)("line",{x1:99+n,y1:99+r,x2:99+n,y2:94+r,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}})]})]})}function c(e){let{pitch:t,roll:i,TRANSITION_TIME:s}=e;const n=5*Math.sin(t),r=5*Math.sin(i);return(0,l.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate"},children:[(0,l.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"100",cy:"100",r:"6",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("line",{x1:"100",y1:"106",x2:"100",y2:"112",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("line",{x1:"100",y1:"94",x2:"100",y2:"88",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("line",{x1:"106",y1:"100",x2:"112",y2:"100",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("line",{x1:"94",y1:"100",x2:"88",y2:"100",stroke:"black",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:n+100,cy:r+100,r:"5",fill:"deepskyblue",stroke:"black",strokeWidth:"0.5",style:{transition:`all ${s}s ease-in-out`}}),(0,l.jsx)("path",{d:`M ${n+101} ${r+97.5} \n                    C ${n+102.5} ${r+97.5}, \n                    ${n+102.5} ${r+97.5}, \n                    ${n+102.5} ${r+99} `,stroke:"black",strokeWidth:"1",style:{transition:`all ${s}s ease-in-out`}})]})}function d(e){const t=e.action,i=e.setAction,d=e.appMenu,h=e.setAppMenu,[x,k]=(0,s.useState)("ready"),[u,y]=(0,s.useState)({degrees:"DegreesFull",pointer:"RoseFull",rollpitch:"DoubleSphere"}),[f,p]=(0,s.useState)({heading:0,pitch:0,roll:0,cumulativeRotation:2*Math.PI});var b=null;const M=.25,m={TRANSITION_TIME:M,rotation:f.heading+f.cumulativeRotation},g=(f.heading,f.cumulativeRotation,{pitch:f.pitch,roll:f.roll,TRANSITION_TIME:M}),j={DoubleSphere:(0,l.jsx)(o,{...g}),Target:(0,l.jsx)(a,{...g}),Bubble:(0,l.jsx)(c,{...g})},v={DegreesFull:(0,l.jsx)(n,{})};function I(){(b=new AbsoluteOrientationSensor({frequency:4,referenceFrame:"device"})).start(),b.onreading=()=>{!function(){const e=b.quaternion[0],t=b.quaternion[1],i=b.quaternion[2],s=b.quaternion[3],l=Math.atan2(2*(e*t+i*s),1-2*(t*t+i*i)),n=Math.asin(2*(e*i-s*t)),r=Math.atan2(2*(e*s+t*i),1-2*(e*e+t*t));let o=f.cumulativeRotation;f.heading<0&&l>0?o+=2*Math.PI:f.heading>0&&l<0&&(o-=2*Math.PI),p({heading:l,pitch:n,roll:r,cumulativeRotation:o})}()}}(0,s.useEffect)((()=>{"start"===x&&("AbsoluteOrientationSensor"in window?Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"magnetometer"}),navigator.permissions.query({name:"gyroscope"})]).then((e=>{e.every((e=>"granted"===e.state))?k("running"):k("not allowed")})):k("not supported")),"running"===x&&I()}),[x]),(0,s.useEffect)((()=>()=>{b&&b.stop()}));const P={style:u,setStyle:y};return(0,s.useEffect)((()=>{!function(e,t,i){switch(e){case"RoseFull":case"RoseSimple":case"MagnetPointer":case"Arrow":case"Modern":i.setStyle({...i.style,pointer:e}),t(e);break;case"Target":case"DoubleSphere":case"Bubble":i.setStyle({...i.style,rollpitch:e}),t(e);break;case!1:break;default:t(!1)}}(t,i,P)}),[t]),(0,s.useEffect)((()=>{!function(e,t,i){if(null===e)t({Pointers:{"Rose Full":{action:"RoseFull",radio:!0,name:"pointer",disabled:!1},"Rose Simple":{action:"RoseSimple",radio:!1,name:"pointer",disabled:!1},"Magnet Pointer":{action:"MagnetPointer",radio:!1,name:"pointer",disabled:!1},Arrow:{action:"Arrow",radio:!1,name:"pointer",disabled:!1},Modern:{action:"Modern",radio:!1,name:"pointer",disabled:!1}},"Roll/Pitch":{"Double Sphere":{action:"DoubleSphere",radio:!0,name:"rollpitch",disabled:!1},Bubble:{action:"Bubble",radio:!1,name:"rollpitch",disabled:!1},Target:{action:"Target",radio:!1,name:"rollpitch",disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{let s={...e};Object.keys(s.Pointers).forEach((e=>{s.Pointers[e].action===i.style.pointer?s.Pointers[e].radio=!0:s.Pointers[e].radio=!1})),Object.keys(s["Roll/Pitch"]).forEach((e=>{s["Roll/Pitch"][e].action===i.style.rollpitch?s["Roll/Pitch"][e].radio=!0:s["Roll/Pitch"][e].radio=!1})),t(s)}}(d,h,P)}),[u]),(0,l.jsxs)(l.Fragment,{children:["ready"===x&&(0,l.jsx)("button",{className:"compassStartButton",onClick:()=>k("start"),title:"Start",children:"Start"}),"not supported"===x&&(0,l.jsx)("div",{className:"compassWarning",children:"This feature is not supported on your device and/or browser"}),"not allowed"===x&&(0,l.jsx)("div",{className:"compassWarning",children:"This feature does not have permission to access your device sensors"}),(0,l.jsxs)("svg",{className:"compassContainer",shapeRendering:"geometricprecision",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsxs)("text",{x:"100",y:"5",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"red",children:[(180*f.heading/Math.PI).toFixed(2),"\xb0"]}),v[u.degrees],(0,l.jsx)(r,{TRANSITION_TIME:M,rotation:f.heading+f.cumulativeRotation}),j[u.rollpitch]]})]})}}}]);
//# sourceMappingURL=164.d70f1338.chunk.js.map