"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[918],{7918:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var r=i(5043),o=i(579);function s(){const[e,t]=(0,r.useState)("ready"),[i,s]=(0,r.useState)({heading:0,pitch:0,roll:0});var n=null;var l=[];!function(){l=[];const e=100;let t,i,r,o,s,n,a,c,h,d,x,p,g;for(let f=0;f<16;f++)f>=12?(x=90*f,p=60,g=15):f>=8?(x=90*f-45,p=50,g=12.5):(x=360*f/8+22.5,p=40,g=10),t=Math.cos(x*(Math.PI/180))*p+e,i=Math.sin(x*(Math.PI/180))*p+e,r=Math.cos((x+45)*(Math.PI/180))*g+e,o=Math.sin((x+45)*(Math.PI/180))*g+e,s=e,n=e,a=Math.cos((x-45)*(Math.PI/180))*g+e,c=Math.sin((x-45)*(Math.PI/180))*g+e,h=t+","+i+" "+r+","+o+" 100,100 "+a+","+c,d=t+","+i+" "+r+","+o+" 100,100",l.push([h,d])}();var a=[];return function(){a=[];for(let i=0;i<360;i++){var e,t;i%90===0?(e=20,t=20):(i+45)%90===0?(e=15,t=15):i%15===0?(e=10,t=10):(e=5,t=5),a.push([e,t])}}(),(0,r.useEffect)((()=>{"start"===e&&("AbsoluteOrientationSensor"in window?Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"magnetometer"}),navigator.permissions.query({name:"gyroscope"})]).then((e=>{e.every((e=>"granted"===e.state))?t("running"):t("not allowed")})):t("not supported")),"running"===e&&((n=new AbsoluteOrientationSensor({frequency:4,referenceFrame:"device"})).start(),n.onreading=()=>{const e=n.quaternion[0],t=n.quaternion[1],i=n.quaternion[2],r=n.quaternion[3],o=Math.atan2(2*(e*t+i*r),1-2*(t*t+i*i)),l=Math.asin(2*(e*i-r*t)),a=Math.atan2(2*(e*r+t*i),1-2*(e*e+t*t));s({heading:o,pitch:l,roll:a})})}),[e]),(0,r.useEffect)((()=>()=>{n&&n.stop()}),[]),(0,o.jsxs)(o.Fragment,{children:["ready"===e&&(0,o.jsx)("button",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black",backgroundColor:"lightgray",border:"1px black solid",padding:"5px",boxSizing:"border-box",fontSize:"20px"},onClick:()=>t("start"),title:"Start",children:"Start"}),"not supported"===e&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature is not supported on your device and/or browser"}),"not allowed"===e&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature does not have permission to access your device sensors"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"5px",boxSizing:"border-box"},children:(0,o.jsxs)("svg",{style:{width:"inherit",height:"inherit"},shapeRendering:"geometricprecision",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("text",{x:"100",y:"5",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"red",children:[180*i.heading/Math.PI,"\xb0"]}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"white",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"60",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"50.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"40.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i.heading>=0?i.heading:i.heading+360}rad`,transition:"rotate 0.25s ease-in-out"},children:[l.map(((e,t)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("polygon",{points:e[0],fill:"white",stroke:"black",strokeWidth:"1"},t+"a"),(0,o.jsx)("polygon",{points:e[1],fill:"black"},t+"b")]}))),(0,o.jsx)("polygon",{points:"100,30 96,45 100,50 104,45",fill:"white",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("polygon",{points:"100,30 104,45 100,45",fill:"black"}),(0,o.jsx)("polygon",{points:"100,45 96,45 100,50",fill:"black"}),(0,o.jsx)("rect",{x:"96",y:"48",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"})]}),(0,o.jsxs)("g",{id:"degrees",children:[a.map(((e,t)=>(0,o.jsx)("line",{x1:Math.cos(t*(Math.PI/180))*(90-e[0])+100,y1:Math.sin(t*(Math.PI/180))*(90-e[1])+100,x2:90*Math.cos(t*(Math.PI/180))+100,y2:90*Math.sin(t*(Math.PI/180))+100,stroke:270===t?"red":"black",strokeWidth:"1"},t))),(0,o.jsx)("polygon",{points:"100,30 96,20 100,22 104,20",fill:"red"})]}),(0,o.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,o.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5*Math.sin(i.pitch)+100,cy:5*Math.sin(i.roll)+100,r:"5",fill:"black",style:{transition:"all 0.25s ease-in-out",mixBlendMode:"difference",filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5.5*-Math.sin(i.pitch)+100,cy:5.5*-Math.sin(i.roll)+100,r:"4.5",fill:"black",style:{transition:"all 0.25s ease-in-out",mixBlendMode:"difference",filter:"invert(100%)"}})]})]})})]})}}}]);
//# sourceMappingURL=918.06a2338c.chunk.js.map