"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[918],{7918:(t,e,r)=>{r.r(e),r.d(e,{default:()=>s});var i=r(5043),o=r(579);function s(){const[t,e]=(0,i.useState)("ready"),[r,s]=(0,i.useState)({heading:0,pitch:0,roll:0});var n=null,a=[];!function(){a=[];const t=100;let e,r,i,o,s,n,l,c,h,d,x,g,f;for(let p=0;p<16;p++)p>=12?(x=90*p,g=60,f=15):p>=8?(x=90*p-45,g=50,f=12.5):(x=360*p/8+22.5,g=40,f=10),e=Math.cos(x*(Math.PI/180))*g+t,r=Math.sin(x*(Math.PI/180))*g+t,i=Math.cos((x+45)*(Math.PI/180))*f+t,o=Math.sin((x+45)*(Math.PI/180))*f+t,s=t,n=t,l=Math.cos((x-45)*(Math.PI/180))*f+t,c=Math.sin((x-45)*(Math.PI/180))*f+t,h=e+","+r+" "+i+","+o+" 100,100 "+l+","+c,d=e+","+r+" "+i+","+o+" 100,100",a.push([h,d])}();var l=[];return function(){l=[];for(let r=0;r<360;r++){var t,e;r%90===0?(t=20,e=20):(r+45)%90===0?(t=15,e=15):r%15===0?(t=10,e=10):(t=5,e=5),l.push([t,e])}}(),(0,i.useEffect)((()=>{"start"===t&&("AbsoluteOrientationSensor"in window?Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"magnetometer"}),navigator.permissions.query({name:"gyroscope"})]).then((t=>{t.every((t=>"granted"===t.state))?e("running"):e("not allowed")})):e("not supported")),"running"===t&&((n=new AbsoluteOrientationSensor({frequency:2,referenceFrame:"device"})).start(),n.onreading=()=>{const t=n.quaternion[0],e=n.quaternion[1],r=n.quaternion[2],i=n.quaternion[3],o=Math.atan2(2*(t*e+r*i),1-2*(e*e+r*r)),a=Math.asin(2*(t*r-i*e)),l=Math.atan2(2*(t*i+e*r),1-2*(t*t+e*e));s({heading:o,pitch:a,roll:l})})}),[t]),(0,i.useEffect)((()=>()=>{n&&n.stop()}),[]),(0,o.jsxs)(o.Fragment,{children:["ready"===t&&(0,o.jsx)("button",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black",backgroundColor:"lightgray",border:"1px black solid",padding:"5px",boxSizing:"border-box",fontSize:"20px"},onClick:()=>e("start"),title:"Start",children:"Start"}),"not supported"===t&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature is not supported on your device and/or browser"}),"not allowed"===t&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature does not have permission to access your device sensors"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"5px",boxSizing:"border-box"},children:(0,o.jsxs)("svg",{style:{width:"inherit",height:"inherit",transformOrigin:"center",transition:"transform 0.5s"},shapeRendering:"geometricprecision",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("text",{x:"100",y:"5",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"red",children:[180*r.heading/Math.PI,"\xb0"]}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"white",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"60",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"50.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"40.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsxs)("g",{id:"rose",style:{transform:`rotate(${r.heading})`},children:[a.map(((t,e)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("polygon",{points:t[0],fill:"white",stroke:"black",strokeWidth:"1",style:{transform:`rotate(${r.heading})`}},e+"a"),(0,o.jsx)("polygon",{points:t[1],fill:"black",style:{transform:`rotate(${r.heading})`}},e+"b")]}))),(0,o.jsx)("polygon",{points:"100,30 96,45 100,50 104,45",fill:"white",stroke:"black",strokeWidth:"1",style:{transform:`rotate(${r.heading})`}}),(0,o.jsx)("polygon",{points:"100,30 104,45 100,45",fill:"black",style:{transform:`rotate(${r.heading})`}}),(0,o.jsx)("polygon",{points:"100,45 96,45 100,50",fill:"black",style:{transform:`rotate(${r.heading})`}}),(0,o.jsx)("rect",{x:"96",y:"48",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1",style:{transform:`rotate(${r.heading})`}})]}),(0,o.jsxs)("g",{id:"degrees",children:[l.map(((t,e)=>(0,o.jsx)("line",{x1:Math.cos(e*(Math.PI/180))*(90-t[0])+100,y1:Math.sin(e*(Math.PI/180))*(90-t[1])+100,x2:90*Math.cos(e*(Math.PI/180))+100,y2:90*Math.sin(e*(Math.PI/180))+100,stroke:270===e?"red":"black",strokeWidth:"1"},e))),(0,o.jsx)("polygon",{points:"100,30 96,20 100,22 104,20",fill:"red"})]}),(0,o.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,o.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5*Math.sin(r.pitch)+100,cy:5*Math.sin(r.roll)+100,r:"5",fill:"black",style:{mixBlendMode:"difference",filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5.5*-Math.sin(r.pitch)+100,cy:5.5*-Math.sin(r.roll)+100,r:"4.5",fill:"black",style:{mixBlendMode:"difference",filter:"invert(100%)"}})]})]})})]})}}}]);
//# sourceMappingURL=918.16a81088.chunk.js.map