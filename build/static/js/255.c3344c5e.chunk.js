"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[255],{255:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var o=a(5043),r=a(184),s=a(1462);const n=JSON.parse('[{"Level":0,"Bars":15,"Matrix":[{"x":1,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":2,"w":4,"h":3,"s":1},{"x":13,"y":2,"w":4,"h":3,"s":1},{"x":19,"y":2,"w":4,"h":3,"s":1},{"x":25,"y":2,"w":4,"h":3,"s":1},{"x":1,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":6,"w":4,"h":3,"s":1},{"x":13,"y":6,"w":4,"h":3,"s":1},{"x":19,"y":6,"w":4,"h":3,"s":1},{"x":25,"y":6,"w":4,"h":3,"s":1},{"x":1,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":10,"w":4,"h":3,"s":1},{"x":13,"y":10,"w":4,"h":3,"s":1},{"x":19,"y":10,"w":4,"h":3,"s":1},{"x":25,"y":10,"w":4,"h":3,"s":1}]},{"Level":1,"Bars":15,"Matrix":[{"x":0,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":3,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":3,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":4,"h":3,"s":1},{"x":0,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":4,"h":3,"s":1},{"x":0,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":10,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":10,"w":4,"h":3,"s":1}]},{"Level":2,"Bars":15,"Matrix":[{"x":0,"y":2,"w":2,"h":3,"s":1},{"x":7,"y":4,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":4,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":2,"h":3,"s":1},{"x":0,"y":6,"w":2,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":2,"h":3,"s":1},{"x":0,"y":16,"w":2,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":16,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":16,"w":2,"h":3,"s":1}]},{"Level":3,"Bars":0,"Matrix":[]}]'),i=(e,t,a)=>{e.fillStyle="silver",e.fillRect(0,0,t,1),e.fillRect(0,0,1,a),e.fillRect(t-1,0,1,a),e.fillRect(0,a-1,t,1)};var c=a(579);const l=60,d=1e3/l,u=30,h=30,y={x:12,y:27,w:6},x={x:15,y:50,r:.5,dirX:.25,dirY:-.25},f={x:15,y:52,r:.25,dirX:0,dirY:-.25,t:-5,color:""};function w(e){let{controls:t,updateScoreboard:a,isSelected:r,gameState:s,setGameState:w,canvasZoom:p}=e;const S=(0,o.useRef)(null),[m,g]=(0,o.useState)(JSON.parse(JSON.stringify(n))),[b,k]=(0,o.useState)(0),[v,B]=(0,o.useState)(m[b]),[j,P]=(0,o.useState)(v.Bars),[M,C]=(0,o.useState)(0),[E,T]=(0,o.useState)(0);let[O,R]=(0,o.useState)(Object.create(y)),[F,N]=(0,o.useState)(Object.create(x)),[D]=(0,o.useState)(Object.create(f));D.color="blue";let[A]=(0,o.useState)(Object.create(f));A.color="green";let[G]=(0,o.useState)(Object.create(f));G.color="red";let[L]=(0,o.useState)(Object.create(f));L.color="yellow";let[I]=(0,o.useState)(Object.create(f));I.color="cyan";let[Y]=(0,o.useState)(Object.create(f));Y.color="magenta";let[K]=(0,o.useState)(Object.create(f));K.color="white";const U={time:0,score:0,gameState:"Start"};let[X,Z]=(0,o.useState)(0);(0,o.useEffect)((()=>{t.pause&&("Play"===s?w("Pause"):"Pause"===s?w("Play"):"Win"!==s&&"End"!==s&&"Start"!==s||w("Restart")),t.left&&!t.right&&O.x+O.w>O.w&&(O.x=O.x-1),t.right&&!t.left&&O.x+O.w<h&&(O.x=O.x+1)}),[t]);const W=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},J=(e,t,a,o)=>{for(let r=0;r<12;r++)e.fillStyle=o.color,e.scale(1,.5),e.beginPath(),e.arc(o.x*t+Math.cos(2*Math.PI/12*r)*o.t*2*t,o.y*a+2*Math.sin(2*Math.PI/12*r)*o.t*2*a,o.r/1*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)},V=(e,t,a,o)=>{switch(W(e),e.fillStyle="red",e.font="40px monospace",o){case 4:default:e.fillText("Next Level",5*t,17*a,500);break;case 3:e.fillText("3 sec",9*t,17*a,500);break;case 2:e.fillText("2 sec",9*t,17*a,500);break;case 1:e.fillText("1 sec",9*t,17*a,500)}},H=(e,t,a)=>{let o,r;o=O.x,r=O.y,e.fillStyle="cyan",e.fillRect(o*t,r*a,O.w*t,a)},$=(e,t,a,o)=>{let r;switch(o.h){case 3:r="green";break;case 2:r="yellow";break;case 1:r="orange";break;default:r="blue"}e.fillStyle=r,e.fillRect(o.x*t,o.y*a,o.w*t,a)},q=(e,t,a)=>{for(let o=0;o<v.Bars;o++)v.Matrix[o].h>0&&$(e,t,a,v.Matrix[o])},Q=e=>{e.h-1>=0&&(e.h=e.h-1,X+=e.s,Z(X)),0===e.h&&(P(j-1),j-1===0&&w("LevelUp"))},z=e=>{let t;0!==e.x&&e.x!==h||(e.dirX=-e.dirX),0===e.y?e.dirY=-e.dirY:e.y===2*u&&w("End"),e.y+e.r===2*O.y&&e.x>=O.x&&e.x<=O.x+O.w&&(e.dirY=-e.dirY);for(let a=0;a<v.Bars;a++)t=v.Matrix[a],t.h>0&&e.x+e.r>=t.x&&e.x-e.r<=t.x+t.w&&e.y+e.r>=2*t.y&&e.y-e.r<=2*(t.y+1)&&(e.x+e.r>t.x&&e.x-e.r<t.x+t.w&&(e.dirY=-e.dirY,Q(t)),e.y+e.r>2*t.y&&e.y-e.r<2*(t.y+1)&&(e.dirX=-e.dirX,Q(t)))},_=(e,t,a,o)=>{e.fillStyle="#FFFFFF",e.scale(1,.5),e.beginPath(),e.arc(o.x*t,o.y*a,o.r*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)};return(0,o.useEffect)((()=>{const e=S.current.getContext("2d");let t,o=e.canvas.width/h,r=e.canvas.height/u;switch(s){case"Play":W(e),i(e,e.canvas.width,e.canvas.height),H(e,o,r),q(e,o,r),F.x=F.x+F.dirX,F.y=F.y+F.dirY,z(F),_(e,o,r,F),setTimeout((()=>{C(M+1)}),[d]);break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,17*a,500)})(e,o,r);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,o,r);break;case"Restart":g(JSON.parse(JSON.stringify(n))),k(0),B(m[b]),P(v.Bars),N(Object.create(x)),R(Object.create(y)),Z(0),C(1),w("Play");break;case"LevelUp":b+1===3?w("Win"):(V(e,o,r,4),setTimeout((()=>{W(e),V(e,o,r,3)}),[1e3]),setTimeout((()=>{V(e,o,r,2)}),[2e3]),setTimeout((()=>{V(e,o,r,1)}),[3e3]),setTimeout((()=>{k(b+1),B(m[b+1]),P(v.Bars),N(Object.create(x)),W(e),q(e,o,r),w("Play")}),[4e3]));break;case"Win":B(m[3]),((e,t,a)=>{W(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",8*t,17*a,500)})(e,o,r),H(e,o,r),((e,t,a)=>{let o;for(let r=0;r<=6;r++){switch(r){case 0:o=D;break;case 1:o=A;break;case 2:o=G;break;case 3:o=L;break;case 4:o=I;break;case 5:o=Y;break;case 6:o=K}o.t<=-5?(o.t=Math.floor(4*Math.random())+1,o.x=O.x+O.w/2,o.y=52,o.dirX=(Math.random()-.5)/8,o.dirY=-.25):o.t>3?o.t=o.t-1/l:o.t>0?(o.x=o.x+o.dirX,o.y=o.y+o.dirY,z(o),_(e,t,a,o),o.t=o.t-1/l):o.t>-5&&(J(e,t,a,o),o.t=o.t-1/l)}})(e,o,r),setTimeout((()=>{T(E+1)}),[d]);break;default:W(e)}U.time=Math.floor(M/l),U.score=X,U.gameState=s,a(U);const c=()=>{t=window.requestAnimationFrame(c)};return c(),()=>{window.cancelAnimationFrame(t)}}),[M,E,s]),(0,c.jsx)("canvas",{ref:S,style:{transform:`scale(${p})`}})}const p=e=>{let{controls:t,updateScoreboard:a,isSelected:r,gameState:s,setGameState:n,canvasZoom:l}=e;let d=(0,o.useRef)(null),[u,h]=(0,o.useState)(!1),[y]=(0,o.useState)({x:0,y:0}),[x,f]=(0,o.useState)(0),[w]=(0,o.useState)({direction:"right",x:0,y:0}),[p,S]=(0,o.useState)("right"),[m,g]=(0,o.useState)({x:[],y:[]}),[b,k]=(0,o.useState)(!1);const v={time:0,score:0,gameState:"Start"};(0,o.useEffect)((()=>{t.pause&&t.pause&&("Play"===s?n("Pause"):"Pause"===s?n("Play"):"Win"!==s&&"End"!==s&&"Start"!==s||n("Restart")),void 0===m.x[0]?t.up?w.direction="up":t.down?w.direction="down":t.left?w.direction="left":t.right&&(w.direction="right"):t.up&&"down"!==p?w.direction="up":t.down&&"up"!==p?w.direction="down":t.left&&"right"!==p?w.direction="left":t.right&&"left"!==p&&(w.direction="right")}),[t]);const B=(e,t,a)=>{e.fillStyle="#000000",e.fillRect(0,0,t,a)};let[j,P]=(0,o.useState)(0);return(0,o.useEffect)((()=>{const e=d.current.getContext("2d");let t,o=e.canvas.width/30,r=e.canvas.height/30;"Play"===s?(B(e,e.canvas.width,e.canvas.height),i(e,e.canvas.width,e.canvas.height),((e,t,a)=>{let o,r,s,n=!1;if(u)o=y.x,r=y.y;else{if(y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random()),void 0===m.x[0])for(;y.x===w.x&&y.y===w.y;)y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());else{for(let e=0;e<m.x.length;e++)y.x===m.x[e]&&(s=!0),y.y===m.y[e]&&(n=!0);for(;!0===s&&!0===n;){y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());let e=!1,t=!1;for(let a=0;a<m.x.length;a++)y.x===m.x[a]&&(e=!0),y.y===m.y[a]&&(t=!0);s=e,n=t}}o=y.x,r=y.y,h(!0)}e.fillStyle="#00FF00",e.fillRect(o*t,r*a,t,a)})(e,o,r),((e,t,a)=>{let o,r;if(b)switch(w.direction){case"right":o=w.x+1,r=w.y,w.x=w.x+1;break;case"left":o=w.x-1,r=w.y,w.x=w.x-1;break;case"up":o=w.x,r=w.y-1,w.y=w.y-1;break;case"down":o=w.x,r=w.y+1,w.y=w.y+1}else o=10*t,r=10*a,k(!0),w.x=10,w.y=10;if(S(w.direction),void 0!==m.x[2])for(let s=2;s<m.x.length;s++)m.x[s]===w.x&&m.y[s]===w.y&&n("End");w.x>=30||w.x<0||w.y<0||w.y>=30?n("End"):y.x===w.x&&y.y===w.y&&(h(!1),f(x+1),m.x.unshift(w.x),m.y.unshift(w.y)),e.fillStyle="#00FFFF",e.fillRect(o*t,r*a,t,a)})(e,o,r),((e,t,a)=>{for(let o=0;o<m.x.length;o++)e.fillStyle="#00FFFF",e.fillRect(m.x[o]*t,m.y[o]*a,t,a);m.x.unshift(w.x),m.y.unshift(w.y),m.x.pop(),m.y.pop()})(e,o,r),setTimeout((()=>{P(j+1)}),[1e3/(x/2+4)])):"Pause"===s?((e,t,a)=>{B(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Paused",8*t,17*a,500)})(e,o,r):"End"===s?(B(e,e.canvas.width,e.canvas.height),((e,t,a)=>{B(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,o,r)):"Restart"===s&&(n("Play"),P(1),h(!1),k(!1),f(0),g({x:[],y:[]})),v.time=Math.floor(j/(x/2+4)),v.score=x,v.gameState=s,a(v);const c=()=>{t=window.requestAnimationFrame(c)};return c(),()=>{window.cancelAnimationFrame(t)}}),[j,s]),(0,c.jsx)("canvas",{height:"150",width:"150",ref:d,style:{transform:`scale(${l})`}})},S=JSON.parse('{"1":{"Level":1,"Enemies":72,"Matrix":[[0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,9,0,0,9,0,9,0,0,9,0,9,0,0,9,0,9,0,9,0,9,0,0,9,0]]}}'),m=60,g=1e3/m,b=150,k=300,v=10,B={id:1,x:10,y:10,row:0,life:1,currSprite:1,totalSprites:2,w:10,h:10,hit:!1,color:"green",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,0,1,1,0,1,1,0],[1,1,0,0,1,1,0,0,1,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,0,1,0,1,1,0,1,0,0],[0,1,1,0,1,1,0,1,1,0],[0,1,0,0,0,0,0,0,1,1]]}},j={id:2,x:10,y:10,row:0,life:2,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"red",sprites:{1:[[0,1,0,0,0,0,0,0,1,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,0,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0,0]],2:[[0,0,1,0,0,0,0,1,0,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,1,0,0,1,1,1,0]]}},P={id:3,x:10,y:10,row:0,life:3,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"cyan",sprites:{1:[[0,1,1,0,0,0,0,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,1,0,0,0,0,0,0,1,1]]}},M={id:8,x:10,y:10,life:1,hit:!1,currSprite:1,totalSprites:2,w:20,h:10,color:"magenta",sprites:{1:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]],2:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]]}},C={id:10,x:10,y:130,speed:2,move:"none",shooting:!1,cooling:0,currSprite:1,w:10,h:10,color:"white",cooldown:250,sprites:{1:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,1,0,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,0,0,1,0,0,1,0,0,1]]}},E={id:9,x:10,y:10,currSprite:1,w:10,h:10,color:"gray",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,0,0]]}},T={id:"player",x:10,y:10,h:9,w:2,speed:5,color:"white",currSprite:1,totalSprites:2,sprites:{1:[[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1]],2:[[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1]]}},O={id:"invader",x:10,y:10,currSprite:1,totalSprites:1,w:2,h:9,speed:2,color:"yellow",sprites:{1:[[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1]]}};function R(e){let{controls:t,updateScoreboard:a,isSelected:r,gameState:s,setGameState:n,canvasZoom:l}=e;const d=(0,o.useRef)(null),[u,h]=(0,o.useState)(0),[y,x]=(0,o.useState)(3),[f,w]=(0,o.useState)(1),[p,R]=(0,o.useState)(0),[F,N]=(0,o.useState)(0),[D,A]=(0,o.useState)({index:0,rows:[]}),[G,L]=(0,o.useState)([]),[I,Y]=(0,o.useState)([]),[K,U]=(0,o.useState)([]),X=500;let[Z,W]=(0,o.useState)(Object.create(C));const J={time:0,score:0,gameState:"Start"};(0,o.useEffect)((()=>{if(t.pause)switch(s){case"Play":n("Pause");break;case"Pause":n("Play");break;case"Win":case"End":case"Start":n("Restart")}}),[t]),(0,o.useEffect)((()=>{"Play"===s&&(t.left&&!t.right&&Z.x+Z.w>Z.w?Z.x=Z.x-Z.speed:t.right&&!t.left&&Z.x+Z.w<k?Z.x=Z.x+Z.speed:t.left&&t.right?Z.move="none":t.left||t.right||(Z.move="none"),t.up&&0===Z.cooling&&(Z.shooting=!0))}),[t,p]);const V=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},H=(e,t)=>{!0===t.hit?e.fillStyle="white":e.fillStyle=t.color;for(let a=0;a<t.sprites[t.currSprite].length;a++)for(let o=0;o<t.sprites[t.currSprite][a].length;o++)1===t.sprites[t.currSprite][a][o]&&e.fillRect(t.x+o,t.y+a,1,1);t.sprites.length>1&&(t.currSprite<t.sprites.length-1?t.currSprite++:t.currSprite=1)},$=e=>{for(let t=0;t<G.length;t++)H(e,G[t]);for(let t=0;t<I.length;t++)H(e,I[t]);H(e,Z),(e=>{let t=0,a=0,o=0;if(K.length>0)for(let r=0;r<K.length;r++){K[r].decay<=166.66666666666666?t=Math.floor(255*K[r].decay/166.66666666666666):K[r].decay<=1e3/3?(t=255,a=Math.floor(255*(K[r].decay-166.66666666666666)/166.66666666666666)):(t=255,a=255,o=Math.floor(255*(K[r].decay-1e3/3)/166.66666666666666)),e.fillStyle="rgb("+t+","+a+","+o+")";let s=2*K[r].decay/(X+K[r].decay),n=K[r].w/2*s-10;e.fillRect(K[r].x+2*n/3,K[r].y+2*n/3,2,2),e.fillRect(K[r].x-2*n/3,K[r].y+2*n/3,2,2),e.fillRect(K[r].x+2*n/3,K[r].y-2*n/3,2,2),e.fillRect(K[r].x-2*n/3,K[r].y-2*n/3,2,2),e.fillRect(K[r].x+n,K[r].y,2,2),e.fillRect(K[r].x-n,K[r].y,2,2),e.fillRect(K[r].x,K[r].y+n,2,2),e.fillRect(K[r].x,K[r].y-n,2,2)}})(e)},q=e=>{let t={x:e.x+e.w/2-1,y:e.y+e.h/2-1,w:e.w,h:e.h,decay:X};K.push(t),U(K)},Q=e=>{G[e].life-1>0?(G[e].life=G[e].life-1,G[e].hit=!0,h(u+5),setTimeout((()=>{G[e].hit=!1}),[Z.cooldown/2])):(q(G[e]),8!==G[e].id?(N(F-1),h(u+10)):h(u+150),G.splice(e,1)),L(G)},z=e=>{q(G[e])},_=e=>{let t=!1;for(let a=0;a<G.length;a++)"player"===I[e].id?I[e].x>G[a].x&&I[e].x<G[a].x+G[a].w&&I[e].y>G[a].y&&I[e].y<G[a].y+G[a].h&&(t=!0,9===G[a].id?z(a):Q(a)):I[e].x>Z.x&&I[e].x<Z.x+Z.w&&I[e].y>Z.y-Z.h&&I[e].y<Z.y?(t=!0,y-1>=0?(x(y-1),q(Z)):n("End")):I[e].x>G[a].x&&I[e].x<G[a].x+G[a].w&&I[e].y>G[a].y-G[a].h&&I[e].y<G[a].y&&9===G[a].id&&(t=!0,z(a));return t},ee=()=>{p*g%(1200*g)===0&&(()=>{let e=Object.create(M);Math.random()>.5?(e.x=0,e.speed=1):(e.x=k-e.w,e.speed=-1),e.y=2,G.push(e),L(G)})(),(()=>{let e={};!0===Z.shooting&&0===Z.cooling&&(e=Object.create(T),e.x=Z.x-1+Z.w/2,e.y=Z.y,I.push(e),Z.cooling=Z.cooldown,setTimeout((()=>{Z.cooling=0}),[Z.cooldown]),Y(I),Z.shooting=!1)})(),(()=>{let e={},t=Math.random(),a=Math.floor(Math.random()*F);t>.95&&(e=Object.create(O),e.x=G[a].x+Z.w/2,e.y=G[a].y,I.push(e),Y(I))})(),(()=>{let e=[];if(I.length>0){for(let t=0;t<I.length;t++)_(t)||("player"===I[t].id?I[t].y>0&&(I[t].y-=I[t].speed,I[t].currSprite<I[t].totalSprites?I[t].currSprite=I[t].currSprite+1:I[t].currSprite=1,e.push(I[t])):I[t].y<b&&(I[t].y+=I[t].speed,e.push(I[t])));Y(e)}})(),(()=>{if(K.length>0){for(let e=0;e<K.length;e++)K[e].decay-g>0?K[e].decay=K[e].decay-g:K.splice(e,1);U(K)}})(),(()=>{switch(D.index>=F&&(D.index=0),D.rows[G[D.index].row]){case"left":G[D.index].x>2?G[D.index].x=G[D.index].x-1:(D.rows[G[D.index].row]="right",G[D.index].x=G[D.index].x+1);break;case"right":G[D.index].x+G[D.index].w<k-1?G[D.index].x=G[D.index].x+1:D.rows[G[D.index].row]="left"}G[D.index].currSprite<G[D.index].totalSprites?G[D.index].currSprite=G[D.index].currSprite+1:G[D.index].currSprite=1,D.index++;for(let e=0;e<G.length;e++)8===G[e].id&&(G[e].x+G[e].w>0&&G[e].x<k?(G[e].x=G[e].x+G[e].speed,G[e].currSprite<G[e].totalSprites?G[e].currSprite=G[e].currSprite+1:G[e].currSprite=1):G.splice(e,1));L(G),A(D)})()};return(0,o.useEffect)((()=>{const e=d.current.getContext("2d");let t;switch(s){case"Play":y>=0&&F>0?(V(e),i(e,e.canvas.width,e.canvas.height),ee(),$(e),r=v,c=v,(o=e).fillStyle="red",o.font="10px monospace",o.fillText("LIFE:"+y,r/2,b-c/4,500),setTimeout((()=>{R(p+1)}),[g])):y<0?n("End"):0===F&&n("Win");break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,8*a,500)})(e,v,v);break;case"Win":((e,t,a)=>{V(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",7*t,8*a,500)})(e,v,v);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,8*a,500)})(e,v,v);break;case"Start":default:break;case"Restart":w(1),h(0),x(3),U([]),Y([]),(()=>{let e={},t=[],a={index:0,rows:[]};for(let o=0;o<S[f].Matrix.length;o++)for(let r=0;r<S[f].Matrix[o].length;r++)switch(S[f].Matrix[o][r]){case 1:e=Object.create(B),e.x=r*v*1.2,e.y=15+o*v*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 2:e=Object.create(j),e.x=r*v*1.2,e.y=15+o*v*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 3:e=Object.create(P),e.x=r*v*1.2,e.y=15+o*v*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 9:e=Object.create(E),e.x=r*v*1.2,e.y=5+o*v*1.2,t.push(e)}N(S[f].Enemies),L(t),A(a)})(),W(Object.create(C)),R(1),n("Play")}var o,r,c;J.time=Math.floor(p/m),J.score=u,J.gameState=s,a(J);const l=()=>{t=window.requestAnimationFrame(l)};return l(),()=>{window.cancelAnimationFrame(t)}}),[s,p]),(0,c.jsx)("canvas",{ref:d,width:300,height:150,style:{transform:`scale(${l})`}})}const F=(e,t,a,o,r)=>{switch(e){case"Keybinds":r.setShowKeybindDialog(!r.showKeybindDialog),t(!1);break;case"Play / Pause":"Play"===r.gameState?r.setGameState("Pause"):"Pause"===r.gameState&&r.setGameState("Play"),t(!1);break;case"New":r.setGameState("Restart"),t(!1);break;case"scoreboard":r.setShowScoreboard(!r.showScoreboard),t(!1);break;case"touchscreenControls":r.setShowControls(!r.showControls),t(!1);break;case!1:break;default:t(!1)}},N=(e,t,a)=>{if(null===e)t({Game:{"New Game":{action:"New",keybind:"Alt+N",disabled:!0},"Play / Pause":{action:"Play / Pause",keybind:"P",disabled:!0},LineBreak1:{},Keybinds:{action:"Keybinds",disabled:!1},LineBreak2:{},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},View:{Scoreboard:{action:"scoreboard",checkbox:!0,disabled:!1},"Touchscreen Controls":{action:"touchscreenControls",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{t({...e,Game:{...e.Game,"New Game":{...e.Game["New Game"],disabled:!a.gameChoice},"Play / Pause":{...e.Game["Play / Pause"],disabled:!a.gameChoice}},View:{...e.View,Scoreboard:{...e.View.Scoreboard,checkbox:a.showScoreboard},"Touchscreen Controls":{...e.View["Touchscreen Controls"],checkbox:a.showControls}}})}},D=e=>{let{showKeybindDialog:t,setShowKeybindDialog:a,setAppDialog:r,keyboard:s,setKeyboard:n}=e;const[i,l]=(0,o.useState)(structuredClone(s)),[d,u]=(0,o.useState)(""),[h,y]=(0,o.useState)(0),x=(0,c.jsxs)("div",{children:[Object.keys(i).map((e=>(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",marginLeft:"5px"},children:[(0,c.jsx)("div",{style:{width:"55px",height:"30px",display:"flex",justifyContent:"start",alignItems:"center",textAlign:"center"},children:(0,c.jsxs)("b",{children:[e,":"]})}),i[e].keys.map(((t,a)=>(0,c.jsx)("button",{style:{width:"75px",height:"30px",border:"1px solid dimgray"},onContextMenu:t=>((e,t)=>{i[e].keys.splice(t,1),l(i),y(h+1)})(e,a),onClick:()=>((e,t)=>{u("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((a=>{i[e].keys[t]=a,l(i),u("")})).catch((e=>{u(e)}))})(e,a),children:t},e))),(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:i[e].keys.length<3&&(0,c.jsx)("button",{onClick:()=>(e=>{u("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((t=>{i[e].keys[i[e].keys.length]=t,l(i),u("")})).catch((e=>{u(e)}))})(e),children:"+"})})]},e))),d]}),f={Confirm:()=>{n(i),a(!1),r(null)},Reset:()=>{l(s),y(h+1)},Cancel:()=>{l(s),a(!1),r(null)}};return(0,o.useEffect)((()=>{t&&r({title:"Keybinds",info:x,actions:f})}),[t,i,d,h]),(0,c.jsx)(c.Fragment,{})};function A(e){let{isSelected:t,action:a,setAction:n,appMenu:i,setAppMenu:l,appDialog:d,setAppDialog:u,contextMenu:h}=e;const y=(0,o.useRef)(),[x,f]=(0,o.useState)({up:{keys:["w","W","ArrowUp"],active:!0},down:{keys:["s","S","ArrowDown"],active:!0},left:{keys:["a","A","ArrowLeft"],active:!0},right:{keys:["d","D","ArrowRight"],active:!0},one:{keys:["1"],active:!0},two:{keys:["2"],active:!0},pause:{keys:["p","P","Pause"],active:!0}}),S=function(e,t){var[a,r]=(0,o.useState)({up:!1,down:!1,left:!1,right:!1,one:!1,two:!1,pause:!1});const s=(0,o.useCallback)(((e,a)=>{const o=Object.keys(t);for(let s=0;s<o.length;s++){let n=t[o[s]].keys;for(let t=0;t<n.length;t++)n[t]===e&&r((e=>({...e,[o[s]]:a})))}}),[t]),n=(0,o.useCallback)((e=>{s(e.key,!0)}),[s]),i=(0,o.useCallback)((e=>{s(e.key,!1)}),[s]);return(0,o.useEffect)((()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)})),[n]),(0,o.useEffect)((()=>(document.addEventListener("keyup",i),()=>{document.removeEventListener("keyup",i)})),[i]),(0,o.useEffect)((()=>{e||r({...a,pause:!0})}),[e]),a}(t,x),[m,g]=(0,o.useState)("Start"),[b,k]=(0,o.useState)("None"),[v,B]=(0,o.useState)(1),[j,P]=(0,o.useState)(!0),[M,C]=(0,o.useState)(!0),[E,T]=(0,o.useState)(!0),[O,A]=(0,o.useState)(!1),[G,L]=(0,o.useState)({time:0,score:0,gameState:"Start"}),I=e=>{L(e)},Y=(e,t,a)=>{document.dispatchEvent(new KeyboardEvent(t,{key:x[e].keys[0],repeat:a}))},K=(e,t)=>{"touchstart"===e.type?S[t]=!0:"touchend"===e.type||"touchcancel"===e.type?S[t]=!1:"touchmove"===e.type&&Object.values(e.touches).forEach((e=>{let t=[],a=e.clientX,o=e.clientY,r={up:document.getElementById("arcadeButtonUp").getBoundingClientRect(),down:document.getElementById("arcadeButtonDown").getBoundingClientRect(),left:document.getElementById("arcadeButtonLeft").getBoundingClientRect(),right:document.getElementById("arcadeButtonRight").getBoundingClientRect(),one:document.getElementById("arcadeButtonA").getBoundingClientRect(),two:document.getElementById("arcadeButtonB").getBoundingClientRect()};Object.keys(r).forEach((e=>{a>=r[e].x&&a<=r[e].x+r[e].width&&o>=r[e].y&&o<=r[e].y+r[e].height&&t.push(e)})),Object.keys(x).forEach((e=>{t.includes(e)?S[e]=!0:S[e]=!1}))}))};return(0,o.useEffect)((()=>{P("Play"!==m)}),[m]),(0,o.useEffect)((()=>{F(a,n,d,u,{gameState:m,setGameState:g,showControls:M,setShowControls:C,showScoreboard:E,setShowScoreboard:T,showKeybindDialog:O,setShowKeybindDialog:A})}),[a]),(0,o.useEffect)((()=>{N(i,l,{gameState:m,showControls:M,showScoreboard:E,gameChoice:b})}),[m,b,M,E]),(0,c.jsxs)("div",{id:"arcadeContainer",children:[(0,c.jsx)("div",{id:"arcadeCanvasContainer",ref:y,onContextMenu:e=>((e,t)=>{let a={};if(e.preventDefault(),"keypad"===t)a={Hide:{action:()=>{C(!1)}}};else if("scoreboard"===t)a={Hide:{action:()=>{T(!1)}}};else if("canvas"===t&&"None"!==b){let e="Play"===m?"Pause":"Play";a={"Play/Pause":{action:()=>{g(e)}},"New Game":{action:()=>{g("Restart")}}}}h.setOpen(),h.setPosition(e.clientX,e.clientY),h.setContent(a)})(e,"canvas"),children:"None"===b?(0,c.jsx)("div",{id:"arcadeStartScreen",children:(0,c.jsxs)("select",{id:"gameMenu",onChange:e=>{k(e.target.value),g("Start")},children:[(0,c.jsx)("option",{value:"None",children:"Select Game"}),(0,c.jsx)("option",{value:"Snake",children:"Snake"}),(0,c.jsx)("option",{value:"Breakout",children:"Breakout"}),(0,c.jsx)("option",{value:"Space Invaders",children:"Space Invaders"})]})}):"Snake"===b?(0,c.jsx)(p,{controls:S,updateScoreboard:I,isSelected:t,gameState:m,setGameState:g,canvasZoom:v}):"Breakout"===b?(0,c.jsx)(w,{controls:S,updateScoreboard:I,isSelected:t,gameState:m,setGameState:g,canvasZoom:v}):"Space Invaders"===b?(0,c.jsx)(R,{controls:S,updateScoreboard:I,isSelected:t,gameState:m,setGameState:g,canvasZoom:v}):(0,c.jsx)(c.Fragment,{})}),M&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{id:"arcadeZoomControls",children:[(0,c.jsx)("div",{id:"arcadeZoomInButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{v<2&&B(v+.1)},children:(0,c.jsx)(s.YQo,{})}),(0,c.jsx)("div",{id:"arcadeZoomOutButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{v>.1&&B(v-.1)},children:(0,c.jsx)(s.B1P,{})})]}),(0,c.jsxs)("div",{id:"arcadeStateControls",children:[(0,c.jsx)("div",{id:"arcadeEjectButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{k("None"),g("Start")},children:(0,c.jsx)(s.GZd,{})}),(0,c.jsx)("div",{id:"arcadePlayButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{Y("pause","keydown",!1),setTimeout((()=>Y("pause","keyup",!1)),50)},children:j?(0,c.jsx)(s.i8P,{}):(0,c.jsx)(s.bb6,{})})]}),(0,c.jsxs)("div",{id:"arcadeArrowControls",children:[(0,c.jsx)("div",{id:"arcadeButtonLeft",className:S.left?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("left","keydown",!0),onMouseUp:()=>Y("left","keyup",!0),onTouchStart:e=>K(e,"left"),onTouchMove:e=>K(e,"left"),onTouchEnd:e=>K(e,"left"),onTouchCancel:e=>K(e,"left"),children:(0,c.jsx)(r.QVr,{})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{id:"arcadeButtonUp",className:S.up?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("up","keydown",!0),onMouseUp:()=>Y("up","keyup",!0),onTouchStart:e=>K(e,"up"),onTouchMove:e=>K(e,"up"),onTouchEnd:e=>K(e,"up"),onTouchCancel:e=>K(e,"up"),children:(0,c.jsx)(r.uCC,{})}),(0,c.jsx)("div",{id:"arcadeButtonDown",className:S.down?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("down","keydown",!0),onMouseUp:()=>Y("down","keyup",!0),onTouchStart:e=>K(e,"down"),onTouchMove:e=>K(e,"down"),onTouchEnd:e=>K(e,"down"),onTouchCancel:e=>K(e,"down"),children:(0,c.jsx)(r.$TP,{})})]}),(0,c.jsx)("div",{id:"arcadeButtonRight",className:S.right?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("right","keydown",!0),onMouseUp:()=>Y("right","keyup",!0),onTouchStart:e=>K(e,"right"),onTouchMove:e=>K(e,"right"),onTouchEnd:e=>K(e,"right"),onTouchCancel:e=>K(e,"right"),children:(0,c.jsx)(r.Z0P,{})})]}),(0,c.jsxs)("div",{id:"arcadeFireControls",children:[(0,c.jsx)("div",{id:"arcadeButtonA",className:S.one?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("one","keydown",!0),onMouseUp:()=>Y("one","keyup",!0),onTouchStart:e=>K(e,"one"),onTouchMove:e=>K(e,"one"),onTouchEnd:e=>K(e,"one"),onTouchCancel:e=>K(e,"one"),children:"A"}),(0,c.jsx)("div",{id:"arcadeButtonB",className:S.two?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("two","keydown",!0),onMouseUp:()=>Y("two","keyup",!0),onTouchStart:e=>K(e,"two"),onTouchMove:e=>K(e,"two"),onTouchEnd:e=>K(e,"two"),onTouchCancel:e=>K(e,"two"),children:"B"})]})]}),(0,c.jsx)(D,{showKeybindDialog:O,setShowKeybindDialog:A,setAppDialog:u,keyboard:x,setKeyboard:f})]})}}}]);
//# sourceMappingURL=255.c3344c5e.chunk.js.map