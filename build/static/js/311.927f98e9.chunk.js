"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[311],{5311:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(5043),s=n(579);function a(e,t,n,i,a){switch(e){case"New":!function(e,t,n){const i=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{htmlFor:"New title",children:"Title"}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{id:"New title",type:"text",value:n.settings.newTitle,onChange:t=>{n.setSettings({...n.settings,newTitle:t.target.value}),e("New")}}),(0,s.jsx)("br",{})]}),a={Confirm:()=>{e("New Confirm"),t(null)},Cancel:()=>{t(null),e(!1)}};t({title:"New File",info:i,actions:a})}(t,n,a),t(!1);break;case"New Confirm":a.setSettings({...a.settings,title:a.settings.newTitle}),i(a.settings.newTitle),a.setText(""),n(null),t(!1);break;case"New Cancel":a.setSettings({...a.settings,newTitle:""}),n(null),t(!1);break;case"Open":let l=document.createElement("input");l.setAttribute("type","file"),l.setAttribute("accept",".txt"),l.click(),l.onchange=()=>{let e=new FileReader;e.onload=()=>{a.setText(e.result)},e.readAsText(l.files[0]),a.setSettings({...a.settings,title:l.files[0].name}),i(l.files[0].name.slice(0,l.files[0].name.length-4))},t(!1);break;case"Save":let r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a.text)),r.setAttribute("download",a.settings.title+".txt"),r.click(),t(!1);break;case"Change Title":!function(e,t,n){t({title:"Change Title",info:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{htmlFor:"New title",children:"Title"}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{id:"New title",type:"text",value:n.settings.newTitle,onChange:t=>{n.setSettings({...n.settings,newTitle:t.target.value}),e("Change Title")}}),(0,s.jsx)("br",{})]}),actions:{Confirm:()=>{e("Change Title Confirm")},Cancel:()=>{e("Change Title Cancel")}}})}(t,n,a),t(!1);break;case"Change Title Confirm":a.setSettings({...a.settings,title:a.settings.newTitle}),i(a.settings.newTitle),n(null),t(!1);break;case"Change Title Cancel":a.setSettings({...a.settings,newTitle:""}),n(null),t(!1);break;case"Undo":a.ref.current.focus(),document.execCommand("undo",!1),t(!1);break;case"Redo":a.ref.current.focus(),document.execCommand("redo",!1),t(!1);break;case"Cut":a.ref.current.focus();var o=a.ref.current.value.substring(a.ref.current.selectionStart,a.ref.current.selectionEnd);navigator.clipboard.writeText(o),document.execCommand("delete",!1),t(!1);break;case"Copy":a.ref.current.focus();o=a.ref.current.value.substring(a.ref.current.selectionStart,a.ref.current.selectionEnd);navigator.clipboard.writeText(o),console.log(a.selectedText),t(!1);break;case"Paste":a.ref.current.focus(),navigator.clipboard.readText().then((e=>{console.log(e),document.execCommand("insertText",!1,e)})),t(!1);break;case"Zoom In":a.settings.zoom<a.MAX_ZOOM&&a.setSettings({...a.settings,zoom:2*a.settings.zoom}),t(!1);break;case"Zoom Out":a.settings.zoom>a.MIN_ZOOM&&a.setSettings({...a.settings,zoom:a.settings.zoom/2}),t(!1);break;case"Zoom Reset":1!==a.settings.zoom&&a.setSettings({...a.settings,zoom:1}),t(!1);break;case"System":a.setSettings({...a.settings,theme:{type:e,backgroundColor:"var(--AppBkgrColor)",color:"var(--AppFontColor)"}}),t(!1);break;case"Light":a.setSettings({...a.settings,theme:{type:e,backgroundColor:"white",color:"black"}}),t(!1);break;case"Dark":a.setSettings({...a.settings,theme:{type:e,backgroundColor:"black",color:"white"}}),t(!1);break;case"Text Wrap":a.setSettings({...a.settings,textWrap:"wrap"===a.settings.textWrap?"nowrap":"wrap"}),t(!1);break;case!1:break;default:t(!1)}}function o(e){const t=(0,i.useRef)(null),[n,o]=(0,i.useState)(""),[l,r]=(0,i.useState)({fontSize:"14px",fontFamily:"Arial",textWrap:"nowrap",theme:{type:"System",backgroundColor:"var(--AppBkgrColor)",color:"var(--AppFontColor)"},zoom:1,title:"Untitled",newTitle:"Untitled"}),c=e.action,d=e.setAction,g=e.appMenu,b=e.setAppMenu,m=(e.appDialog,e.setAppDialog),u=(e.contextMenu,e.setContextMenu,e.isSelected,e.title,e.setTitle),p=(e.canClose,e.setCanClose,{ref:t,settings:l,setSettings:r,text:n,setText:o,MAX_ZOOM:4,MIN_ZOOM:.25});return(0,i.useEffect)((()=>{console.log(c),c&&a(c,d,m,u,p)}),[c]),(0,i.useEffect)((()=>{!function(e,t,n){const i={File:{New:{action:"New",keybind:"Alt+N",disabled:""===n.text},Open:{action:"Open",keybind:"Alt+O",disabled:!1},Save:{action:"Save",keybind:"Alt+S",disabled:""===n.text},LineBreak0:{},"Change Title":{action:"Change Title",keybind:"F2",disabled:!1},LineBreak1:{},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},Edit:{Undo:{action:"Undo",keybind:"Ctrl+Z",disabled:!1,keybindDisabled:!0},Redo:{action:"Redo",keybind:"Ctrl+Shift+Z",disabled:!1,keybindDisabled:!0},LineBreak1:{},Cut:{action:"Cut",keybind:"Ctrl+X",disabled:!1,keybindDisabled:!0},Copy:{action:"Copy",keybind:"Ctrl+C",disabled:!1,keybindDisabled:!0},Paste:{action:"Paste",keybind:"Ctrl+V",disabled:!1,keybindDisabled:!0}},View:{"Zoom In":{action:"Zoom In",keybind:"Alt++",disabled:n.settings.zoom>=n.MAX_ZOOM},"Zoom Out":{action:"Zoom Out",keybind:"Alt+-",disabled:n.settings.zoom<=n.MIN_ZOOM},"Zoom Reset":{action:"Zoom Reset",keybind:"Alt+0",disabled:1===n.settings.zoom},LineBreak1:{},"Text Wrap":{action:"Text Wrap",checkbox:"nowrap"!==n.settings.textWrap,disabled:!1}},Theme:{Default:{action:"System",radio:"System"===n.settings.theme.type,name:"theme",disabled:!1},Light:{action:"Light",radio:"Light"===n.settings.theme.type,name:"theme",disabled:!1},Dark:{action:"Dark",radio:"Dark"===n.settings.theme.type,name:"theme",disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",keybind:"F2",disabled:!0,title:"Not Implemented"}}};t(e?{...e,File:{...e.File,New:{...e.File.New,disabled:""===n.text},Save:{...e.File.Save,disabled:""===n.text}},View:{...e.View,"Zoom In":{...e.View["Zoom In"],disabled:n.settings.zoom>=n.MAX_ZOOM},"Zoom Out":{...e.View["Zoom Out"],disabled:n.settings.zoom<=n.MIN_ZOOM},"Zoom Reset":{...e.View["Zoom Reset"],disabled:1===n.settings.zoom},"Text Wrap":{...e.View["Text Wrap"],checkbox:"nowrap"!==n.settings.textWrap}},Theme:{...e.Theme,Default:{...e.Theme.Default,radio:"System"===n.settings.theme.type},Light:{...e.Theme.Light,radio:"Light"===n.settings.theme.type},Dark:{...e.Theme.Dark,radio:"Dark"===n.settings.theme.type}}}:i)}(g,b,p)}),[l,n]),(0,s.jsx)("textarea",{ref:t,onContextMenu:e=>e.stopPropagation(),id:"noteDoc",style:{fontSize:l.fontSize,fontFamily:l.fontFamily,textWrap:l.textWrap,zoom:l.zoom,backgroundColor:l.theme.backgroundColor,color:l.theme.color},value:n,onChange:e=>o(e.target.value)})}}}]);
//# sourceMappingURL=311.927f98e9.chunk.js.map