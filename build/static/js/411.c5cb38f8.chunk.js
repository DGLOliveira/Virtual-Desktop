"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[411],{9411:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var l=o(5043),n=o(579);const a=(0,l.createContext)({name:"",setName:()=>{},history:{},setHistory:()=>{},dimention:{},setDimention:()=>{},tool:"",setTool:()=>{},subTool:{},setSubTool:()=>{},curveControls:{},setCurveControls:()=>{},color:{},setColor:()=>{},size:0,setSize:()=>{},text:{},setText:()=>{},clipboard:{},setClipboard:()=>{},zoom:1,setZoom:()=>{},cursor:{},setCursor:()=>{},view:{},setView:()=>{}});const s=function(e){let{children:t}=e;const[o,s]=(0,l.useState)("Untitled"),[i,r]=(0,l.useState)({history:[],index:0,canUndo:!1,canRedo:!1}),[c,d]=(0,l.useState)({width:350,height:350}),[h,u]=(0,l.useState)("Brush"),[p,x]=(0,l.useState)({shape:"Circle",fill:!1,stretch:!1,sides:4,angle:0,startAngle:0}),[b,m]=(0,l.useState)({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),[g,C]=(0,l.useState)({selected:"hsl(0, 100%, 0%)",1:"hsl(0, 100%, 0%)",2:"hsl(0, 100%, 100%)"}),[v,f]=(0,l.useState)(16),[y,w]=(0,l.useState)({text:"",top:0,left:0,color:"",fontSize:"",fontFamily:"Arial",state:"none"}),[j,M]=(0,l.useState)({data:{},state:"none"}),[k,T]=(0,l.useState)(1),[P,S]=(0,l.useState)({current:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0},down:!1}),[I,N]=(0,l.useState)({toolBar:!0,topNavBar:!0,bottomNavBar:!0,menu:!0}),B={name:o,setName:s,history:i,setHistory:r,dimention:c,setDimention:d,tool:h,setTool:u,subTool:p,setSubTool:x,curveControls:b,setCurveControls:m,color:g,setColor:C,size:v,setSize:f,text:y,setText:w,clipboard:j,setClipboard:M,zoom:k,setZoom:T,cursor:P,setCursor:S,view:I,setView:N};return(0,n.jsx)(a.Provider,{value:B,children:t})},i=(e,t,o,l)=>{let n;n=l?e.getContext("2d",{alpha:!0}):e.getContext("2d",{alpha:!1}),n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1;const a=e.getBoundingClientRect(),s=n.canvas.height,i=n.canvas.width,r=i/a.width,c=s/a.height,d=t.current.x,h=t.current.y,u=t.start.x,p=t.start.y,x=t.end.x,b=t.end.y,m=()=>{n.strokeStyle=o.selectedColor,n.fillStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([]),n.beginPath(),n.arc((d-a.left)*r,(h-a.top)*c,o.size,0,2*Math.PI),l?n.stroke():n.fill(),n.closePath()},g={drawBrush:()=>{n.fillStyle=o.selectedColor,n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([]),n.beginPath(),n.arc((d-a.left)*r,(h-a.top)*c,o.size,0,2*Math.PI),n.stroke(),n.fill(),n.closePath()},drawEraser:m,drawSpray:()=>{let e=Math.random()*o.size,t=Math.random(),l=Math.random()*o.size,s=Math.random();for(;Math.sqrt(Math.pow(e,2)+Math.pow(l,2))>o.size;)e=Math.random()*o.size,l=Math.random()*o.size;s>.5&&(l*=-1),t>.5&&(e*=-1),n.fillStyle=o.selectedColor,n.fillRect((d-a.left)*r+e,(h-a.top)*c+l,1,1)},drawBucket:()=>{let e,t,l,u,p,x,b=[];for(let I=0;I<o.selectedColor.length;I++){var m,g;"("===o.selectedColor[I]?m=I+1:")"===o.selectedColor[I]?(g=I,b.push(o.selectedColor.slice(m,g))):","===o.selectedColor[I]&&(b.push(o.selectedColor.slice(m,I)),m=I+1)}if(u=b[0]/360,p=b[1].slice(0,-1)/100,x=b[2].slice(0,-1)/100,0===p)e=255*x,t=255*x,l=255*x;else{let N,B,R,A,z;function D(e){return e<0?e+1:e>1?e-1:e}function F(e,t,o){return 6*o<1?t+6*(e-t)*o:2*o<1?e:3*o<2?t+(e-t)*(2/3-o)*6:t}N=x<.5?x*(1+p):x+p-x*p,B=2*x-N,R=D(u+1/3),A=D(u),z=D(u-1/3),e=Math.round(255*F(N,B,R)),t=Math.round(255*F(N,B,A)),l=Math.round(255*F(N,B,z))}function C(e){var t=Number(e).toString(16);return 1==t.length?"0"+t:t}let v="#"+C(e)+C(t)+C(l),f=[],y=parseInt("FF"+v.slice(5,7)+v.slice(3,5)+v.slice(1,3),16);const w=n.getImageData(0,0,i,s),j={width:w.width,height:w.height,data:new Uint32Array(w.data.buffer)};function M(e,t){return e<0||e<0||e>=j.width||e>=j.height?-1:j.data[t*w.width+e]}let k=M((d-a.left)*r,(h-a.top)*c);const T=(e,t,o,l)=>{f.push({left:e,right:t,line:o,direction:l})},P=(e,t,o,l)=>{let n,a,s=!1;for(a=e;a<t;++a){M(a,o)===k?s||(s=!0,n=a):s&&(s=!1,T(n,a-1,o,l))}s&&(s=!1,T(n,t-1,o,l))};T((d-a.left)*r,(d-a.left)*r,(h-a.top)*c,0);let S=0;for(;f.length>0&&S<1e4;){S++;const{left:Z,right:E,line:U,direction:L}=f.pop();let H=Z;for(;;){H--;if(M(H,U)!==k)break}++H;let X=E;for(;;){++X;if(M(X,U)!==k)break}const O=U*i;j.data.fill(y,O+H,O+X),L<=0?P(H,X,U-1,-1):(P(H,Z,U-1,-1),P(E,X,U-1,-1)),L>=0?P(H,X,U+1,1):(P(H,Z,U+1,1),P(E,X,U+1,1))}n.putImageData(w,0,0)},drawText:()=>{n.fillStyle=o.selectedColor,n.font=String(o.size+"px "+o.text.fontFamily),n.fillText(o.text.text,(x-a.left)*r,(b-a.top)*c)},drawPipette:()=>{let e=n.getImageData((d-a.left)*r,(h-a.top)*c,1,1),t=e.data[0],l=e.data[1],s=e.data[2];t/=255,l/=255,s/=255;let i=Math.min(t,l,s),u=Math.max(t,l,s),p=u-i,x=0,b=0,m=(u+i)/2;0===p?(b=0,x=0):(b=m<=.5?p/(u+i):p/(2-u-i),u===t?x=(l-s)/p:u===l?x=(s-t)/p+2:u===s&&(x=(t-l)/p+4)),x=Math.round(60*x),x<0&&(x+=360),b=Math.abs(100*b).toFixed(0),m=(100*m).toFixed(0);let g="hsl("+x+","+b+"%,"+m+"%)";if("Pipette"!==o.tool)return g;o.selectedColor===o.color1?o.setColor1(g):o.setColor2(g)},drawSelect:()=>{switch(o.clipboard.state){case"copy":if(!l&&x-u!==0&&b-p!==0){let e=n.getImageData((u-a.left)*r,(p-a.top)*c,x-u,b-p);o.setClipboard({data:e,state:"carry"})}break;case"cut":if(!l&&x-u!==0&&b-p!==0){let e=n.getImageData((u-a.left)*r,(p-a.top)*c,x-u,b-p);o.setClipboard({data:e,state:"carry"}),o.selectedColor===o.color1?n.fillStyle=o.color2:n.fillStyle=o.color1,n.fillRect((u-a.left)*r,(p-a.top)*c,x-u,b-p)}break;case"carry":n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),t.down?(n.putImageData(o.clipboard.data,(d-a.left)*r,(h-a.top)*c),n.strokeRect((d-a.left)*r,(h-a.top)*c,o.clipboard.data.width,o.clipboard.data.height)):(n.putImageData(o.clipboard.data,(x-a.left)*r,(b-a.top)*c),n.strokeRect((x-a.left)*r,(b-a.top)*c,o.clipboard.data.width,o.clipboard.data.height));break;case"paste":l||(n.putImageData(o.clipboard.data,(x-a.left)*r,(b-a.top)*c),o.setClipboard({...o.clipboard,state:"none"}));break;default:n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.strokeRect((u-a.left)*r,(p-a.top)*c,x-u,b-p)}},drawShape:()=>{n.strokeStyle=o.color1,n.fillStyle=o.color2,n.setLineDash([]),n.lineWidth=o.size;let e,t=(x-u)/2,s=(b-p)/2;e=Math.sqrt(Math.pow(x-u,2))/2<Math.sqrt(Math.pow(b-p,2))/2?Math.sqrt(Math.pow(x-u,2))/2:Math.sqrt(Math.pow(b-p,2))/2;let i=Math.sqrt(Math.pow((x-u)/(b-p),2)),d=Math.sqrt(Math.pow((b-p)/(x-u),2));o.subTool.stretch?i>d?d=1:i=1:(i=1,d=1),"Curve"!==o.subTool.shape&&"Line"!==o.subTool.shape&&(n.save(),n.translate((u+t-a.left)*r,(p+s-a.top)*c),n.rotate(Math.PI*o.subTool.angle/180)),"Rectangle"===o.subTool.shape?g["draw"+o.subTool.shape](t,s):g["draw"+o.subTool.shape](i,d,e),"Line"!==o.subTool.shape&&"Curve"!==o.subTool.shape&&(n.restore(),l&&(n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.strokeRect((u-a.left)*r,(p-a.top)*c,x-u,b-p),((e,t,l)=>{n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.beginPath(),n.arc((u+e-a.left)*r,(p+t-a.top)*c,l,0,2*Math.PI),n.stroke(),n.closePath()})(t,s,e),o.subTool.stretch&&((e,t,l,s,i)=>{n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.beginPath(),n.ellipse((u+e-a.left)*r,(p+t-a.top)*c,l*i,s*i,Math.PI/180*o.subTool.angle,0,2*Math.PI),n.stroke(),n.closePath()})(t,s,i,d,e)))},drawLine:()=>{n.beginPath(),n.moveTo((u-a.left)*r,(p-a.top)*c),n.lineTo((x-a.left)*r,(b-a.top)*c),n.stroke()},drawCurve:()=>{let e={x:0,y:0},t={x:0,y:0},l={x:0,y:0},s={x:0,y:0};n.beginPath(),-1===o.curveControls.start.x?(e={x:u,y:p},t={x:x,y:b},l={x:u,y:p},s={x:x,y:b}):-1===o.curveControls.controlPoint1.x?(e=o.curveControls.start,t=o.curveControls.end,l={x:x,y:b},s=o.curveControls.end):-1===o.curveControls.controlPoint2.x?(e=o.curveControls.start,t=o.curveControls.end,l=o.curveControls.controlPoint1,s={x:x,y:b}):(e=o.curveControls.start,t=o.curveControls.end,l=o.curveControls.controlPoint1,s=o.curveControls.controlPoint2),n.moveTo((e.x-a.left)*r,(e.y-a.top)*c),n.bezierCurveTo((l.x-a.left)*r,(l.y-a.top)*c,(s.x-a.left)*r,(s.y-a.top)*c,(t.x-a.left)*r,(t.y-a.top)*c),n.stroke()},drawCircle:(e,t,l)=>{n.beginPath(),n.ellipse(0,0,e*l,t*l,0,0,2*Math.PI),o.subTool.fill&&n.fill(),n.stroke()},drawRectangle:(e,t)=>{o.subTool.fill&&n.fillRect(-e,-t,x-u,b-p),n.strokeRect(-e,-t,x-u,b-p)},drawPolygon:(e,t,l)=>{n.beginPath();for(let a=0;a<o.subTool.sides+2;a++)n.lineTo(e*l*Math.cos(2*Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l*Math.sin(2*Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&n.fill(),n.stroke()},drawStar:(e,t,l)=>{n.beginPath();for(let a=0;a<2*o.subTool.sides+2;a++)a%2===0?n.lineTo(e*l*Math.cos(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l*Math.sin(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle)):n.lineTo(e*l/3*Math.cos(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l/3*Math.sin(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&n.fill(),n.stroke()},drawArrow:(e,t,l)=>{n.beginPath(),n.moveTo(e*-l*Math.cos(Math.PI/8),t*-l*Math.sin(Math.PI/8)),n.lineTo(0,t*-l*Math.sin(Math.PI/8)),n.lineTo(0,t*-l),n.lineTo(e*l,0),n.lineTo(0,t*l),n.lineTo(0,t*l*Math.sin(Math.PI/8)),n.lineTo(e*-l*Math.cos(Math.PI/8),t*l*Math.sin(Math.PI/8)),n.closePath(),o.subTool.fill&&n.fill(),n.stroke()},drawHeart:(e,t,l)=>{o.subTool.stretch&&(e>t?n.scale(e,1):n.scale(1,t)),n.beginPath(),n.moveTo(0,l),n.arc(-l/2,-l/5,l/2,3*Math.PI/4,0,!1),n.arc(l/2,-l/5,l/2,Math.PI,Math.PI/4,!1),n.closePath(),o.subTool.fill&&n.fill(),n.stroke()}};if(l){if(n.clearRect(0,0,i,s),"Magnifier"!==o.tool){if("Bucket"===o.tool||"Pipette"===o.tool)return;"Spray"===o.tool?m():g["draw"+o.tool]()}}else"Magnifier"!==o.tool&&g["draw"+o.tool]()},r=(e,t,o,l,n,a)=>{switch(l.tool){case"Brush":case"Eraser":i(e,t,l,!1),"drawing"!==n&&a("drawing");break;case"Bucket":i(e,t,l,!1),a("finished");break;case"Spray":for(let o=0;o<10;o++)i(e,t,l,!1);a("drawing");break;case"Text":if(0!==t.current.x&&0!==t.current.y){const o=e.getBoundingClientRect();l.setText({...l.text,left:t.start.x-o.x,top:t.start.y-o.y,color:l.selectedColor,size:l.size+"px",state:"preview"})}"confirm"===n&&(i(e,t,l,!1),l.setText({...l.text,text:"",state:"none"}),a("finished"));break;case"Pipette":i(e,t,l,!1);break;case"Magnifier":default:break;case"Select":"clipping"===n&&"carry"!==l.clipboard.state?i(e,t,l,!1):"confirm"===n&&(i(e,t,l,!1),a("finished"));break;case"Shape":if("Curve"===l.subTool.shape&&t.down){let e=l.curveControls.state,o=l.curveControls.start,s=l.curveControls.end,i=l.curveControls.controlPoint1,r=l.curveControls.controlPoint2;"none"===l.curveControls.state?(a("settingPoints"),e="start",o={x:t.start.x,y:t.start.y},s={x:t.end.x,y:t.end.y}):"start"===l.curveControls.state?"settingPoints"===n?s={x:t.end.x,y:t.end.y}:(a("settingPoints"),e="point1",i={x:t.end.x,y:t.end.y}):"point1"===l.curveControls.state?"settingPoints"===n?i={x:t.end.x,y:t.end.y}:(a("settingPoints"),e="point2",r={x:t.end.x,y:t.end.y}):"point2"===l.curveControls.state&&(r={x:t.end.x,y:t.end.y}),l.setCurveControls({...l.curveControls,state:e,start:o,end:s,controlPoint1:i,controlPoint2:r})}else"Curve"===l.subTool.shape&&"cancel"===n&&l.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}});"confirm"===n&&(i(e,t,l,!1),"Curve"===l.subTool.shape&&l.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),a("finished"),o({...t,start:{x:0,y:0},end:{x:0,y:0}}))}},c=(e,t,o,l)=>{if(null===e)t({File:{New:{action:"New",keybind:"Alt+N",disabled:!1},Open:{action:"Open",keybind:"Alt+O",disabled:!0,title:"Not Implemented"},Save:{action:"Save",keybind:"Ctrl+Alt+S",disabled:!0},"Save As":{action:"Save As",keybind:"Ctrl+Alt+Shift+S",disabled:!0,title:"Not Implemented"},"Change Name":{action:"Change Name",keybind:"F2",disabled:!1},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},Edit:{Undo:{action:"Undo",keybind:"Ctrl+Z",disabled:!1},Redo:{action:"Redo",keybind:"Ctrl+Y",disabled:!1},LineBreak1:{},Cut:{action:"Cut",keybind:"Ctrl+X",disabled:!0,title:"Not Implemented"},Copy:{action:"Copy",keybind:"Ctrl+C",disabled:!0,title:"Not Implemented"},Paste:{action:"Paste",keybind:"Ctrl+V",disabled:!0,title:"Not Implemented"},LineBreak2:{},"Select All":{action:"SelectAll",keybind:"Ctrl+A",disabled:!0,title:"Not Implemented"},Clear:{action:"SelectClear",keybind:"Ctrl+Shift+C",disabled:!0,title:"Not Implemented"}},View:{"Zoom In":{action:"Zoom In",keybind:"Alt++",disabled:!1},"Zoom Out":{action:"Zoom Out",keybind:"Alt+-",disabled:!1},"Zoom Reset":{action:"Zoom Reset",keybind:"Alt+0",disabled:!0},LineBreak1:{},"Tool Bar":{action:"toolBar",checkbox:!0,disabled:!1},"Bottom Bar":{action:"bottomNavBar",checkbox:!0,disabled:!1},"Top Bar":{action:"topNavBar",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{let n={...e};switch(l){case"history":let e=o.history.canUndo||o.history.canRedo;n={...n,File:{...n.File,Save:{...n.File.Save,disabled:!e},"Save As":{...n.File["Save As"],disabled:!e}},Edit:{...n.Edit,Undo:{...n.Edit.Undo,disabled:!o.history.canUndo},Redo:{...n.Edit.Redo,disabled:!o.history.canRedo}}};break;case"view":n={...n,View:{...n.View,"Tool Bar":{...n.View["Tool Bar"],checkbox:o.view.toolBar},"Bottom Bar":{...n.View["Bottom Bar"],checkbox:o.view.bottomNavBar},"Top Bar":{...n.View["Top Bar"],checkbox:o.view.topNavBar}}};break;case"zoom":n={...n,View:{...n.View,"Zoom In":{...n.View["Zoom In"],disabled:4===o.zoom},"Zoom Out":{...n.View["Zoom Out"],disabled:.25===o.zoom},"Zoom Reset":{...n.View["Zoom Reset"],disabled:1===o.zoom}}}}t(n)}},d=(e,t,o,l,n,a,s)=>{let i={},r={};const d=e.canvas.height,h=e.canvas.width,u=t.history,p=t.index;switch(l){case"undo":(()=>{if(u.length>0&&p>0){let l=!0;p-1===0&&(l=!1),e.putImageData(u[p-1],0,0),i={...t,index:p-1,canUndo:l,canRedo:!0},s(l),o(i),c(n,a,r={history:{...i}},"history")}})();break;case"redo":(()=>{let l=!0;p+1===u.length-1&&(l=!1),p<u.length-1&&(e.putImageData(u[p+1],0,0),i={...t,index:p+1,canUndo:!0,canRedo:l},o(i),s(!1),c(n,a,r={history:{...i}},"history"))})();break;case"save":u.length<50&&p===u.length?(i={history:[...u,e.getImageData(0,0,h,d)],index:p+1,canUndo:!0,canRedo:!1},o(i),c(n,a,r={history:{...i}},"history")):50===u.length&&p===u.length?(i={history:[...u.slice(1),e.getImageData(0,0,h,d)],index:p,canUndo:!0,canRedo:!1},o(i),c(n,a,r={history:{...i}},"history")):p<u.length&&(i={history:[...u.slice(0,p+1),e.getImageData(0,0,h,d)],index:p+1,canUndo:!0,canRedo:!1},o(i),c(n,a,r={history:{...i}},"history")),s(!1);break;case"clear":i={history:[e.getImageData(0,0,h,d)],index:0,canUndo:!1,canRedo:!1},o(i),s(!0),c(n,a,r={history:{...i}},"history")}},h=(e,t,o)=>{const l=e.canvas.height,n=e.canvas.width;switch(o){case"new":(e=>{e.fillStyle="#FFFFFF",e.fillRect(0,0,n,l)})(e);break;case"save":(e=>{let o=document.createElement("a");o.setAttribute("download",t+".png");let l=e.canvas.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");o.setAttribute("href",l),o.click()})(e)}},u=(e,t,o,l,a,s,i,u,p,x,b,m,g)=>{let C={};switch(l){case"Startup":h(t,s.name,"new"),d(t,s.history,s.setHistory,"clear",i,u,g),a(!1);break;case"New":((e,t,o)=>{const l=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("New")}}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"Width",children:"Width"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"Width",type:"number",value:e.dimention.width,onChange:o=>{e.setDimention({...e.dimention,width:o.target.value}),t("New")}}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"Height",children:"Height"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"Height",type:"number",value:e.dimention.height,onChange:o=>{e.setDimention({...e.dimention,height:o.target.value}),t("New")}}),(0,n.jsx)("br",{})]}),a={Confirm:()=>{t("New Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"New File",info:l,actions:a})})(s,a,x),a(!1);break;case"New Confirm":x(null),h(t,s.name,"new"),d(t,s.history,s.setHistory,"clear",i,u,g),a(!1);break;case"Save":h(t,s.name,"save"),a(!1);break;case"Save As":break;case"Change Name":((e,t,o)=>{const l=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("Change Name")}}),(0,n.jsx)("br",{})]}),a={Confirm:()=>{t("Change Name Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"Change Name",info:l,actions:a})})(s,a,x),a(!1);break;case"Change Name Confirm":x(null),a(!1);break;case"Undo":d(t,s.history,s.setHistory,"undo",i,u,g),a(!1);break;case"Redo":d(t,s.history,s.setHistory,"redo",i,u,g),a(!1);break;case"Zoom In":s.zoom<4&&(s.zoom<1?(s.setZoom(s.zoom+.25),C={zoom:s.zoom+.25}):(s.setZoom(s.zoom+1),C={zoom:s.zoom+1}),c(i,u,C,"zoom")),a(!1);break;case"Zoom Out":s.zoom>.25&&(s.zoom<=1?(s.setZoom(s.zoom-.25),C={zoom:s.zoom-.25}):(s.setZoom(s.zoom-1),C={zoom:s.zoom-1}),c(i,u,C,"zoom")),a(!1);break;case"Zoom Reset":s.setZoom(1),C={zoom:1},c(i,u,C,"zoom"),a(!1);break;case"Zoom Min":C={zoom:.25},c(i,u,C,"zoom"),a(!1);break;case"Zoom Max":C={zoom:4},c(i,u,C,"zoom"),a(!1);break;case"Zoom Default":C={zoom:1},c(i,u,C,"zoom"),a(!1);break;case"Zoom Change":C={zoom:2},c(i,u,C,"zoom"),a(!1);break;case"Cut":case"Copy":case"Paste":case"Select All":case"Select Clear":a(!1);break;case"finished":d(t,s.history,s.setHistory,"save",i,u,g),a(!1);break;case"drawing":s.cursor.down?r(e,s.cursor,s.setCursor,o,l,a):a("finished");break;case"settingPoints":s.cursor.down?r(e,s.cursor,s.setCursor,o,l,a):a(!1);break;case"cancel":case"clipping":case"confirm":r(e,s.cursor,s.setCursor,o,l,a);break;case!1:s.cursor.down&&r(e,s.cursor,s.setCursor,o,l,a);break;case"topNavBar":s.setView({...s.view,topNavBar:!s.view.topNavBar}),C={view:{...s.view,topNavBar:!s.view.topNavBar}},c(i,u,C,"view"),a(!1);break;case"bottomNavBar":s.setView({...s.view,bottomNavBar:!s.view.bottomNavBar}),C={view:{...s.view,bottomNavBar:!s.view.bottomNavBar}},c(i,u,C,"view"),a(!1);break;case"toolBar":s.setView({...s.view,toolBar:!s.view.toolBar}),C={view:{...s.view,toolBar:!s.view.toolBar}},c(i,u,C,"view"),a(!1);break;case"Close":m||x({title:"Warning",info:"Do you want to download the file before closing?",actions:{Save:()=>{h(t,s.name,"save"),g(!0),x(null)},Close:()=>{g(!0),x(null)},Cancel:()=>{x(null),a(!1)}}});break;default:a(!1)}},p=e=>{let{action:t,setAction:o,appMenu:s,setAppMenu:i,appDialog:r,setAppDialog:c,contextMenu:d,canClose:h,setCanClose:p}=e;const x=(0,l.useRef)(null),b=(0,l.useContext)(a),m={tool:b.tool,subTool:b.subTool,curveControls:b.curveControls,setCurveControls:b.setCurveControls,size:b.size,selectedColor:b.color.selected,color1:b.color[1],setColor1:e=>b.setColor({...b.color,1:e,selected:e}),color2:b.color[2],setColor2:e=>b.setColor({...b.color,2:e,selected:e}),text:b.text,setText:b.setText,clipboard:b.clipboard,setClipboard:b.setClipboard};return(0,l.useEffect)((()=>{let e=x.current,l=e.getContext("2d",{willReadFrequently:!0});u(e,l,m,t,o,b,s,i,0,c,0,h,p)}),[b.cursor,t]),(0,l.useEffect)((()=>{let e=-1*(b.dimention.width/2-b.zoom*b.dimention.width/2)/b.zoom,t=-1*(b.dimention.height/2-b.zoom*b.dimention.height/2)/b.zoom;document.getElementById("previewCanvas").style.transform="scale(".concat(b.zoom,") translate(").concat(e,"px,").concat(t,"px)"),document.getElementById("drawCanvas").style.transform="scale(".concat(b.zoom,") translate(").concat(e,"px,").concat(t,"px)")}),[b.zoom]),(0,n.jsx)("canvas",{ref:x,id:"drawCanvas",height:b.dimention.height,width:b.dimention.width})},x=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,l.useContext)(a),r=(0,l.useRef)(null),c=s.cursor,d=s.setCursor,h={tool:s.tool,subTool:s.subTool,curveControls:s.curveControls,setCurveControls:s.setCurveControls,size:s.size,selectedColor:s.color.selected,color1:s.color[1],setColor1:e=>s.setColor({...s.color,1:e}),color2:s.color[2],setColor2:e=>s.setColor({...s.color,2:e}),text:s.text,setText:s.setText,clipboard:s.clipboard,setClipboard:s.setClipboard},u=e=>{if(0===e.button)switch(e.type){case"touchstart":case"mousedown":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!0,start:{x:e.clientX,y:e.clientY}});break;case"touchend":case"mouseup":d({...c,end:{x:e.clientX,y:e.clientY},down:!1});break;case"touchmove":case"mousemove":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,current:{x:e.clientX,y:e.clientY}});break;case"touchleave":case"mouseleave":d({...c,current:{x:0,y:0}});break;case"mouseenter":0!==e.buttons?d({...c,down:!0,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!1,current:{x:e.clientX,y:e.clientY}})}};(0,l.useEffect)((()=>{i(r.current,c,h,!0)}),[c,h]);return(0,n.jsx)("canvas",{ref:r,style:{color:h.selectedColor},className:"cursor"+h.tool,id:"previewCanvas",height:s.dimention.height,width:s.dimention.width,onMouseDown:e=>u(e),onMouseUp:e=>u(e),onMouseMove:e=>u(e),onMouseLeave:e=>u(e),onMouseEnter:e=>u(e),onContextMenu:e=>(e=>{e.preventDefault();let l={Undo:{action:()=>t("Undo"),disabled:!s.history.canUndo},Redo:{action:()=>t("Redo"),disabled:!s.history.canRedo},LineBreak:{},"Zoom In":{action:()=>t("Zoom In"),disabled:4===s.zoom},"Zoom Out":{action:()=>t("Zoom Out"),disabled:.25===s.zoom},"Zoom Reset":{action:()=>t("Zoom Reset"),disabled:1===s.zoom}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e)})};var b=o(9804),m=o(7980),g=o(4273);const C=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,l.useContext)(a);if(s.view.topNavBar)return(0,n.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let l={Hide:{action:()=>t("topNavBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e),children:[(0,n.jsx)("button",{onClick:()=>t("Undo"),disabled:!s.history.canUndo,children:(0,n.jsx)(b.qHd,{title:"Undo"})}),(0,n.jsx)("button",{onClick:()=>t("Redo"),disabled:!s.history.canRedo,children:(0,n.jsx)(b.qQW,{title:"Redo"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{onClick:()=>t("New"),children:(0,n.jsx)(m.QB2,{title:"New File"})}),(0,n.jsx)("button",{onClick:()=>t("Save"),disabled:!(s.history.canRedo||s.history.canUndo),children:(0,n.jsx)(m.RZ0,{title:"Save File"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("button",{className:s.color.selected===s.color[1]?"buttonActive":"",onClick:()=>s.setColor({...s.color,selected:s.color[1]}),children:(0,n.jsx)("label",{htmlFor:"drawColor1",onClick:e=>e.preventDefault(),children:"1"})}),(0,n.jsx)(g.A,{color:s.color[1],setColor:e=>{s.setColor({...s.color,selected:e,1:e})},useAlpha:!1})]}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("button",{className:s.color.selected===s.color[2]?"buttonActive":"",onClick:()=>s.setColor({...s.color,selected:s.color[2]}),children:(0,n.jsx)("label",{htmlFor:"drawColor2",onClick:e=>e.preventDefault(),children:"2"})}),(0,n.jsx)(g.A,{color:s.color[2],setColor:e=>s.setColor({...s.color,selected:e,2:e}),useAlpha:!1})]}),(0,n.jsx)("vertical-rect",{}),"Magnifier"===s.tool&&(0,n.jsxs)("select",{value:s.zoom,onChange:e=>{(e=>{s.setZoom(Number(e.target.value)),"0.25"===e.target.value?t("Zoom Min"):"4"===e.target.value?t("Zoom Max"):"1"===e.target.value?t("Zoom Default"):t("Zoom Change")})(e)},title:"Zoom",children:[(0,n.jsx)("option",{value:.25,children:"25%"}),(0,n.jsx)("option",{value:.5,children:"50%"}),(0,n.jsx)("option",{value:.75,children:"75%"}),(0,n.jsx)("option",{value:1,children:"100%"}),(0,n.jsx)("option",{value:2,children:"200%"}),(0,n.jsx)("option",{value:3,children:"300%"}),(0,n.jsx)("option",{value:4,children:"400%"})]}),"Select"!==s.tool&&"Pipette"!==s.tool&&"Magnifier"!==s.tool&&(0,n.jsxs)("select",{value:s.size,onChange:e=>{s.setSize(e.target.value)},title:"Text"===s.tool?"Font Size":"Shape"===s.tool?"Line Width":"Radius",children:[(0,n.jsx)("option",{value:1,children:"1px"}),(0,n.jsx)("option",{value:2,children:"2px"}),(0,n.jsx)("option",{value:4,children:"4px"}),(0,n.jsx)("option",{value:8,children:"8px"}),(0,n.jsx)("option",{value:16,children:"16px"}),(0,n.jsx)("option",{value:32,children:"32px"})]}),"Text"===s.tool&&(0,n.jsxs)("select",{title:"Font Family",value:s.text.fontFamily,onChange:e=>s.setText({...s.text,fontFamily:e.target.value}),children:[(0,n.jsx)("option",{children:"Arial"}),(0,n.jsx)("option",{children:"Times New Roman"}),(0,n.jsx)("option",{children:"Monospace"}),(0,n.jsx)("option",{children:"Verdana"}),(0,n.jsx)("option",{children:"Georgia"}),(0,n.jsx)("option",{children:"Courier New"}),(0,n.jsx)("option",{children:"Tahoma"}),(0,n.jsx)("option",{children:"Garamond"}),(0,n.jsx)("option",{children:"Impact"}),(0,n.jsx)("option",{children:"Comic Sans MS"}),(0,n.jsx)("option",{children:"Lucida Console"}),(0,n.jsx)("option",{children:"Lucida Sans Unicode"}),(0,n.jsx)("option",{children:"Palatino Linotype"}),(0,n.jsx)("option",{children:"Symbol"}),(0,n.jsx)("option",{children:"Wingdings"}),(0,n.jsx)("option",{children:"Helvetica"})]}),"Shape"===s.tool&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("select",{title:"Shape",value:s.subTool.shape,onChange:e=>s.setSubTool({...s.subTool,shape:e.target.value}),children:[(0,n.jsx)("option",{children:"Line"}),(0,n.jsx)("option",{children:"Curve"}),(0,n.jsx)("option",{children:"Circle"}),(0,n.jsx)("option",{children:"Rectangle"}),(0,n.jsx)("option",{children:"Polygon"}),(0,n.jsx)("option",{children:"Star"}),(0,n.jsx)("option",{children:"Arrow"}),(0,n.jsx)("option",{children:"Heart"})]}),("Polygon"===s.subTool.shape||"Star"===s.subTool.shape)&&(0,n.jsx)("input",{type:"number",title:"Sides",value:s.subTool.sides,onChange:e=>s.setSubTool({...s.subTool,sides:e.target.value}),min:"3",step:"1"})]})]})},v=e=>{let{subtool:t}=e,o=(0,l.useRef)(null);const a={drawCircleIcon:(e,o,l)=>{e.beginPath(),e.arc(o/2,l/2,l/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath()},drawEllipseIcon:(e,o,l)=>{e.scale(1,.5),e.beginPath(),e.beginPath(),e.arc(o/2,l,l/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath(),e.scale(1,2)},drawRectangleIcon:(e,o,l)=>{t.fill&&e.fillRect(0,l/4,o,l/2),e.strokeRect(0,l/4,o,l/2)},drawPolygonIcon:(e,o,l)=>{e.beginPath();for(let n=0;n<t.sides;n++)e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*n/t.sides-Math.PI/2),l/2+(l/2-3)*Math.sin(2*Math.PI*n/t.sides-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawLineIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/4,2),e.lineTo(3*t/4,o-2),e.closePath(),e.stroke()},drawCurveIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/6,2),e.bezierCurveTo(5*t/6,o/5,t/6,4*o/5-2,5*t/6,o-2),e.stroke()},drawStarIcon:(e,o,l)=>{e.beginPath(),e.moveTo(o/2,3);for(let n=0;n<2*t.sides;n++)n%2===0?e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*n/(2*t.sides)-Math.PI/2),l/2+(l/2-3)*Math.sin(2*Math.PI*n/(2*t.sides)-Math.PI/2)):e.lineTo(o/2+(o/4-3)*Math.cos(2*Math.PI*n/(2*t.sides)-Math.PI/2),l/2+(l/4-3)*Math.sin(2*Math.PI*n/(2*t.sides)-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawArrowIcon:(e,o,l)=>{e.beginPath(),e.moveTo(2,l/3),e.lineTo(o/2,l/3),e.lineTo(o/2,2),e.lineTo(o-2,l/2),e.lineTo(o/2,l-2),e.lineTo(o/2,2*l/3),e.lineTo(2,2*l/3),e.closePath(),e.stroke(),t.fill&&e.fill()},drawHeartIcon:(e,o,l)=>{e.beginPath(),e.moveTo(o/2,l-3),e.arc(o/4+1,l/3,o/4-1,3*Math.PI/4,0,!1),e.arc(3*o/4-1,l/3,o/4-1,Math.PI,Math.PI/4,!1),e.closePath(),e.stroke(),t.fill&&e.fill()}};return(0,l.useEffect)((()=>{const e=o.current.getContext("2d"),l=e.canvas.height,n=e.canvas.width;e.clearRect(0,0,n,l),e.fillStyle="lightgray",e.strokeStyle="white",e.lineWidth=2,a["draw"+t.shape+"Icon"](e,n,l)}),[t]),(0,n.jsx)("canvas",{ref:o,id:"shapeCanvas",width:"25",height:"25",title:"Custom Shape"})};var f=o(2639),y=o(8973),w=o(2021),j=o(7962),M=o(9698);const k=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,l.useContext)(a),i=s.tool,r=s.subTool,c=s.setTool,d={Brush:(0,n.jsx)(f.Nw5,{title:"Brush"}),Eraser:(0,n.jsx)(m.qpr,{title:"Eraser"}),Bucket:(0,n.jsx)(m.ATI,{title:"Bucket"}),Spray:(0,n.jsx)(m.bOX,{title:"Spray Can"}),Text:(0,n.jsx)(w.tEi,{title:"Insert Text"}),Pipette:(0,n.jsx)(y._e3,{title:"Color Picker"}),Magnifier:(0,n.jsx)(j.JJh,{title:"Zoom"}),Select:(0,n.jsx)(M.ZdE,{title:"Selection"}),Shape:(0,n.jsx)(v,{subtool:r})};if(s.view.toolBar)return(0,n.jsx)("tool-bar",{onContextMenu:e=>(e=>{e.preventDefault();let l={Hide:{action:()=>t("toolBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e),children:Object.keys(d).map((e=>(0,n.jsx)("button",{onClick:()=>c(e),className:i===e?"buttonActive":"",children:d[e]},e+"drawToolDropdown")))})},T=e=>{let{action:t,setAction:o,contextMenu:s}=e;const i=(0,l.useContext)(a);if(i.view.bottomNavBar)return(0,n.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let t={Hide:{action:()=>o("bottomNavBar")}};s.setOpen(),s.setPosition(e.clientX,e.clientY),s.setContent(t)})(e),children:["Text"===i.tool&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Confirm Text",onClick:()=>o("confirm"),children:(0,n.jsx)("small",{children:"Confirm"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("input",{type:"text",title:"Text Input",value:i.text.text,onChange:e=>i.setText({...i.text,text:e.target.value})})]}),"Select"===i.tool?(0,n.jsx)(n.Fragment,{children:"clipping"===t&&"carry"===i.clipboard.state?(0,n.jsx)("button",{title:"Paste",onClick:()=>{o("confirm"),i.setClipboard({...i.clipboard,state:"paste"})},children:(0,n.jsx)("small",{children:"Paste"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Cut",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"cut"})},children:(0,n.jsx)("small",{children:"Cut"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{title:"Copy",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"copy"})},children:(0,n.jsx)("small",{children:"Copy"})})]})}):null,"Shape"===i.tool?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Confirm Shape",onClick:()=>o("confirm"),children:(0,n.jsx)("small",{children:"Confirm"})}),(0,n.jsx)("vertical-rect",{}),"Curve"===i.subTool.shape&&(0,n.jsx)("button",{title:"Cancel Shape",onClick:()=>o("cancel"),children:(0,n.jsx)("small",{children:"Cancel"})}),"Line"!==i.subTool.shape&&"Curve"!==i.subTool.shape?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Fill",className:i.subTool.fill?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,fill:!i.subTool.fill}),children:(0,n.jsx)("small",{children:"Fill"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{title:"Stretch",className:i.subTool.stretch?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,stretch:!i.subTool.stretch}),children:(0,n.jsx)("small",{children:"Stretch"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("button",{children:[(0,n.jsx)("label",{htmlFor:"rotationAngle",children:"Rotation"}),(0,n.jsx)("input",{type:"number",title:"Rotation Angle",id:"rotationAngle",value:i.subTool.angle,onChange:e=>i.setSubTool({...i.subTool,angle:e.target.value}),step:"1"})]}),(0,n.jsx)("vertical-rect",{}),"Polygon"===i.subTool.shape||"Star"===i.subTool.shape?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{children:[(0,n.jsx)("label",{htmlFor:"startAngle",children:"Start Angle"}),(0,n.jsx)("input",{type:"number",title:"Start Angle",id:"startAngle",value:i.subTool.startAngle,onChange:e=>i.setSubTool({...i.subTool,startAngle:e.target.value}),step:"1"})]}),(0,n.jsx)("vertical-rect",{})]}):null]}):null]}):null]})};function P(e){let{isSelected:t,action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}=e;(0,l.useContext)(a);return(0,n.jsx)(s,{children:(0,n.jsxs)("app-container",{children:[(0,n.jsx)(C,{setAction:i,contextMenu:u}),(0,n.jsxs)("app-body",{children:[(0,n.jsx)(k,{setAction:i,contextMenu:u}),(0,n.jsxs)("canvas-container",{children:[(0,n.jsx)(p,{action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}),(0,n.jsx)(x,{setAction:i,contextMenu:u})]})]}),(0,n.jsx)(T,{action:o,setAction:i,contextMenu:u})]})})}},4273:(e,t,o)=>{o.d(t,{A:()=>s});var l=o(5043),n=o(7950),a=(o(7915),o(579));function s(e){let{color:t,setColor:o,useAlpha:s}=e;const i=(0,l.useRef)(null),r=(0,l.useRef)(null),c=(0,l.useRef)(null),d=(0,l.useRef)(null),[h,u]=(0,l.useState)({x:0,y:0}),[p,x]=(0,l.useState)(0),[b,m]=(0,l.useState)(0),[g,C]=(0,l.useState)(!1),[v,f]=(0,l.useState)(0),[y,w]=(0,l.useState)(50),[j,M]=(0,l.useState)(100),[k,T]=(0,l.useState)(100);(0,l.useEffect)((()=>{g&&i.current.focus()}),[g]);(0,l.useEffect)((()=>{if(t)if(s){let l=[];for(let n=0;n<t.length;n++){"("===t[n]?e=n+1:")"===t[n]?(o=n,l.push(t.slice(e,o))):","===t[n]&&(l.push(t.slice(e,n)),e=n+1)}if(f(Number(l[0])),M(Number(l[1].slice(0,l[1].length-1))),w(Number(l[2].slice(0,l[2].length-1))),T(Number(l[3])),g){const e=r.current.getBoundingClientRect();u({x:l[0]/360*e.width,y:(100-l[2].slice(0,l[2].length-1))/100*e.height});const t=c.current.getBoundingClientRect();x((100-l[1].slice(0,l[1].length-1))/100*t.height);const o=d.current.getBoundingClientRect();m(l[3]*o.width)}}else{let l=[];for(let n=0;n<t.length;n++){var e,o;"("===t[n]?e=n+1:")"===t[n]?(o=n,l.push(t.slice(e,o))):","===t[n]&&(l.push(t.slice(e,n)),e=n+1)}if(f(Number(l[0])),M(Number(l[1].slice(0,l[1].length-1))),w(Number(l[2].slice(0,l[2].length-1))),g){const e=r.current.getBoundingClientRect();u({x:l[0]/360*e.width,y:(100-l[2].slice(0,l[2].length-1))/100*e.height});const t=c.current.getBoundingClientRect();x((100-l[1].slice(0,l[1].length-1))/100*t.height)}}}),[g,t,s]);(0,l.useEffect)((()=>{if(r.current){(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height);let t=e.canvas.width/360,o=e.canvas.height/100;for(let l=0;l<360;l++)for(let n=0;n<100;n++)e.fillStyle="hsl(".concat(l,",").concat(j,"%,").concat(100-n,"%)"),e.fillRect(l*t,n*o,(l+1)*t,(n+1)*o)})(r.current.getContext("2d",{alpha:!1}))}}),[g,j]);const P=e=>{if(0!==e.buttons){const t=r.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(u({x:o,y:l}),f(Math.floor(360*o/t.width)),w(100-Math.floor(100*l/t.height)))}},S=e=>{if(0!==e.buttons){const t=c.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(M(100-Math.floor(100*l/t.height)),x(l))}},I=e=>{if(0!==e.buttons){const t=d.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(T(Math.floor(100*o/t.width)/100),m(o))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("color-picker-button",{onClick:()=>C(!g),children:(0,a.jsx)("button",{style:{background:t}})}),g&&(0,n.createPortal)((0,a.jsxs)("color-picker-window",{tabIndex:"0",ref:i,onBlur:e=>{var t;(t=e).currentTarget.contains(t.relatedTarget)||C(!1)},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("hue-light-map",{children:[(0,a.jsx)("canvas",{onMouseDown:e=>P(e),onMouseMove:e=>P(e),ref:r,width:"180",height:"180",style:{opacity:s?k:1}}),(0,a.jsx)("slider-thumb",{style:{top:h.y,left:h.x,background:s?"hsla(".concat(v,",").concat(j,"%,").concat(y,"%, ").concat(k,")"):"hsl(".concat(v,",").concat(j,"%,").concat(y,"%)")},onMouseDown:e=>P(e),onMouseMove:e=>P(e)})]}),(0,a.jsxs)("saturation-slider",{title:"Saturation",children:[(0,a.jsx)("div",{ref:c,style:{background:"linear-gradient(0deg, hsl(".concat(v,",0%,").concat(y,"%), hsla(").concat(v,",100%,").concat(y,"%))")},onMouseDown:e=>S(e),onMouseMove:e=>S(e)}),(0,a.jsx)("slider-thumb",{style:{top:p,background:"hsla(".concat(v,",").concat(j,"%,").concat(y,"%, ").concat(k,")")},onMouseDown:e=>S(e),onMouseMove:e=>S(e)})]})]}),s&&(0,a.jsxs)("alpha-slider",{title:"Alpha",children:[(0,a.jsx)("div",{ref:d,style:{background:"linear-gradient(90deg, hsla(".concat(v,",").concat(j,"%,").concat(y,"%, 0), hsla(").concat(v,",").concat(j,"%,").concat(y,"%, 1))")},onMouseDown:e=>I(e),onMouseMove:e=>I(e)}),(0,a.jsx)("slider-thumb",{style:{left:b,background:"hsl(".concat(v,",").concat(j,"%,").concat(y,"%, ").concat(k,")")},onMouseDown:e=>I(e),onMouseMove:e=>I(e)})]}),(0,a.jsxs)("color-inputs",{children:[(0,a.jsxs)("div",{children:["Hue",(0,a.jsx)("input",{type:"number",min:"0",max:"360",value:v,onChange:e=>(e=>{f(e);const t=r.current.getBoundingClientRect();u({...h,x:e/360*t.width})})(e.target.value)})]}),(0,a.jsxs)("div",{children:["Lum.",(0,a.jsx)("input",{type:"number",min:"0",max:"100",value:y,onChange:e=>(e=>{w(e);const t=r.current.getBoundingClientRect();u({...h,y:(100-e)/100*t.height})})(e.target.value)})]}),(0,a.jsxs)("div",{children:["Sat.",(0,a.jsx)("input",{type:"number",min:"0",max:"100",value:j,onChange:e=>(e=>{M(e);const t=c.current.getBoundingClientRect();x((100-e)/100*t.height)})(e.target.value)})]}),s&&(0,a.jsxs)("div",{children:["Alpha",(0,a.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:k,onChange:e=>(e=>{T(e);const t=d.current.getBoundingClientRect();m(e*t.width)})(e.target.value)})]})]}),(0,a.jsx)("color-button",{children:(0,a.jsx)("button",{style:{background:s?"hsla(".concat(v,",").concat(j,"%,").concat(y,"%, ").concat(k,")"):"hsl(".concat(v,",").concat(j,"%,").concat(y,"%)")},onClick:()=>{o(s?"hsla(".concat(v,",").concat(j,"%,").concat(y,"%, ").concat(k,")"):"hsl(".concat(v,",").concat(j,"%,").concat(y,"%)"))},children:"Apply"})})]}),document.getElementById("root"))]})}}}]);
//# sourceMappingURL=411.c5cb38f8.chunk.js.map