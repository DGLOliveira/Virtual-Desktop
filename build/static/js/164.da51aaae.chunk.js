"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[164],{2164:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(5043);var n=i(579);function o(){var e=[];return function(){e=[];for(let i=0;i<360;i++){var t=5;i%90===0?t=20:(i+45)%90===0?t=15:i%15===0&&(t=10),e.push(t)}}(),(0,n.jsxs)("g",{id:"degrees",children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"white",stroke:"black",strokeWidth:"1"}),e.map(((e,t)=>(0,n.jsx)("line",{x1:70*Math.cos(t*(Math.PI/180))+100,y1:70*Math.sin(t*(Math.PI/180))+100,x2:Math.cos(t*(Math.PI/180))*(70+e)+100,y2:Math.sin(t*(Math.PI/180))*(70+e)+100,stroke:270===t?"red":"black",strokeWidth:5===e?.5:1},t))),(0,n.jsx)("polygon",{points:"100,25 96,10.9 100,10.8 104,10.9",fill:"red"})]})}function s(e){let{TRANSITION_TIME:t,rotation:i}=e;var r=[];return function(){r=[];const e=100;let t,i,n,o,s,l,a,c,d,h,x,k,f;for(let y=0;y<16;y++)y>=12?(x=90*y,k=60,f=15):y>=8?(x=90*y-45,k=50,f=12.5):(x=360*y/8+22.5,k=40,f=10),t=Math.cos(x*(Math.PI/180))*k+e,i=Math.sin(x*(Math.PI/180))*k+e,n=Math.cos((x+45)*(Math.PI/180))*f+e,o=Math.sin((x+45)*(Math.PI/180))*f+e,s=e,l=e,a=Math.cos((x-45)*(Math.PI/180))*f+e,c=Math.sin((x-45)*(Math.PI/180))*f+e,d=t+","+i+" "+n+","+o+" 100,100 "+a+","+c,h=t+","+i+" "+n+","+o+" 100,100",r.push([d,h])}(),(0,n.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`},children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"60",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"50.5",stroke:"gray",strokeWidth:"0.5"}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"40.5",stroke:"gray",strokeWidth:"0.5"}),r.map(((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("polygon",{points:e[0],fill:"white",stroke:"black",strokeWidth:"1"},t+"a"),(0,n.jsx)("polygon",{points:e[1],fill:"black"},t+"b"),t>=12&&t<16?(0,n.jsx)("line",{x1:60*Math.cos((t-12)*(Math.PI/2))+100,y1:60*Math.sin((t-12)*(Math.PI/2))+100,x2:70*Math.cos((t-12)*(Math.PI/2))+100,y2:70*Math.sin((t-12)*(Math.PI/2))+100,stroke:"black",strokeWidth:"0.5"},t+"c"):null]}))),(0,n.jsx)("polygon",{points:"100,30 96,45 100,50 104,45",fill:"white",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("polygon",{points:"100,30 104,45 100,45",fill:"black"}),(0,n.jsx)("polygon",{points:"100,45 96,45 100,50",fill:"black"}),(0,n.jsx)("rect",{x:"96",y:"48",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"})]})}function l(e){let{TRANSITION_TIME:t,rotation:i}=e;return(0,n.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`},children:[(0,n.jsx)("polygon",{points:"100,30 114,100 86,100",fill:"white",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("polygon",{points:"100,30 114,100 100,100",fill:"black"}),(0,n.jsx)("polygon",{points:"100,170 114,100 86,100",fill:"white",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("polygon",{points:"100,170 86,100 100,100",fill:"black"}),(0,n.jsx)("rect",{x:"95",y:"48",width:"10",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"})]})}function a(e){let{TRANSITION_TIME:t,rotation:i}=e;return(0,n.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`},children:[(0,n.jsx)("polygon",{points:"100,30 114,100 86,100",fill:"red"}),(0,n.jsx)("polygon",{points:"100,30 114,100 100,100",fill:"darkred"}),(0,n.jsx)("polygon",{points:"100,170 114,100 86,100",fill:"dodgerblue"}),(0,n.jsx)("polygon",{points:"100,170 100,100 86,100",fill:"blue"})]})}function c(e){let{TRANSITION_TIME:t,rotation:i}=e;return(0,n.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`},children:[(0,n.jsx)("polygon",{points:"100,30 95,47 100,54 105,47",fill:"white",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("polygon",{points:"100,30 105,47 100,47",fill:"black"}),(0,n.jsx)("polygon",{points:"100,47 95,47 100,54",fill:"black"}),(0,n.jsx)("rect",{x:"96",y:"52",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"}),(0,n.jsx)("polygon",{points:"100,124 108,135 108,140 100,129 92,140 92,135",fill:"white",stroke:"black",strokeWidth:"1.5"}),(0,n.jsx)("polygon",{points:"100,129 108,140 108,145 100,134 92,145 92,140",fill:"white",stroke:"black",strokeWidth:"1.5"}),(0,n.jsx)("polygon",{points:"100,134 108,145 108,150 100,139 92,150 92,145",fill:"white",stroke:"black",strokeWidth:"1.5"}),(0,n.jsx)("line",{x1:"100",y1:"54",x2:"100",y2:"147",fill:"black",stroke:"black",strokeWidth:"5"}),(0,n.jsx)("line",{x1:"99.5",y1:"54",x2:"99.5",y2:"145.5",stroke:"white",strokeWidth:"1.5"})]})}function d(e){let{TRANSITION_TIME:t,rotation:i}=e;return(0,n.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i}rad`,transition:`rotate ${t}s ease-in-out`,fontFamily:"Times New Roman"},children:[(0,n.jsx)("text",{x:"100",y:"60",textAnchor:"middle",fontSize:"20",fill:"black",style:{fontFamily:"Times New Roman",fontWeight:"bold"},children:"N"}),(0,n.jsx)("polygon",{points:"100,30 110,44 90,44",fill:"red",stroke:"black",strokeWidth:"0.5"}),(0,n.jsx)("text",{x:"100",y:"60",textAnchor:"middle",fontSize:"20",fill:"black",style:{transformOrigin:"center",rotate:"90deg",fontFamily:"Times New Roman",fontWeight:"bold"},children:"E"}),(0,n.jsx)("polygon",{points:"100,30 110,44 90,44",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"90deg"}}),(0,n.jsx)("text",{x:"100",y:"60",textAnchor:"middle",fontSize:"20",fill:"black",style:{transformOrigin:"center",rotate:"180deg",fontFamily:"Times New Roman",fontWeight:"bold"},children:"S"}),(0,n.jsx)("polygon",{points:"100,30 110,44 90,44",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"180deg"}}),(0,n.jsx)("text",{x:"100",y:"60",textAnchor:"middle",fontSize:"20",fill:"black",style:{transformOrigin:"center",rotate:"270deg",fontFamily:"Times New Roman",fontWeight:"bold"},children:"W"}),(0,n.jsx)("polygon",{points:"100,30 110,44 90,44",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"270deg"}}),(0,n.jsx)("text",{x:"100",y:"50",textAnchor:"middle",fontSize:"8",fill:"black",style:{transformOrigin:"center",rotate:"45deg",fontFamily:"Times New Roman"},children:"NE"}),(0,n.jsx)("polygon",{points:"100,30 105,40 95,40",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"45deg"}}),(0,n.jsx)("text",{x:"100",y:"50",textAnchor:"middle",fontSize:"8",fill:"black",style:{transformOrigin:"center",rotate:"135deg",fontFamily:"Times New Roman"},children:"SE"}),(0,n.jsx)("polygon",{points:"100,30 105,40 95,40",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"135deg"}}),(0,n.jsx)("text",{x:"100",y:"50",textAnchor:"middle",fontSize:"8",fill:"black",style:{transformOrigin:"center",rotate:"225deg",fontFamily:"Times New Roman"},children:"SW"}),(0,n.jsx)("polygon",{points:"100,30 105,40 95,40",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"225deg"}}),(0,n.jsx)("text",{x:"100",y:"50",textAnchor:"middle",fontSize:"8",fill:"black",style:{transformOrigin:"center",rotate:"315deg",fontFamily:"Times New Roman"},children:"NW"}),(0,n.jsx)("polygon",{points:"100,30 105,40 95,40",fill:"black",stroke:"black",strokeWidth:"0.5",style:{transformOrigin:"center",rotate:"315deg"}})]})}function h(e){let{deltaX:t,deltaY:i,TRANSITION_TIME:r}=e;return(0,n.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,n.jsx)("circle",{cx:5*t+100,cy:5*i+100,r:"5",fill:"black",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("circle",{cx:5.5*-t+100,cy:5.5*-i+100,r:"4.5",fill:"black",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:"invert(100%)"}})]})}function x(e){let{deltaX:t,deltaY:i,TRANSITION_TIME:r}=e;const o=5*t,s=5*i;return(0,n.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:"100",y1:"87",x2:"100",y2:"113",stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:"87",y1:"100",x2:"113",y2:"100",stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsxs)("g",{children:[(0,n.jsx)("line",{x1:101+o,y1:101+s,x2:106+o,y2:101+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:101+o,y1:101+s,x2:101+o,y2:106+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:101+o,y1:99+s,x2:101+o,y2:94+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:101+o,y1:99+s,x2:106+o,y2:99+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:99+o,y1:101+s,x2:99+o,y2:106+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:99+o,y1:101+s,x2:94+o,y2:101+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:99+o,y1:99+s,x2:94+o,y2:99+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}}),(0,n.jsx)("line",{x1:99+o,y1:99+s,x2:99+o,y2:94+s,stroke:"black",strokeWidth:"1",style:{transition:`all ${r}s ease-in-out`,mixBlendMode:"difference",filter:" invert(100%)"}})]})]})}function k(e){let{deltaX:t,deltaY:i,TRANSITION_TIME:r}=e;const o=7*t,s=7*i;return(0,n.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate"},children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2"}),(0,n.jsx)("circle",{cx:o+100,cy:s+100,r:"5",fill:"deepskyblue",stroke:"black",strokeWidth:"0.5",style:{transition:`all ${r}s ease-in-out`}}),(0,n.jsx)("path",{d:`M ${o+100.5} ${s+97.5} \n                    C ${o+101.75} ${s+97.5}, \n                    ${o+102.5} ${s+98.25}, \n                    ${o+102.5} ${s+99.5} `,stroke:"black",strokeWidth:"0.5",style:{transition:`all ${r}s ease-in-out`}}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"6",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("line",{x1:"100",y1:"106",x2:"100",y2:"112",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("line",{x1:"100",y1:"94",x2:"100",y2:"88",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("line",{x1:"106",y1:"100",x2:"112",y2:"100",stroke:"black",strokeWidth:"1"}),(0,n.jsx)("line",{x1:"94",y1:"100",x2:"88",y2:"100",stroke:"black",strokeWidth:"1"})]})}function f(e){const t=e.action,i=e.setAction,f=e.appMenu,y=e.setAppMenu,[g,p]=(0,r.useState)("ready"),[u,b]=(0,r.useState)({degrees:"DegreesFull",pointer:"RoseFull",rollpitch:"DoubleSphere"}),[m,j]=(0,r.useState)({heading:0,pitch:0,roll:0,cumulativeRotation:2*Math.PI,screenOrientationAngle:screen.orientation.angle*(Math.PI/180)});var M=null;const I={TRANSITION_TIME:.25,rotation:m.heading+m.cumulativeRotation-m.screenOrientationAngle},W={RoseFull:(0,n.jsx)(s,{...I}),RoseSimple:(0,n.jsx)(l,{...I}),MagnetPointer:(0,n.jsx)(a,{...I}),Arrow:(0,n.jsx)(c,{...I}),Modern:(0,n.jsx)(d,{...I})},w={deltaX:(()=>{switch(m.screenOrientationAngle){case 0:return Math.sin(m.pitch);case Math.PI/2:return-Math.sin(m.roll);case Math.PI:return-Math.sin(m.pitch);case 3*Math.PI/2:return Math.sin(m.roll);default:return Math.sin(m.pitch)}})(),deltaY:(()=>{switch(m.screenOrientationAngle){case 0:return-Math.sin(m.roll);case Math.PI/2:return-Math.sin(m.pitch);case Math.PI:return Math.sin(m.roll);case 3*Math.PI/2:return Math.sin(m.pitch);default:return-Math.sin(m.roll)}})(),TRANSITION_TIME:.25},T={DoubleSphere:(0,n.jsx)(h,{...w}),Target:(0,n.jsx)(x,{...w}),Bubble:(0,n.jsx)(k,{...w})},P={DegreesFull:(0,n.jsx)(o,{})};function S(){(M=new AbsoluteOrientationSensor({frequency:4,referenceFrame:"device"})).start(),console.log("sensor started"),M.onreading=()=>{let e=function(e,t,i,r){const n=Math.atan2(2*(e*t+i*r),1-2*(t*t+i*i)),o=Math.asin(2*(e*i-r*t)),s=Math.atan2(2*(e*r+t*i),1-2*(e*e+t*t));let l=m.cumulativeRotation;return m.heading<0&&n>0?l+=2*Math.PI:m.heading>0&&n<0&&(l-=2*Math.PI),{heading:n,pitch:o,roll:s,cumulativeRotation:l}}(M.quaternion[0],M.quaternion[1],M.quaternion[2],M.quaternion[3]),t=screen.orientation.angle*(Math.PI/180);j({...e,screenOrientationAngle:t})}}(0,r.useEffect)((()=>{"start"===g&&("AbsoluteOrientationSensor"in window?Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"magnetometer"}),navigator.permissions.query({name:"gyroscope"})]).then((e=>{e.every((e=>"granted"===e.state))?p("running"):p("not allowed")})):p("not supported")),"running"===g&&S()}),[g]),(0,r.useEffect)((()=>()=>{null!==M&&(M.stop(),console.log("stopped sensor"))}),[]);const v={style:u,setStyle:b};return(0,r.useEffect)((()=>{!function(e,t,i){switch(e){case"RoseFull":case"RoseSimple":case"MagnetPointer":case"Arrow":case"Modern":i.setStyle({...i.style,pointer:e}),t(e);break;case"Target":case"DoubleSphere":case"Bubble":i.setStyle({...i.style,rollpitch:e}),t(e);break;case!1:break;default:t(!1)}}(t,i,v)}),[t]),(0,r.useEffect)((()=>{!function(e,t,i){if(null===e)t({Pointers:{"Rose Full":{action:"RoseFull",radio:!0,name:"pointer",disabled:!1},"Rose Simple":{action:"RoseSimple",radio:!1,name:"pointer",disabled:!1},"Magnet Pointer":{action:"MagnetPointer",radio:!1,name:"pointer",disabled:!1},Arrow:{action:"Arrow",radio:!1,name:"pointer",disabled:!1},Modern:{action:"Modern",radio:!1,name:"pointer",disabled:!1}},"Roll/Pitch":{"Double Sphere":{action:"DoubleSphere",radio:!0,name:"rollpitch",disabled:!1},Bubble:{action:"Bubble",radio:!1,name:"rollpitch",disabled:!1},Target:{action:"Target",radio:!1,name:"rollpitch",disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{let r={...e};Object.keys(r.Pointers).forEach((e=>{r.Pointers[e].action===i.style.pointer?r.Pointers[e].radio=!0:r.Pointers[e].radio=!1})),Object.keys(r["Roll/Pitch"]).forEach((e=>{r["Roll/Pitch"][e].action===i.style.rollpitch?r["Roll/Pitch"][e].radio=!0:r["Roll/Pitch"][e].radio=!1})),t(r)}}(f,y,v)}),[u]),(0,n.jsxs)(n.Fragment,{children:["ready"===g&&(0,n.jsx)("button",{className:"compassStartButton",onClick:()=>p("start"),title:"Start",children:"Start"}),"not supported"===g&&(0,n.jsx)("div",{className:"compassWarning",children:"This feature is not supported on your device and/or browser"}),"not allowed"===g&&(0,n.jsx)("div",{className:"compassWarning",children:"This feature does not have permission to access your device sensors"}),(0,n.jsxs)("svg",{className:"compassContainer",shapeRendering:"geometricprecision",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsxs)("text",{x:"100",y:"5",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"red",children:[(180*m.heading/Math.PI).toFixed(2),"\xb0"]}),P[u.degrees],W[u.pointer],T[u.rollpitch]]})]})}}}]);
//# sourceMappingURL=164.da51aaae.chunk.js.map