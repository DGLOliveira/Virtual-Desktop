"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[918],{7918:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});var r=i(5043),o=i(579);function s(){const[t,e]=(0,r.useState)("ready"),[i,s]=(0,r.useState)({heading:0,pitch:0,roll:0});var n=null,l=[];!function(){l=[];const t=100;let e,i,r,o,s,n,a,c,h,d,x,p,g;for(let f=0;f<16;f++)f>=12?(x=90*f,p=60,g=15):f>=8?(x=90*f-45,p=50,g=12.5):(x=360*f/8+22.5,p=40,g=10),e=Math.cos(x*(Math.PI/180))*p+t,i=Math.sin(x*(Math.PI/180))*p+t,r=Math.cos((x+45)*(Math.PI/180))*g+t,o=Math.sin((x+45)*(Math.PI/180))*g+t,s=t,n=t,a=Math.cos((x-45)*(Math.PI/180))*g+t,c=Math.sin((x-45)*(Math.PI/180))*g+t,h=e+","+i+" "+r+","+o+" 100,100 "+a+","+c,d=e+","+i+" "+r+","+o+" 100,100",l.push([h,d])}();var a=[];return function(){a=[];for(let i=0;i<360;i++){var t,e;i%90===0?(t=20,e=20):(i+45)%90===0?(t=15,e=15):i%15===0?(t=10,e=10):(t=5,e=5),a.push([t,e])}}(),(0,r.useEffect)((()=>{"start"===t&&("AbsoluteOrientationSensor"in window?Promise.all([navigator.permissions.query({name:"accelerometer"}),navigator.permissions.query({name:"magnetometer"}),navigator.permissions.query({name:"gyroscope"})]).then((t=>{t.every((t=>"granted"===t.state))?e("running"):e("not allowed")})):e("not supported")),"running"===t&&((n=new AbsoluteOrientationSensor({frequency:2,referenceFrame:"device"})).start(),n.onreading=()=>{const t=n.quaternion[0],e=n.quaternion[1],i=n.quaternion[2],r=n.quaternion[3],o=Math.atan2(2*(t*e+i*r),1-2*(e*e+i*i)),l=Math.asin(2*(t*i-r*e)),a=Math.atan2(2*(t*r+e*i),1-2*(t*t+e*e));s({heading:o,pitch:l,roll:a})})}),[t]),(0,r.useEffect)((()=>()=>{n&&n.stop()}),[]),(0,o.jsxs)(o.Fragment,{children:["ready"===t&&(0,o.jsx)("button",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black",backgroundColor:"lightgray",border:"1px black solid",padding:"5px",boxSizing:"border-box",fontSize:"20px"},onClick:()=>e("start"),title:"Start",children:"Start"}),"not supported"===t&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature is not supported on your device and/or browser"}),"not allowed"===t&&(0,o.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"red",backgroundColor:"white",border:"1px black solid",padding:"5px",boxSizing:"border-box"},children:"This feature does not have permission to access your device sensors"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"5px",boxSizing:"border-box"},children:(0,o.jsxs)("svg",{style:{width:"inherit",height:"inherit"},shapeRendering:"geometricprecision",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("text",{x:"100",y:"5",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"red",children:[180*i.heading/Math.PI,"\xb0"]}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"white",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"60",fill:"lightgray",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"50.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsx)("circle",{cx:"100",cy:"100",r:"40.5",stroke:"gray",strokeWidth:"0.5"}),(0,o.jsxs)("g",{id:"rose",style:{transformOrigin:"center",rotate:`${i.heading}rad`,transition:"rotate 0.5s"},children:[l.map(((t,e)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("polygon",{points:t[0],fill:"white",stroke:"black",strokeWidth:"1"},e+"a"),(0,o.jsx)("polygon",{points:t[1],fill:"black"},e+"b")]}))),(0,o.jsx)("polygon",{points:"100,30 96,45 100,50 104,45",fill:"white",stroke:"black",strokeWidth:"1"}),(0,o.jsx)("polygon",{points:"100,30 104,45 100,45",fill:"black"}),(0,o.jsx)("polygon",{points:"100,45 96,45 100,50",fill:"black"}),(0,o.jsx)("rect",{x:"96",y:"48",width:"8",height:"2",fill:"white",stroke:"black",strokeWidth:"1",rx:"1"})]}),(0,o.jsxs)("g",{id:"degrees",children:[a.map(((t,e)=>(0,o.jsx)("line",{x1:Math.cos(e*(Math.PI/180))*(90-t[0])+100,y1:Math.sin(e*(Math.PI/180))*(90-t[1])+100,x2:90*Math.cos(e*(Math.PI/180))+100,y2:90*Math.sin(e*(Math.PI/180))+100,stroke:270===e?"red":"black",strokeWidth:"1"},e))),(0,o.jsx)("polygon",{points:"100,30 96,20 100,22 104,20",fill:"red"})]}),(0,o.jsxs)("g",{id:"rollPitch",style:{isolation:"isolate",filter:" invert(100%)"},children:[(0,o.jsx)("circle",{cx:"100",cy:"100",r:"13",fill:"white",stroke:"black",strokeWidth:"2",style:{filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5*Math.sin(i.pitch)+100,cy:5*Math.sin(i.roll)+100,r:"5",fill:"black",style:{transition:"all 0.5s",mixBlendMode:"difference",filter:" invert(100%)"}}),(0,o.jsx)("circle",{cx:5.5*-Math.sin(i.pitch)+100,cy:5.5*-Math.sin(i.roll)+100,r:"4.5",fill:"black",style:{transition:"all 0.5s",mixBlendMode:"difference",filter:"invert(100%)"}})]})]})})]})}}}]);
//# sourceMappingURL=918.4b90b246.chunk.js.map