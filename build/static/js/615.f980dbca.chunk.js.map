{"version":3,"file":"static/js/615.f980dbca.chunk.js","mappings":"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","sources":["Apps/DrawDoc/Context.jsx","Apps/DrawDoc/Handlers/handleDraw.js","Apps/DrawDoc/Handlers/handleTools.js","Apps/DrawDoc/Handlers/handleTopMenu.js","Apps/DrawDoc/Handlers/handleHistory.js","Apps/DrawDoc/Handlers/handleFile.js","Apps/DrawDoc/Handlers/handleAction.jsx","Apps/DrawDoc/Dialog/new.jsx","Apps/DrawDoc/Dialog/saveAs.jsx","Apps/DrawDoc/Dialog/changeName.jsx","Apps/DrawDoc/Dialog/closeApp.jsx","Apps/DrawDoc/Components/DrawCanvas.jsx","Apps/DrawDoc/Components/PreviewCanvas.jsx","Apps/DrawDoc/Components/SelectionCanvas.jsx","Apps/DrawDoc/Components/LayersWindow.jsx","Apps/DrawDoc/Components/ContentBar.jsx","Apps/DrawDoc/Components/CarryCanvas.jsx","Apps/DrawDoc/Components/CanvasInterface.jsx","Apps/DrawDoc/Components/TopNavBar.jsx","Apps/DrawDoc/Components/SubToolIcon.jsx","Apps/DrawDoc/Components/ToolBar.jsx","Apps/DrawDoc/Components/BottomNavBar.jsx","Apps/DrawDoc/index.jsx","System/GlobalComponents/ColorPicker/Converters/rgbToHsl.js","System/GlobalComponents/ColorPicker/Converters/rgbaToHsla.js","System/GlobalComponents/ColorPicker/ColorPicker.jsx","System/GlobalComponents/ColorPicker/Converters/hexToRgba.js","System/GlobalComponents/ColorPicker/Converters/hexToRgb.js","System/GlobalComponents/ColorPicker/Converters/nameToHsl.js"],"sourcesContent":["import { useState, createContext } from \"react\";\r\n\r\nexport const Context = createContext({\r\n  currLayer: 0,\r\n  layers: [],\r\n  setLayers: () => { },\r\n  lastLayer: 0,\r\n  setLastLayer: () => { },\r\n  name: \"\",\r\n  setName: () => { },\r\n  setCurrLayer: () => { },\r\n  history: {},\r\n  setHistory: () => { },\r\n  dimentions: {},\r\n  setDimentions: () => { },\r\n  tempDimentions: {},\r\n  setTempDimentions: () => { },\r\n  tool: \"\",\r\n  setTool: () => { },\r\n  subTool: {},\r\n  setSubTool: () => { },\r\n  curveControls: {},\r\n  setCurveControls: () => { },\r\n  color: {},\r\n  setColor: () => { },\r\n  size: 0,\r\n  setSize: () => { },\r\n  text: {},\r\n  setText: () => { },\r\n  clipboard: {},\r\n  setClipboard: () => { },\r\n  zoom: 1,\r\n  setZoom: () => { },\r\n  cursor: {},\r\n  setCursor: () => { },\r\n  view: {},\r\n  setView: () => { },\r\n});\r\n\r\nexport function ContextProvider({ children }) {\r\n  const [currLayer, setCurrLayer] = useState(0);\r\n  const [layers, setLayers] = useState([\r\n    {\r\n      id: 0,\r\n      name: \"Base\",\r\n      visible: true,\r\n      canUndo: false,\r\n      canRedo: false\r\n    }\r\n  ]);\r\n  const [lastLayer, setLastLayer] = useState(0);\r\n  const [name, setName] = useState(\"Untitled\");\r\n  const [history, setHistory] = useState({\r\n    0: {\r\n      data: [],\r\n      lastIndex: 0\r\n    }\r\n  });\r\n  const [dimentions, setDimentions] = useState({ width: 350, height: 350, });\r\n  const [tempDimentions, setTempDimentions] = useState({ width: 350, height: 350, });\r\n  const [tool, setTool] = useState(\"Brush\");\r\n  const [subTool, setSubTool] = useState({\r\n    shape: \"Circle\",\r\n    fill: false,\r\n    stretch: false,\r\n    sides: 4,\r\n    angle: 0,\r\n    startAngle: 0\r\n  });\r\n  const [curveControls, setCurveControls] = useState({\r\n    state: \"none\",\r\n    start: { x: -1, y: -1 },\r\n    end: { x: -1, y: -1 },\r\n    controlPoint1: { x: -1, y: -1 },\r\n    controlPoint2: { x: -1, y: -1 }\r\n  });\r\n  const [color, setColor] = useState({\r\n    selected: \"hsl(0, 100%, 0%)\",\r\n    1: \"hsl(0, 100%, 0%)\",\r\n    2: \"hsl(0, 100%, 100%)\",\r\n  });\r\n  const [size, setSize] = useState(16);\r\n  const [text, setText] = useState({\r\n    text: \"\",\r\n    fill: true,\r\n    stroke: false,\r\n    strokeWidth: 2,\r\n    lineHeight: 1.2,\r\n    fontFamily: \"Arial\",\r\n    state: \"none\",\r\n  });\r\n  const [clipboard, setClipboard] = useState({\r\n    data: {},\r\n    state: \"none\",\r\n  });\r\n  const [zoom, setZoom] = useState(1);\r\n  const [cursor, setCursor] = useState({\r\n    current: { x: 0, y: 0 },\r\n    start: { x: 0, y: 0 },\r\n    end: { x: 0, y: 0 },\r\n    down: false,\r\n    selecting: false\r\n  });\r\n  const [view, setView] = useState({\r\n    toolBar: true,\r\n    contentBar: true,\r\n    topNavBar: true,\r\n    bottomNavBar: true,\r\n    menu: true\r\n  })\r\n\r\n  const contextValue = {\r\n    currLayer: currLayer,\r\n    layers: layers,\r\n    setLayers: setLayers,\r\n    lastLayer: lastLayer,\r\n    setLastLayer: setLastLayer,\r\n    name: name,\r\n    setName: setName,\r\n    history: history,\r\n    setHistory: setHistory,\r\n    setCurrLayer: setCurrLayer,\r\n    dimentions: dimentions,\r\n    setDimentions: setDimentions,\r\n    tempDimentions: tempDimentions,\r\n    setTempDimentions: setTempDimentions,\r\n    tool: tool,\r\n    setTool: setTool,\r\n    subTool: subTool,\r\n    setSubTool: setSubTool,\r\n    curveControls: curveControls,\r\n    setCurveControls: setCurveControls,\r\n    color: color,\r\n    setColor: setColor,\r\n    size: size,\r\n    setSize: setSize,\r\n    text: text,\r\n    setText: setText,\r\n    clipboard: clipboard,\r\n    setClipboard: setClipboard,\r\n    zoom: zoom,\r\n    setZoom: setZoom,\r\n    cursor: cursor,\r\n    setCursor: setCursor,\r\n    view: view,\r\n    setView: setView\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={contextValue}>{children}</Context.Provider>\r\n  );\r\n}\r\n\r\nexport default ContextProvider;","export const handleDraw = (canvas, cursor, param, preview) => {\r\n    let ctx;\r\n    if (preview) {\r\n        ctx = canvas.getContext('2d', { alpha: true });\r\n    } else {\r\n        ctx = canvas.getContext('2d', { alpha: false });\r\n    }\r\n    ctx.webkitImageSmoothingEnabled = false;\r\n    ctx.mozImageSmoothingEnabled = false;\r\n    ctx.imageSmoothingEnabled = false;\r\n    const height = ctx.canvas.height;\r\n    const width = ctx.canvas.width;\r\n\r\n    const x = cursor.current.x;\r\n    const y = cursor.current.y;\r\n    const startX = cursor.start.x;\r\n    const startY = cursor.start.y;\r\n    const endX = cursor.end.x;\r\n    const endY = cursor.end.y;\r\n\r\n    const drawBrush = () => {\r\n        ctx.fillStyle = param.selectedColor;\r\n        ctx.strokeStyle = param.selectedColor;\r\n        ctx.lineWidth = 1;\r\n        ctx.setLineDash([]);\r\n        ctx.beginPath();\r\n        ctx.arc(\r\n            x,\r\n            y,\r\n            param.size,\r\n            0,\r\n            Math.PI * 2,\r\n        );\r\n        ctx.stroke();\r\n        ctx.fill();\r\n        ctx.closePath();\r\n    };\r\n\r\n    const drawEraser = () => {\r\n        ctx.strokeStyle = param.selectedColor;\r\n        ctx.fillStyle = param.selectedColor;\r\n        ctx.lineWidth = 1;\r\n        ctx.setLineDash([]);\r\n        ctx.beginPath();\r\n        ctx.arc(\r\n            x,\r\n            y,\r\n            param.size,\r\n            0,\r\n            Math.PI * 2,\r\n        );\r\n        if (!preview) {\r\n            ctx.fill();\r\n        } else {\r\n            ctx.stroke();\r\n        }\r\n        ctx.closePath();\r\n    }\r\n\r\n    const drawSpray = () => {\r\n        let randomX = Math.random() * param.size;\r\n        let randomNegativeX = Math.random();\r\n        let randomY = Math.random() * param.size;\r\n        let randomNegativeY = Math.random();\r\n        while (Math.sqrt(Math.pow(randomX, 2) + Math.pow(randomY, 2)) > param.size) {\r\n            randomX = Math.random() * param.size;\r\n            randomY = Math.random() * param.size;\r\n        }\r\n        if (randomNegativeY > 0.5) {\r\n            randomY = randomY * -1;\r\n        }\r\n        if (randomNegativeX > 0.5) {\r\n            randomX = randomX * -1;\r\n        }\r\n        ctx.fillStyle = param.selectedColor;\r\n        ctx.fillRect(\r\n            x + randomX,\r\n            y + randomY,\r\n            1,\r\n            1,\r\n        );\r\n    };\r\n\r\n    const drawPipette = () => {\r\n        let pixel = ctx.getImageData(\r\n            x,\r\n            y,\r\n            1,\r\n            1,\r\n        );\r\n        // convert from rgb to hsl\r\n        let r = pixel.data[0],\r\n            g = pixel.data[1],\r\n            b = pixel.data[2];\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        let cmin = Math.min(r, g, b),\r\n            cmax = Math.max(r, g, b),\r\n            delta = cmax - cmin,\r\n            h = 0,\r\n            s = 0,\r\n            l = ((cmax + cmin) / 2);\r\n        if (delta === 0) {\r\n            s = 0;\r\n            h = 0;\r\n        } else {\r\n            if (l <= 0.5) {\r\n                s = delta / (cmax + cmin);\r\n            } else {\r\n                s = delta / (2 - cmax - cmin);\r\n            };\r\n            if (cmax === r) {\r\n                h = (g - b) / delta;\r\n            } else if (cmax === g) {\r\n                h = ((b - r) / delta) + 2;\r\n            } else if (cmax === b) {\r\n                h = ((r - g) / delta) + 4;\r\n            }\r\n        }\r\n        h = Math.round(h * 60);\r\n        if (h < 0) {\r\n            h += 360;\r\n        }\r\n        s = Math.abs(s * 100).toFixed(0);\r\n        l = (l * 100).toFixed(0);\r\n        let color = \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\";\r\n        //assign color\r\n        if (param.tool === \"Pipette\") {\r\n            if (param.selectedColor === param.color1) {\r\n                param.setColor1(color);\r\n            } else {\r\n                param.setColor2(color);\r\n            }\r\n        } else {\r\n            return color;\r\n        }\r\n    };\r\n\r\n    //Bucket code based on Spawn Fill algorithm in \r\n    //https://stackoverflow.com/questions/2106995/how-can-i-perform-flood-fill-with-html-canvas/56221940#56221940\r\n    //answer from user gman.\r\n    //Regular flood fill algorithm is too slow as it looks at individual pixels.\r\n    //This solution looks at entire lines and fills them in.\r\n    //Code has been edited to work with hsla color values\r\n    const drawBucket = () => {\r\n        let r, g, b, h, s, l;\r\n        let hslaColor = [];\r\n        for (let i = 0; i < param.selectedColor.length; i++) {\r\n            var start;\r\n            var end;\r\n            if (param.selectedColor[i] === \"(\") {\r\n                start = i + 1;\r\n            } else if (param.selectedColor[i] === \")\") {\r\n                end = i;\r\n                hslaColor.push(param.selectedColor.slice(start, end));\r\n            } else if (param.selectedColor[i] === \",\") {\r\n                hslaColor.push(param.selectedColor.slice(start, i));\r\n                start = i + 1;\r\n            }\r\n        }\r\n        h = hslaColor[0] / 360;\r\n        s = hslaColor[1].slice(0, -1) / 100;\r\n        l = hslaColor[2].slice(0, -1) / 100;\r\n        if (s === 0) {\r\n            r = l * 255;\r\n            g = l * 255;\r\n            b = l * 255;\r\n        } else {\r\n            let temp1, temp2, tempR, tempG, tempB;\r\n            if (l < 0.5) {\r\n                temp1 = l * (1 + s);\r\n            } else {\r\n                temp1 = (l + s) - (l * s);\r\n            }\r\n            temp2 = 2 * l - temp1;\r\n            function secondTest(value) {\r\n                if (value < 0) {\r\n                    return value + 1;\r\n                } else if (value > 1) {\r\n                    return value - 1;\r\n                } else {\r\n                    return value;\r\n                }\r\n            }\r\n            tempR = secondTest(h + 1 / 3);\r\n            tempG = secondTest(h);\r\n            tempB = secondTest(h - 1 / 3);\r\n            function finalTest(temp1, temp2, tempColor) {\r\n                if (6 * tempColor < 1) {\r\n                    return temp2 + (temp1 - temp2) * 6 * tempColor;\r\n                } else if (2 * tempColor < 1) {\r\n                    return temp1;\r\n                } else if (3 * tempColor < 2) {\r\n                    return temp2 + (temp1 - temp2) * (2 / 3 - tempColor) * 6;\r\n                } else {\r\n                    return temp2;\r\n                }\r\n            }\r\n            r = Math.round(finalTest(temp1, temp2, tempR) * 255);\r\n            g = Math.round(finalTest(temp1, temp2, tempG) * 255);\r\n            b = Math.round(finalTest(temp1, temp2, tempB) * 255);\r\n        }\r\n        function componentToHex(c) {\r\n            var hex = Number(c).toString(16);\r\n            return hex.length == 1 ? \"0\" + hex : hex;\r\n        }\r\n        let hexColor = \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n        let spans = [];\r\n        let selectedColor = parseInt(\"FF\" + hexColor.slice(5, 7) + hexColor.slice(3, 5) + hexColor.slice(1, 3), 16);\r\n        //get copy of canvas and convert to a more performant format\r\n        //canvas data has no negative values and none of the data points require the standard 64 bit\r\n        const imageData = ctx.getImageData(0, 0, width, height);\r\n        const pixelData = {\r\n            width: imageData.width,\r\n            height: imageData.height,\r\n            data: new Uint32Array(imageData.data.buffer),\r\n        };\r\n        //get color from pixel in buffer\r\n        function getPixel(currX, currY) {\r\n            if (currX < 0 || currY < 0 || currX >= pixelData.width || currY >= pixelData.height) {\r\n                return -1;  // out of bounds\r\n            }\r\n            return pixelData.data[currY * imageData.width + currX];\r\n        };\r\n        //break drawBucket if color is the same as target, or if it is out of bounds\r\n        let targetColor = getPixel(Math.floor(x), Math.floor(y));\r\n        if (targetColor === -1 || targetColor === selectedColor) return;\r\n        //add line to check to spans\r\n        const addSpan = (left, right, line, direction) => {\r\n            spans.push({\r\n                left,\r\n                right,\r\n                line,\r\n                direction\r\n            });\r\n        };\r\n        //check span for color and length\r\n        const checkSpan = (left, right, line, direction) => {\r\n            let flag = false;\r\n            let start;\r\n            let column;\r\n            if (line >= height || line < 0) return;\r\n            for (column = left; column < right; ++column) {\r\n                const color = getPixel(column, line);\r\n                if (color === targetColor) {\r\n                    if (!flag) {\r\n                        flag = true;\r\n                        start = column;\r\n                    }\r\n                } else {\r\n                    if (flag) {\r\n                        flag = false;\r\n                        addSpan(start, column - 1, line, direction);\r\n                    }\r\n                }\r\n            }\r\n            if (flag) {\r\n                flag = false;\r\n                addSpan(start, right - 1, line, direction);\r\n            }\r\n        };\r\n        addSpan(Math.floor(x), Math.floor(x), Math.floor(y), 0);\r\n        let depth = 0;\r\n        let MAX_DEPTH = 5000;\r\n        while (spans.length > 0 && depth < MAX_DEPTH) {\r\n            depth++;\r\n            const { left, right, line, direction } = spans.pop();\r\n            let l = left;\r\n            for (l; l >= 0; l--) {\r\n                if (getPixel(l, line) !== targetColor) {\r\n                    break;\r\n                }\r\n            }\r\n            ++l;\r\n            let r = right;\r\n            for (r; r < width; ++r) {\r\n                if (getPixel(r, line) !== targetColor) {\r\n                    break;\r\n                }\r\n            }\r\n            const lineOffset = line * width;\r\n            if (lineOffset + r > pixelData.data.length) {\r\n                console.log(\"Attempt to access pixel data array beyond its maximum length\");\r\n                pixelData.data.fill(selectedColor, lineOffset + l, pixelData.data.length);\r\n            } else {\r\n                pixelData.data.fill(selectedColor, lineOffset + l, lineOffset + r);\r\n            }\r\n            if (direction <= 0) {\r\n                checkSpan(l, r, line - 1, -1);\r\n            } else {\r\n                checkSpan(l, left, line - 1, -1);\r\n                checkSpan(right, r, line - 1, -1);\r\n            }\r\n            if (direction >= 0) {\r\n                checkSpan(l, r, line + 1, +1);\r\n            } else {\r\n                checkSpan(l, left, line + 1, +1);\r\n                checkSpan(right, r, line + 1, +1);\r\n            }\r\n        }\r\n        if (depth >= MAX_DEPTH) console.error(\"Bucket Tool maximum iterations exceeded, consider using a smaller canvas.\");\r\n        ctx.putImageData(imageData, 0, 0);\r\n    };\r\n\r\n    const drawText = () => {\r\n        ctx.fillStyle = param.selectedColor\r\n        ctx.strokeStyle = param.selectedColor === param.color1 ? param.color2 : param.color1\r\n        ctx.lineWidth = param.text.strokeWidth\r\n        ctx.font = String(param.size + \"px \" + param.text.fontFamily)\r\n        let linesArr = param.text.text.split(\"\\n\")\r\n        let lineIndex = 0\r\n        let maxWidth = endX > startX ? endX - startX : startX - endX\r\n        let left = endX > startX ? startX : endX\r\n        let top = endY > startY ? startY : endY\r\n        let whileBreak = 0\r\n        const MAX_DEPTH = 500\r\n        while (lineIndex < linesArr.length && whileBreak < MAX_DEPTH) {\r\n            if (ctx.measureText(linesArr[lineIndex]).width > maxWidth) {\r\n                let firstText = linesArr[lineIndex][0]\r\n                let firstTextIndex = 1\r\n                let whileBreak2 = 0\r\n                while (ctx.measureText(firstText).width < maxWidth && whileBreak2 < MAX_DEPTH) {\r\n                    firstText += linesArr[lineIndex][firstTextIndex]\r\n                    firstTextIndex++\r\n                    whileBreak2++\r\n                }\r\n                let lastText = linesArr[lineIndex].substring(firstTextIndex - 1, linesArr[lineIndex].length)\r\n                linesArr[lineIndex] = firstText.substring(0, firstTextIndex - 1)\r\n                linesArr = linesArr.toSpliced(lineIndex + 1, 0, lastText)\r\n            }\r\n            lineIndex++\r\n            whileBreak++\r\n        };\r\n        linesArr.forEach((value, index) => {\r\n            if (param.text.fill) {\r\n                ctx.fillText(\r\n                    value,\r\n                    left,\r\n                    top + param.size + (param.size * param.text.lineHeight * index)\r\n                );\r\n            }\r\n            if (param.text.stroke) {\r\n                ctx.strokeText(\r\n                    value,\r\n                    left,\r\n                    top + param.size + (param.size * param.text.lineHeight * index)\r\n                );\r\n            }\r\n        })\r\n\r\n    };\r\n\r\n    const drawSelect = () => {\r\n        switch (param.clipboard.state) {\r\n            case \"copy\":\r\n                if (!preview && endX - startX !== 0 && endY - startY !== 0) {\r\n                    let data = ctx.getImageData(\r\n                        startX,\r\n                        startY,\r\n                        endX - startX,\r\n                        endY - startY\r\n                    );\r\n                    param.setClipboard({\r\n                        data: data,\r\n                        state: \"carry\"\r\n                    });\r\n                }\r\n                break;\r\n            case \"cut\":\r\n                if (!preview && endX - startX !== 0 && endY - startY !== 0) {\r\n                    let data = ctx.getImageData(\r\n                        startX,\r\n                        startY,\r\n                        endX - startX,\r\n                        endY - startY\r\n                    );\r\n                    param.setClipboard({\r\n                        data: data,\r\n                        state: \"carry\"\r\n                    });\r\n                    if (param.selectedColor === param.color1) {\r\n                        ctx.fillStyle = param.color2;\r\n                    } else {\r\n                        ctx.fillStyle = param.color1;\r\n                    }\r\n                    ctx.fillRect(\r\n                        startX,\r\n                        startY,\r\n                        endX - startX,\r\n                        endY - startY\r\n                    );\r\n                }\r\n                break;\r\n            case \"carry\":\r\n                const carryCanvas = document.getElementById(\"carryCanvas\");\r\n                const carryCtx = carryCanvas.getContext(\"2d\");\r\n                carryCtx.height = param.clipboard.data.height;\r\n                carryCtx.width = param.clipboard.data.width;\r\n                carryCtx.putImageData(param.clipboard.data, 0, 0);\r\n                ctx.putImageData(param.clipboard.data, endX, endY);\r\n                break;\r\n            case \"paste\":\r\n                if (!preview) {\r\n                    const carryCanvas = document.getElementById(\"carryCanvas\");\r\n                    ctx.drawImage(carryCanvas, endX, endY);\r\n                    param.setClipboard({\r\n                        ...param.clipboard,\r\n                        state: \"none\"\r\n                    });\r\n                }\r\n                break;\r\n            case \"none\":\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    const drawShape = () => {\r\n        ctx.strokeStyle = param.color1;\r\n        ctx.fillStyle = param.color2;\r\n        ctx.setLineDash([]);\r\n        ctx.lineWidth = param.size;\r\n        let centerX = (endX - startX) / 2;\r\n        let centerY = (endY - startY) / 2;\r\n        let radius;\r\n        if (Math.sqrt(Math.pow(endX - startX, 2)) / 2 < Math.sqrt(Math.pow(endY - startY, 2)) / 2) {\r\n            radius = Math.sqrt(Math.pow(endX - startX, 2)) / 2;\r\n        } else {\r\n            radius = Math.sqrt(Math.pow(endY - startY, 2)) / 2;\r\n        }\r\n        let stretchX = Math.sqrt(Math.pow((endX - startX) / (endY - startY), 2));\r\n        let stretchY = Math.sqrt(Math.pow((endY - startY) / (endX - startX), 2));\r\n        if (param.subTool.stretch) {\r\n            if (stretchX > stretchY) {\r\n                stretchY = 1;\r\n            } else {\r\n                stretchX = 1;\r\n            }\r\n        } else {\r\n            stretchX = 1;\r\n            stretchY = 1;\r\n        }\r\n        if (param.subTool.shape !== \"Curve\" && param.subTool.shape !== \"Line\") {\r\n            ctx.save();\r\n            ctx.translate(startX + centerX, startY + centerY);\r\n            ctx.rotate((Math.PI * param.subTool.angle) / 180);\r\n        }\r\n        if (param.subTool.shape === \"Rectangle\") {\r\n            drawFunctions[\"draw\" + param.subTool.shape](centerX, centerY);\r\n        } else {\r\n            drawFunctions[\"draw\" + param.subTool.shape](stretchX, stretchY, radius);\r\n        }\r\n        if (param.subTool.shape !== \"Line\" &&\r\n            param.subTool.shape !== \"Curve\") {\r\n            ctx.restore();\r\n        }\r\n    }\r\n\r\n    const drawLine = () => {\r\n        ctx.beginPath();\r\n        ctx.moveTo(\r\n            startX,\r\n            startY,\r\n        )\r\n        ctx.lineTo(\r\n            endX,\r\n            endY,\r\n        )\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawCurve = () => {\r\n        let startPoint = { x: 0, y: 0 };\r\n        let endPoint = { x: 0, y: 0 };\r\n        let controlPoint1 = { x: 0, y: 0 };\r\n        let controlPoint2 = { x: 0, y: 0 };\r\n        ctx.beginPath();\r\n        if (param.curveControls.start.x === -1) {\r\n            startPoint = { x: startX, y: startY };\r\n            endPoint = { x: endX, y: endY };\r\n            controlPoint1 = { x: startX, y: startY };\r\n            controlPoint2 = { x: endX, y: endY };\r\n        } else if (param.curveControls.controlPoint1.x === -1) {\r\n            startPoint = param.curveControls.start;\r\n            endPoint = param.curveControls.end;\r\n            controlPoint1 = { x: endX, y: endY };\r\n            controlPoint2 = param.curveControls.end;\r\n        } else if (param.curveControls.controlPoint2.x === -1) {\r\n            startPoint = param.curveControls.start;\r\n            endPoint = param.curveControls.end;\r\n            controlPoint1 = param.curveControls.controlPoint1;\r\n            controlPoint2 = { x: endX, y: endY };\r\n        } else {\r\n            startPoint = param.curveControls.start;\r\n            endPoint = param.curveControls.end;\r\n            controlPoint1 = param.curveControls.controlPoint1;\r\n            controlPoint2 = param.curveControls.controlPoint2;\r\n        }\r\n        ctx.moveTo(\r\n            startPoint.x,\r\n            startPoint.y,\r\n        )\r\n        ctx.bezierCurveTo(\r\n            controlPoint1.x,\r\n            controlPoint1.y,\r\n            controlPoint2.x,\r\n            controlPoint2.y,\r\n            endPoint.x,\r\n            endPoint.y,\r\n        )\r\n        ctx.stroke();\r\n    }\r\n    const drawRectangle = (centerX, centerY) => {\r\n        if (param.subTool.fill) {\r\n            ctx.fillRect(\r\n                -centerX,\r\n                -centerY,\r\n                endX - startX,\r\n                endY - startY,\r\n            );\r\n        }\r\n        ctx.strokeRect(\r\n            -centerX,\r\n            -centerY,\r\n            endX - startX,\r\n            endY - startY,\r\n        );\r\n    }\r\n\r\n    const drawCircle = (stretchX, stretchY, radius) => {\r\n        ctx.beginPath();\r\n        ctx.ellipse(\r\n            0,\r\n            0,\r\n            stretchX * radius,\r\n            stretchY * radius,\r\n            0,\r\n            0,\r\n            2 * Math.PI\r\n        );\r\n        if (param.subTool.fill) {\r\n            ctx.fill();\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawPolygon = (stretchX, stretchY, radius) => {\r\n        ctx.beginPath();\r\n        for (let i = 0; i < param.subTool.sides + 2; i++) {\r\n            ctx.lineTo(\r\n                stretchX * radius * Math.cos((2 * Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle)),\r\n                stretchY * radius * Math.sin((2 * Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle))\r\n            );\r\n        };\r\n        if (param.subTool.fill) {\r\n            ctx.fill();\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawStar = (stretchX, stretchY, radius) => {\r\n        ctx.beginPath();\r\n        for (let i = 0; i < param.subTool.sides * 2 + 2; i++) {\r\n            if (i % 2 === 0) {\r\n                ctx.lineTo(\r\n                    stretchX * radius * Math.cos((Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle)),\r\n                    stretchY * radius * Math.sin((Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle))\r\n                );\r\n            } else {\r\n                ctx.lineTo(\r\n                    stretchX * radius / 3 * Math.cos((Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle)),\r\n                    stretchY * radius / 3 * Math.sin((Math.PI * i / param.subTool.sides) - Math.PI / 2 + (Math.PI / 180 * param.subTool.startAngle))\r\n                );\r\n            }\r\n        };\r\n        if (param.subTool.fill) {\r\n            ctx.fill();\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawArrow = (stretchX, stretchY, radius) => {\r\n        ctx.beginPath();\r\n        ctx.moveTo(stretchX * -radius * Math.cos(Math.PI / 8), stretchY * -radius * Math.sin(Math.PI / 8));\r\n        ctx.lineTo(0, stretchY * -radius * Math.sin(Math.PI / 8));\r\n        ctx.lineTo(0, stretchY * -radius);\r\n        ctx.lineTo(stretchX * radius, 0);\r\n        ctx.lineTo(0, stretchY * radius);\r\n        ctx.lineTo(0, stretchY * radius * Math.sin(Math.PI / 8));\r\n        ctx.lineTo(stretchX * -radius * Math.cos(Math.PI / 8), stretchY * radius * Math.sin(Math.PI / 8));\r\n        ctx.closePath();\r\n        if (param.subTool.fill) {\r\n            ctx.fill();\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawHeart = (stretchX, stretchY, radius) => {\r\n        if (param.subTool.stretch) {\r\n            if (stretchX > stretchY) {\r\n                ctx.scale(stretchX, 1);\r\n            } else {\r\n                ctx.scale(1, stretchY);\r\n            }\r\n        }\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, radius);\r\n        ctx.arc(-radius / 2, -radius / 5, radius / 2, 3 * Math.PI / 4, 0, false);\r\n        ctx.arc(radius / 2, -radius / 5, radius / 2, Math.PI, Math.PI / 4, false);\r\n        ctx.closePath();\r\n        if (param.subTool.fill) {\r\n            ctx.fill();\r\n        }\r\n        ctx.stroke();\r\n    }\r\n\r\n    const drawFunctions = {\r\n        drawBrush,\r\n        drawEraser,\r\n        drawSpray,\r\n        drawBucket,\r\n        drawText,\r\n        drawPipette,\r\n        drawSelect,\r\n        drawShape,\r\n        drawLine,\r\n        drawCurve,\r\n        drawCircle,\r\n        drawRectangle,\r\n        drawPolygon,\r\n        drawStar,\r\n        drawArrow,\r\n        drawHeart,\r\n    };\r\n    if (preview) {\r\n        ctx.clearRect(0, 0, width, height);\r\n        if (param.tool !== \"Magnifier\") {\r\n            if (param.tool === \"Bucket\" || param.tool === \"Pipette\") {\r\n                return;\r\n            } else if (param.tool === \"Spray\") {\r\n                drawEraser();\r\n            }\r\n            else {\r\n                drawFunctions[\"draw\" + param.tool]();\r\n            }\r\n        }\r\n    } else if (param.tool !== \"Magnifier\") {\r\n        drawFunctions[\"draw\" + param.tool]();\r\n    }\r\n}","import { handleDraw } from \"./handleDraw.js\";\r\nexport const handleTools = (canvas, cursor, setCursor, params, action, setAction) => {\r\n  switch (params.tool) {\r\n    case \"Brush\":\r\n    case \"Eraser\":\r\n      handleDraw(canvas, cursor, params, false);\r\n      if (action !== \"drawing\") {\r\n        setAction(\"drawing\");\r\n      }\r\n      break;\r\n    case \"Bucket\":\r\n      handleDraw(canvas, cursor, params, false);\r\n      setAction(\"finished\");\r\n      break;\r\n    case \"Spray\":\r\n      for (let i = 0; i < 10; i++) {\r\n        handleDraw(canvas, cursor, params, false);\r\n      }\r\n      setAction(\"spraying\");\r\n      break;\r\n    case \"Text\":\r\n      if (\r\n        cursor.current.x !== 0 &&\r\n        cursor.current.y !== 0\r\n      ) {\r\n        params.setText({\r\n          ...params.text, \r\n          state: \"preview\"\r\n        });\r\n      }\r\n      if (action === \"confirm\") {\r\n        handleDraw(canvas, cursor, params, false);\r\n        params.setText({ ...params.text, text: \"\", state: \"none\" });\r\n        setAction(\"finished\");\r\n      }\r\n      break;\r\n    case \"Pipette\":\r\n      handleDraw(canvas, cursor, params, false);\r\n      break;\r\n    case \"Magnifier\":\r\n      break;\r\n    case \"Select\":\r\n      if (action === \"clipping\" && params.clipboard.state !== \"carry\") {\r\n        handleDraw(canvas, cursor, params, false);\r\n      } else if (action === \"confirm\") {\r\n        handleDraw(canvas, cursor, params, false);\r\n        setAction(\"finished\");\r\n      }\r\n      break;\r\n    case \"Shape\":\r\n      if (params.subTool.shape === \"Curve\" && cursor.down) {\r\n        let newState = params.curveControls.state;\r\n        let newStart = params.curveControls.start;\r\n        let newEnd = params.curveControls.end;\r\n        let newControlPoint1 = params.curveControls.controlPoint1;\r\n        let newControlPoint2 = params.curveControls.controlPoint2;\r\n        if (params.curveControls.state===\"none\") {\r\n          setAction(\"settingPoints\");\r\n          newState = \"start\";\r\n          newStart = { x: cursor.start.x, y: cursor.start.y };\r\n          newEnd = { x: cursor.end.x, y: cursor.end.y };\r\n        }\r\n        else if(params.curveControls.state===\"start\") {\r\n            if(action===\"settingPoints\"){\r\n              newEnd = { x: cursor.end.x, y: cursor.end.y };\r\n            }else{\r\n              setAction(\"settingPoints\");\r\n              newState = \"point1\";\r\n              newControlPoint1 = { x: cursor.end.x, y: cursor.end.y };\r\n            }\r\n        } else if (params.curveControls.state === \"point1\") {\r\n          if(action===\"settingPoints\"){\r\n            newControlPoint1 = { x: cursor.end.x, y: cursor.end.y };\r\n          }else{\r\n            setAction(\"settingPoints\");\r\n            newState = \"point2\";\r\n            newControlPoint2 = { x: cursor.end.x, y: cursor.end.y };\r\n          }\r\n        } else if (params.curveControls.state === \"point2\") {\r\n          newControlPoint2 = { x: cursor.end.x, y: cursor.end.y };\r\n        }\r\n        params.setCurveControls({\r\n          ...params.curveControls,\r\n          state: newState,\r\n          start: newStart,\r\n          end: newEnd,\r\n          controlPoint1: newControlPoint1,\r\n          controlPoint2: newControlPoint2\r\n        });\r\n      } else if(params.subTool.shape === \"Curve\" && action===\"cancel\") {\r\n        params.setCurveControls({\r\n          state: \"none\",\r\n          start: { x: -1, y: -1 },\r\n          end: { x: -1, y: -1 },\r\n          controlPoint1: { x: -1, y: -1 },\r\n          controlPoint2: { x: -1, y: -1 }\r\n        })\r\n      }\r\n      \r\n\r\n      if (action === \"confirm\") {\r\n        handleDraw(canvas, cursor, params, false);\r\n        if (params.subTool.shape === \"Curve\") {\r\n          params.setCurveControls({\r\n            state: \"none\",\r\n            start: { x: -1, y: -1 },\r\n            end: { x: -1, y: -1 },\r\n            controlPoint1: { x: -1, y: -1 },\r\n            controlPoint2: { x: -1, y: -1 }\r\n          })\r\n        }\r\n        setAction(\"finished\");\r\n        setCursor({\r\n          ...cursor,\r\n          start: { x: 0, y: 0 },\r\n          end: { x: 0, y: 0 },\r\n        })\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};","export const handleTopMenu = (appMenu, setAppMenu, args, flag) => {\r\n    //Default App Menu  \r\n    const defaultAppMenu = {\r\n        \"File\": {\r\n            \"New\": {\r\n                \"action\": \"New\",\r\n                \"keybind\": \"Alt+N\",\r\n                \"disabled\": false\r\n            },/*\r\n            \"Open\": {\r\n                \"action\": \"Open\",\r\n                \"keybind\": \"Alt+O\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },*/\r\n            \"Download\": {\r\n                \"action\": \"Save\",\r\n                \"keybind\": \"Ctrl+Alt+S\",\r\n                \"disabled\": true\r\n            },\r\n            \"Download As\": {\r\n                \"action\": \"Save As\",\r\n                \"keybind\": \"Ctrl+Alt+Shift+S\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"Change Name\": {\r\n                \"action\": \"Change Name\",\r\n                \"keybind\": \"F2\",\r\n                \"disabled\": false\r\n            },\r\n            \"LineBreak1\":{},\r\n            \"Close\": {\r\n                \"action\": \"Close\",\r\n                \"keybind\": \"Alt+Shift+F4\",\r\n                \"disabled\": false\r\n            }\r\n        },\r\n        \"Edit\": {\r\n            \"Undo\": {\r\n                \"action\": \"Undo\",\r\n                \"keybind\": \"Ctrl+Z\",\r\n                \"disabled\": false\r\n            },\r\n            \"Redo\": {\r\n                \"action\": \"Redo\",\r\n                \"keybind\": \"Ctrl+Y\",\r\n                \"disabled\": false\r\n            }/*,\r\n            \"LineBreak1\":{},\r\n            \"Cut\": {\r\n                \"action\": \"Cut\",\r\n                \"keybind\": \"Ctrl+X\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"Copy\": {\r\n                \"action\": \"Copy\",\r\n                \"keybind\": \"Ctrl+C\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"Paste\": {\r\n                \"action\": \"Paste\",\r\n                \"keybind\": \"Ctrl+V\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"LineBreak2\":{},\r\n            \"Select All\": {\r\n                \"action\": \"SelectAll\",\r\n                \"keybind\": \"Ctrl+A\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"Clear\": {\r\n                \"action\": \"SelectClear\",\r\n                \"keybind\": \"Ctrl+Shift+C\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            }*/\r\n        },\r\n        \"View\": {\r\n            \"Zoom In\": {\r\n                \"action\": \"Zoom In\",\r\n                \"keybind\": \"Alt++\",\r\n                \"disabled\": false\r\n            },\r\n            \"Zoom Out\": {\r\n                \"action\": \"Zoom Out\",\r\n                \"keybind\": \"Alt+-\",\r\n                \"disabled\": false\r\n            },\r\n            \"Zoom Reset\": {\r\n                \"action\": \"Zoom Reset\",\r\n                \"keybind\": \"Alt+0\",\r\n                \"disabled\": true\r\n            },\r\n            \"LineBreak1\":{},\r\n            \"Tool Bar\": {\r\n                \"action\": \"toolBar\",\r\n                \"checkbox\": true,\r\n                \"disabled\": false\r\n            },\r\n            \"Content Bar\": {\r\n                \"action\": \"contentBar\",\r\n                \"checkbox\": true,\r\n                \"disabled\": false\r\n            },\r\n            \"Bottom Bar\": {\r\n                \"action\": \"bottomNavBar\",\r\n                \"checkbox\": true,\r\n                \"disabled\": false\r\n            },\r\n            \"Top Bar\": {\r\n                \"action\": \"topNavBar\",\r\n                \"checkbox\": true,\r\n                \"disabled\": false\r\n            }\r\n        }/*,\r\n        \"Help\": {\r\n            \"Help\": {\r\n                \"action\": \"help\",\r\n                \"keybind\": \"F1\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            },\r\n            \"About\": {\r\n                \"action\": \"about\",\r\n                \"disabled\": true,\r\n                \"title\": \"Not Implemented\"\r\n            }\r\n        }*/\r\n    }\r\n    if (appMenu === null) {\r\n        setAppMenu(defaultAppMenu);\r\n    }\r\n    else {\r\n        let updatedAppMenu = { ...appMenu };\r\n        switch (flag) {\r\n            case \"history\":\r\n                let hasHistory = args.history.canUndo || args.history.canRedo;\r\n                updatedAppMenu = {\r\n                    ...updatedAppMenu,\r\n                    \"File\": {\r\n                        ...updatedAppMenu[\"File\"],\r\n                        \"Download\": {\r\n                            ...updatedAppMenu[\"File\"][\"Download\"],\r\n                            \"disabled\": !hasHistory\r\n                        },\r\n                        \"Download As\": {\r\n                            ...updatedAppMenu[\"File\"][\"Download As\"],\r\n                            \"disabled\": !hasHistory\r\n                        }\r\n                    },\r\n                    \"Edit\": {\r\n                        ...updatedAppMenu[\"Edit\"],\r\n                        \"Undo\": {\r\n                            ...updatedAppMenu[\"Edit\"][\"Undo\"],\r\n                            \"disabled\": !args.history.canUndo\r\n                        },\r\n                        \"Redo\": {\r\n                            ...updatedAppMenu[\"Edit\"][\"Redo\"],\r\n                            \"disabled\": !args.history.canRedo\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case \"view\":\r\n                updatedAppMenu = {\r\n                    ...updatedAppMenu,\r\n                    \"View\": {\r\n                        ...updatedAppMenu[\"View\"],\r\n                        \"Tool Bar\": {\r\n                            ...updatedAppMenu[\"View\"][\"Tool Bar\"],\r\n                            \"checkbox\": args.view.toolBar\r\n                        },\r\n                        \"Content Bar\": {\r\n                            ...updatedAppMenu[\"View\"][\"Content Bar\"],\r\n                            \"checkbox\": args.view.contentBar\r\n                        },\r\n                        \"Bottom Bar\": {\r\n                            ...updatedAppMenu[\"View\"][\"Bottom Bar\"],\r\n                            \"checkbox\": args.view.bottomNavBar\r\n                        },\r\n                        \"Top Bar\": {\r\n                            ...updatedAppMenu[\"View\"][\"Top Bar\"],\r\n                            \"checkbox\": args.view.topNavBar\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n                case \"zoom\":\r\n                updatedAppMenu = {\r\n                    ...updatedAppMenu,\r\n                    \"View\": {\r\n                        ...updatedAppMenu[\"View\"],\r\n                        \"Zoom In\": {\r\n                            ...updatedAppMenu[\"View\"][\"Zoom In\"],\r\n                            \"disabled\": args.zoom === 4\r\n                        },\r\n                        \"Zoom Out\": {\r\n                            ...updatedAppMenu[\"View\"][\"Zoom Out\"],\r\n                            \"disabled\": args.zoom === 0.25\r\n                        },\r\n                        \"Zoom Reset\": {\r\n                            ...updatedAppMenu[\"View\"][\"Zoom Reset\"],\r\n                            \"disabled\": args.zoom === 1\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        setAppMenu(updatedAppMenu);\r\n    }\r\n}","import { handleTopMenu } from \"./handleTopMenu.js\";\r\n\r\nexport const handleHistory = (context, history, setHistory, command, appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers) => {\r\n    let updatedHistory = {};\r\n    let args = {};\r\n    const height = context.canvas.height;\r\n    const width = context.canvas.width;\r\n    const MAX_HISTORY_LENGTH = 50;\r\n\r\n    /*\r\n    history structure\r\n    {\r\n            layer[0].id:{\r\n                data: [imageData1, imageData2, ...], -> indicates the history of the layer\r\n                lastIndex: 0 -> indicates the last step of the layer\r\n            },\r\n            layer[1].id:{\r\n                data: [imageData1, imageData2, ...], -> indicates the history of the layer\r\n                lastIndex: 0 -> indicates the last step of the layer\r\n            },\r\n            ...\r\n    }\r\n    */\r\n\r\n    const updateStates = (updatedHistory, updatedLayers, canClose) => {\r\n        setHistory(updatedHistory)\r\n        setLayers(updatedLayers)\r\n        setCanClose(canClose);\r\n        handleTopMenu(appMenu, setAppMenu, args = { history: { ...updatedLayers[currLayer] } }, \"history\");\r\n    }\r\n\r\n\r\n    const undoAction = () => {\r\n        const id = layers[currLayer].id\r\n        updatedHistory = history\r\n        const targetCanvas = document.getElementById(`drawCanvasLayer${id}`).getContext(\"2d\")\r\n        targetCanvas.putImageData(history[id].data[history[id].lastIndex - 1], 0, 0)\r\n        const canUndoLayer = history[id].lastIndex - 1 > 0\r\n        updatedHistory[id].lastIndex--\r\n        let updatedLayers = layers\r\n        updatedLayers[currLayer] = {\r\n            ...updatedLayers[currLayer],\r\n            canUndo: canUndoLayer,\r\n            canRedo: true\r\n        }\r\n        updateStates(updatedHistory, updatedLayers, false)\r\n    }\r\n\r\n    const redoAction = () => {\r\n        let id = layers[currLayer].id\r\n        updatedHistory = history\r\n        const targetCanvas = document.getElementById(`drawCanvasLayer${id}`).getContext(\"2d\")\r\n        targetCanvas.putImageData(history[id].data[history[id].lastIndex + 1], 0, 0)\r\n        const canRedoLayer = history[id].lastIndex + 1 < history[id].data.length - 1\r\n        updatedHistory[id].lastIndex++\r\n        let updatedLayers = layers\r\n        updatedLayers[currLayer] = {\r\n            ...updatedLayers[currLayer],\r\n            canUndo: true,\r\n            canRedo: canRedoLayer\r\n        }\r\n        updateStates(updatedHistory, updatedLayers, false)\r\n    }\r\n\r\n    const saveAction = () => {\r\n        let id = layers[currLayer].id\r\n        updatedHistory = history\r\n        let targetCanvas = document.getElementById(`drawCanvasLayer${id}`).getContext(\"2d\")\r\n        //Checks if the layer does not have a history\r\n        if (!updatedHistory[id]) {\r\n            updatedHistory[id] = {\r\n                data: [targetCanvas.getImageData(0, 0, width, height)],\r\n                lastIndex: 0\r\n            }\r\n        } else {\r\n            //Checks if the save action is at the end of the history\r\n            if (updatedHistory[id].lastIndex === updatedHistory[id].data.length - 1) {\r\n                updatedHistory[id] = {\r\n                    data: [...updatedHistory[id].data, targetCanvas.getImageData(0, 0, width, height)],\r\n                    lastIndex: updatedHistory[id].data.length\r\n                }\r\n            }\r\n            //if not, remove all history after the current step\r\n            else{\r\n                updatedHistory[id].data.splice(updatedHistory[id].lastIndex + 1, 0, targetCanvas.getImageData(0, 0, width, height))\r\n                updatedHistory[id].lastIndex++\r\n            }\r\n        }\r\n        let updatedLayers = layers\r\n        updatedLayers[currLayer] = {\r\n            ...updatedLayers[currLayer],\r\n            canUndo: true,\r\n            canRedo: false\r\n        }\r\n        //if the history is too long, remove the oldest step and associated data\r\n        if (updatedHistory[id].data.length > MAX_HISTORY_LENGTH) {\r\n            updatedHistory[id].data.shift()\r\n            updatedHistory[id].lastIndex--\r\n        }\r\n        updateStates(updatedHistory, updatedLayers, false)\r\n    }\r\n\r\n    const clearAction = () => {\r\n        updatedHistory = {\r\n            0: {\r\n                data: [context.getImageData(0, 0, width, height)],\r\n                lastIndex: 0\r\n            }\r\n        }\r\n        const updatedLayers = [{ id: 0, name: \"Base\", visible: true, canUndo: false, canRedo: false }]\r\n        updateStates(updatedHistory, updatedLayers, true)\r\n    }\r\n\r\n    switch (command) {\r\n        case \"undo\":\r\n            undoAction();\r\n            break;\r\n        case \"redo\":\r\n            redoAction();\r\n            break;\r\n        case \"delete layer\":\r\n            //deleteLayer(currLayer);\r\n            break;\r\n        case \"save\":\r\n            saveAction();\r\n            break;\r\n        case \"clear\":\r\n            clearAction();\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n}","export const handleFile = (ctx, name, action, layers) => {\r\n\r\n    const height = ctx.canvas.height;\r\n    const width = ctx.canvas.width;\r\n\r\n    const saveFile = () => {\r\n        let finalCanvas = document.createElement(\"canvas\");\r\n        finalCanvas.width = width;\r\n        finalCanvas.height = height;\r\n        layers.forEach((layer) => {\r\n            if (layer.visible) {\r\n                finalCanvas.getContext(\"2d\").drawImage(\r\n                    document.getElementById(`drawCanvasLayer${layer.id}`),\r\n                    0,\r\n                    0\r\n                );\r\n            }\r\n        })\r\n        let downloadLink = document.createElement(\"a\");\r\n        downloadLink.setAttribute(\"download\", name + \".png\");\r\n        let dataURL = finalCanvas.getContext(\"2d\").canvas.toDataURL(\"image/png\");\r\n        let url = dataURL.replace(\r\n            /^data:image\\/png/,\r\n            \"data:application/octet-stream\",\r\n        );\r\n        downloadLink.setAttribute(\"href\", url);\r\n        downloadLink.click();\r\n    };\r\n    const newFile = () => {\r\n        const baseCanvas = document.getElementById(`drawCanvasLayer0`).getContext(\"2d\");\r\n        baseCanvas.fillStyle = \"#FFFFFF\";\r\n        baseCanvas.fillRect(0, 0, width, height);\r\n    };\r\n\r\n    switch (action) {\r\n        case \"new\":\r\n            newFile();\r\n            break;\r\n        case \"save\":\r\n            saveFile(ctx);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}","import { handleTools } from \"./handleTools.js\";\r\nimport { handleHistory } from \"./handleHistory.js\";\r\nimport { handleFile } from \"./handleFile.js\";\r\nimport { handleTopMenu } from \"./handleTopMenu.js\";\r\n\r\nimport { dialogNew } from \"../Dialog/new.jsx\";\r\nimport { dialogChangeName } from \"../Dialog/changeName.jsx\";\r\nimport { dialogSaveAs } from \"../Dialog/saveAs.jsx\";\r\nimport { dialogCloseApp } from \"../Dialog/closeApp.jsx\";\r\n//TODO: update history when new layer is created\r\nexport const handleAction = (props) => {\r\n  let args = {};\r\n  const {\r\n    canvas,\r\n    ctx,\r\n    context,\r\n    params,\r\n    action,\r\n    setAction,\r\n    appMenu,\r\n    setAppMenu,\r\n    appDialog,\r\n    setAppDialog,\r\n    contextMenu,\r\n    canClose,\r\n    setCanClose,\r\n    isSelected,\r\n    title,\r\n    setTitle,\r\n    currLayer,\r\n    setCurrLayer,\r\n    layers,\r\n    setLayers\r\n  } = props;\r\n\r\n  switch (action) {\r\n    case \"Startup\":\r\n      handleFile(ctx, context.name, \"new\", layers);\r\n      handleHistory(ctx, context.history, context.setHistory, \"clear\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      setAction(false);\r\n      break;\r\n    case \"New\":\r\n      dialogNew(context, setAction, setAppDialog);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"New Confirm\":\r\n      setAppDialog(null);\r\n      handleFile(ctx, context.name, \"new\", layers);\r\n      setCurrLayer(0);\r\n      handleHistory(ctx, context.history, context.setHistory, \"clear\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      context.setClipboard({\r\n        data: {},\r\n        state: \"none\",\r\n      })\r\n      setAction(false);\r\n      break;\r\n    case \"Save\":\r\n      handleFile(ctx, context.name, \"save\", layers);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Save As\":\r\n      dialogSaveAs(context, setAction, setAppDialog);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Change Name\":\r\n      dialogChangeName(context, setAction, setAppDialog);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Change Name Confirm\":\r\n      setTitle(context.name);\r\n      setAppDialog(null);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Undo\":\r\n      handleHistory(ctx, context.history, context.setHistory, \"undo\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Redo\":\r\n      handleHistory(ctx, context.history, context.setHistory, \"redo\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"New Layer\":\r\n      handleHistory(ctx, context.history, context.setHistory, \"save\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Delete Layer\":\r\n      handleHistory(ctx, context.history, context.setHistory, \"delete layer\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Zoom In\":\r\n      if (context.zoom < 4) {\r\n        if (context.zoom < 1) {\r\n          context.setZoom(context.zoom + 0.25);\r\n          args = { zoom: context.zoom + 0.25 };\r\n        } else {\r\n          context.setZoom(context.zoom + 1);\r\n          args = { zoom: context.zoom + 1 };\r\n        }\r\n        handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      }\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Zoom Out\":\r\n      if (context.zoom > 0.25) {\r\n        if (context.zoom <= 1) {\r\n          context.setZoom(context.zoom - 0.25);\r\n          args = { zoom: context.zoom - 0.25 };\r\n        } else {\r\n          context.setZoom(context.zoom - 1);\r\n          args = { zoom: context.zoom - 1 };\r\n        }\r\n        handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      }\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Zoom Reset\":\r\n      context.setZoom(1);\r\n      args = { zoom: 1 };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"Zoom Min\":\r\n      args = { zoom: 0.25 };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      setAction(false);\r\n      break;\r\n    case \"Zoom Max\":\r\n      args = { zoom: 4 };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      setAction(false);\r\n      break;\r\n    case \"Zoom Default\":\r\n      args = { zoom: 1 };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      setAction(false);\r\n      break;\r\n    case \"Zoom Change\":\r\n      args = { zoom: 2 } // Any value between 0.25 and 4 except for 1 will work to correctly update top menu\r\n      handleTopMenu(appMenu, setAppMenu, args, \"zoom\");\r\n      setAction(false);\r\n      break;\r\n    case \"Cut\":\r\n      //TODO\r\n      setAction(false);\r\n      break;\r\n    case \"Copy\":\r\n      //TODO\r\n      setAction(false);\r\n      break;\r\n    case \"Paste\":\r\n      //TODO\r\n      setAction(false);\r\n      break;\r\n    case \"Select All\":\r\n      //TODO\r\n      setAction(false);\r\n      break;\r\n    case \"Select Clear\":\r\n      //TODO\r\n      setAction(false);\r\n      break;\r\n    case \"finished\":\r\n      handleHistory(ctx, context.history, context.setHistory, \"save\", appMenu, setAppMenu, setCanClose, currLayer, layers, setLayers);\r\n      setAction(false);\r\n      break;\r\n    case \"drawing\":\r\n      if (context.cursor.down) {\r\n        handleTools(canvas, context.cursor, context.setCursor, params, action, setAction);\r\n      } else {\r\n        setAction(\"finished\");\r\n      }\r\n      break;\r\n    case \"spraying\":\r\n      if (context.cursor.down) {\r\n        //Allows for a continuous spray without moving the mouse\r\n        setTimeout(() => {\r\n          setAction(\"drawing\")\r\n        }, 100);\r\n      } else {\r\n        setAction(\"finished\");\r\n      }\r\n      break;\r\n    case \"settingPoints\":\r\n      if (context.cursor.down) {\r\n        handleTools(canvas, context.cursor, context.setCursor, params, action, setAction);\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"cancel\":\r\n    case \"clipping\":\r\n    case \"confirm\":\r\n      handleTools(canvas, context.cursor, context.setCursor, params, action, setAction);\r\n      break;\r\n    case false:\r\n      if (context.cursor.down) {\r\n        handleTools(canvas, context.cursor, context.setCursor, params, action, setAction);\r\n      }\r\n      break;\r\n    case \"topNavBar\":\r\n      context.setView({ ...context.view, topNavBar: !context.view.topNavBar });\r\n      args = { view: { ...context.view, topNavBar: !context.view.topNavBar } };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"view\");\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"contentBar\":\r\n      context.setView({ ...context.view, contentBar: !context.view.contentBar });\r\n      args = { view: { ...context.view, contentBar: !context.view.contentBar } };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"view\");\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"bottomNavBar\":\r\n      context.setView({ ...context.view, bottomNavBar: !context.view.bottomNavBar });\r\n      args = { view: { ...context.view, bottomNavBar: !context.view.bottomNavBar } };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"view\");\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    case \"toolBar\":\r\n      context.setView({ ...context.view, toolBar: !context.view.toolBar });\r\n      args = { view: { ...context.view, toolBar: !context.view.toolBar } };\r\n      handleTopMenu(appMenu, setAppMenu, args, \"view\");\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    /*case \"menuBar\":\r\n      context.setView({ ...context.view, menuBar: !context.view.menuBar });\r\n      args={view: { ...context.view, menuBar: !context.view.menuBar }};\r\n      handleTopMenu(appMenu, setAppMenu, args, \"view\");\r\n      setAction(false);\r\n      break;*/\r\n    case \"Close\":\r\n      if (!canClose) {\r\n        dialogCloseApp(setCanClose, setAction, setAppDialog);\r\n      }\r\n      break;\r\n    case \"Save and Close\":\r\n      handleFile(ctx, context.name, \"save\");\r\n      setCanClose(true);\r\n      setAction(\"Close\");\r\n      break;\r\n    case \"Cancel Dialog\":\r\n      if (context.clipboard.state === \"carry\" && context.tool === \"Select\") {\r\n        setAction(\"clipping\")\r\n      } else {\r\n        setAction(false);\r\n      }\r\n      break;\r\n    default:\r\n      setAction(false);\r\n      break;\r\n  }\r\n};","export const dialogNew = (context, setAction, setAppDialog) => {\r\n\r\n\r\n    context.setTempDimentions({ width: context.dimentions.width, height: context.dimentions.height });\r\n\r\n    let title = \"New File\";\r\n\r\n    const info = <>\r\n        <label htmlFor=\"New title\">Name</label>\r\n        <br />\r\n        <input\r\n            id=\"New title\"\r\n            type=\"text\"\r\n            value={context.name}\r\n            onChange={(e) => { context.setName(e.target.value); setAction(\"New\") }} />\r\n        <br />\r\n        <label htmlFor=\"Width\">Width</label>\r\n        <br />\r\n        <input\r\n            id=\"Width\"\r\n            type=\"number\"\r\n            value={context.tempDimentions.width}\r\n            onChange={(e) => { context.setTempDimentions({ ...context.tempDimentions, width: e.target.value }); setAction(\"New\") }} />\r\n        <br />\r\n        <label htmlFor=\"Height\">Height</label>\r\n        <br />\r\n        <input\r\n            id=\"Height\"\r\n            type=\"number\"\r\n            value={context.tempDimentions.height}\r\n            onChange={(e) => { context.setTempDimentions({ ...context.tempDimentions, height: e.target.value }); setAction(\"New\") }} />\r\n        <br />\r\n    </>;\r\n\r\n\r\n    const actions = {\r\n        Confirm: () => {\r\n            context.setDimentions({...context.tempDimentions});\r\n            setAction(\"New Confirm\");\r\n            setAppDialog(null);\r\n        },\r\n        Cancel: () => {\r\n            setAppDialog(null);\r\n            setAction(\"Cancel Dialog\");\r\n        }\r\n    }\r\n\r\n    setAppDialog({ title: title, info: info, actions: actions });\r\n}","export const dialogSaveAs = (context, setAction, setAppDialog) => {\r\n\r\n    const title = \"Download As\";\r\n\r\n    const info = <>\r\n        <label htmlFor=\"New Name\">Name</label>\r\n        <br />\r\n        <input\r\n            id=\"New name\"\r\n            type=\"text\"\r\n            value={context.name}\r\n            onChange={(e) => { context.setName(e.target.value); setAction(\"Change Name\") }} />\r\n        <br />\r\n    </>;\r\n\r\n    const actions = {\r\n        Confirm: () => {\r\n            setAction(\"Save\");\r\n            setAppDialog(null);\r\n        },\r\n        Cancel: () => {\r\n            setAppDialog(null);\r\n            setAction(\"Cancel Dialog\");\r\n        }\r\n    };\r\n\r\n    setAppDialog({ title: title, info: info, actions: actions });\r\n}","export const dialogChangeName = (context, setAction, setAppDialog) => {\r\n\r\n    const title = \"Change Name\";\r\n\r\n    const info = <>\r\n        <label htmlFor=\"New title\">Name</label>\r\n        <br />\r\n        <input\r\n            id=\"New title\"\r\n            type=\"text\"\r\n            value={context.name}\r\n            onChange={(e) => { context.setName(e.target.value); setAction(\"Change Name\") }} />\r\n        <br />\r\n    </>;\r\n\r\n    const actions = {\r\n        Confirm: () => {\r\n            setAction(\"Change Name Confirm\");\r\n            setAppDialog(null);\r\n        },\r\n        Cancel: () => {\r\n            setAppDialog(null);\r\n            setAction(\"Cancel Dialog\");\r\n        }\r\n    };\r\n\r\n    setAppDialog({ title: title, info: info, actions: actions });\r\n}","export const dialogCloseApp = (setCanClose, setAction, setAppDialog) => {\r\n    \r\n      setAppDialog({\r\n        title: \"Warning\",\r\n        info: \"Do you want to download the file before closing?\",\r\n        actions: {\r\n          Save: () => {\r\n            setAction(\"Save and Close\");\r\n            setAppDialog(null);\r\n          },\r\n          Close: () => {\r\n            setCanClose(true);\r\n            setAppDialog(null);\r\n          },\r\n          Cancel: () => {\r\n            setAppDialog(null);\r\n            setAction(\"Cancel Dialog\");\r\n          }\r\n        }\r\n      });\r\n}","import { useContext, useEffect } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { handleAction } from \"../Handlers/handleAction.jsx\";\r\nexport default function DrawCanvas({ action, setAction, appMenu, setAppMenu, appDialog, setAppDialog, contextMenu, canClose, setCanClose, title, setTitle }) {\r\n\r\n  const context = useContext(Context);\r\n  const layers = context.layers;\r\n  const setLayers = context.setLayers;\r\n  const currLayer = context.currLayer;\r\n  const setCurrLayer = context.setCurrLayer;\r\n  const tool = context.tool;\r\n  const subTool = context.subTool;\r\n  const curveControls = context.curveControls;\r\n  const setCurveControls = context.setCurveControls;\r\n  const size = context.size;\r\n  const selectedColor = context.color.selected;\r\n  const color1 = context.color[1];\r\n  const setColor1 = (v) => context.setColor({ ...context.color, 1: v, selected: v });\r\n  const color2 = context.color[2];\r\n  const setColor2 = (v) => context.setColor({ ...context.color, 2: v, selected: v });\r\n  const text = context.text;\r\n  const setText = context.setText;\r\n  const clipboard = context.clipboard;\r\n  const setClipboard = context.setClipboard;\r\n  const params = {\r\n    tool,\r\n    subTool,\r\n    curveControls,\r\n    setCurveControls,\r\n    size,\r\n    selectedColor,\r\n    color1,\r\n    setColor1,\r\n    color2,\r\n    setColor2,\r\n    text,\r\n    setText,\r\n    clipboard,\r\n    setClipboard,\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(layers[currLayer].id === undefined) return\r\n    let canvas = document.getElementById(`drawCanvasLayer${layers[currLayer].id}`);\r\n    let ctx = canvas.getContext(\"2d\", {\r\n      willReadFrequently: true,\r\n    });\r\n    handleAction({canvas, ctx, params, action, setAction, context, appMenu, setAppMenu, appDialog, setAppDialog, contextMenu, canClose, setCanClose, title, setTitle, currLayer, setCurrLayer, layers, setLayers});\r\n  }, [context.cursor, action]);\r\n\r\n  useEffect(() => {\r\n    let offsetX = (context.dimentions.width / 2 - context.zoom * context.dimentions.width / 2) * -1 / context.zoom;\r\n    let offsetY = (context.dimentions.height / 2 - context.zoom * context.dimentions.height / 2) * -1 / context.zoom;\r\n    document.getElementById(\"drawDocCheckersBackground\").style.transform = `scale(${context.zoom}) translate(${offsetX}px,${offsetY}px)`;\r\n    document.getElementById(\"previewCanvas\").style.transform = `scale(${context.zoom}) translate(${offsetX}px,${offsetY}px)`;\r\n    //document.getElementById(\"carryCanvas\").style.transform = `scale(${context.zoom}) translate(${offsetX}px,${offsetY}px)`;\r\n    document.getElementById(\"interfaceCanvas\").style.transform = `scale(${context.zoom}) translate(${offsetX}px,${offsetY}px)`;\r\n    const layers = document.getElementsByClassName(\"drawCanvasLayer\");\r\n    if (layers.length > 0) {\r\n      for (let i = 0; i < layers.length; i++) {\r\n        layers[i].style.transform = `scale(${context.zoom}) translate(${offsetX}px,${offsetY}px)`;\r\n      }\r\n    }\r\n  }, [context.zoom, context.cursor]);\r\n\r\n  return (\r\n    <>\r\n      <img\r\n        id=\"drawDocCheckersBackground\"\r\n        className=\"drawDocCheckersBackground\"\r\n        height={context.dimentions.height} width={context.dimentions.width}\r\n      />\r\n      {layers.length > 0 && layers.map((layer, index) => {\r\n        return (\r\n          <canvas\r\n            key={layer.id}\r\n            id={`drawCanvasLayer${layer.id}`}\r\n            className={\"drawCanvasLayer\"}\r\n            style={{ \r\n              display: layer.visible ? \"block\" : \"none\",\r\n              zIndex: index\r\n            }}\r\n            height={context.dimentions.height} width={context.dimentions.width}\r\n          />\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};","import { useRef, useEffect, useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { handleDraw } from \"../Handlers/handleDraw.js\";\r\n\r\nexport default function PreviewCanvas() {\r\n\r\n    const context = useContext(Context);\r\n    const canvasPreviewRef = useRef(null);\r\n    const cursor = context.cursor;\r\n    const tool = context.tool;\r\n    const subTool = context.subTool;\r\n    const curveControls = context.curveControls;\r\n    const setCurveControls = context.setCurveControls;\r\n    const size = context.size;\r\n    const selectedColor = context.color.selected;\r\n    const color1 = context.color[1];\r\n    const setColor1 = (v) => context.setColor({ ...context.color, 1: v });\r\n    const color2 = context.color[2];\r\n    const setColor2 = (v) => context.setColor({ ...context.color, 2: v });\r\n    const text = context.text;\r\n    const setText = context.setText;\r\n    const clipboard = context.clipboard;\r\n    const setClipboard = context.setClipboard;\r\n    const curLayer = context.currLayer;\r\n    const params = {\r\n        tool,\r\n        subTool,\r\n        curveControls,\r\n        setCurveControls,\r\n        size,\r\n        selectedColor,\r\n        color1,\r\n        setColor1,\r\n        color2,\r\n        setColor2,\r\n        text,\r\n        setText,\r\n        clipboard,\r\n        setClipboard,\r\n    };\r\n\r\n    useEffect(() => {\r\n        handleDraw(canvasPreviewRef.current, cursor, params, true);\r\n    }, [cursor, params]);\r\n\r\n    return (\r\n        <canvas\r\n            ref={canvasPreviewRef}\r\n            style={{ \r\n                color: params.selectedColor,\r\n                zIndex: curLayer\r\n            }}\r\n            id=\"previewCanvas\"\r\n            height={context.dimentions.height}\r\n            width={context.dimentions.width}\r\n        />\r\n    );\r\n};","import { useState, useEffect, useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\n\r\nexport default function SelectionCanvas() {\r\n    const context = useContext(Context);\r\n    const cursor = context.cursor;\r\n    const setCursor = context.setCursor;\r\n    const zoom = context.zoom;\r\n    const tool = context.tool;\r\n    const subtool = context.subTool;\r\n    const setSubTool = context.setSubTool;\r\n    const layers = context.layers;\r\n    const clipboard = context.clipboard;\r\n\r\n    const [selectionBox, setSelectionBox] = useState({\r\n        left: 0 + \"px\",\r\n        top: 0 + \"px\",\r\n        height: 0 + \"px\",\r\n        width: 0 + \"px\",\r\n        canUsePointer: true\r\n    })\r\n\r\n    const [selectionCircle, setSelectionCircle] = useState({\r\n        left: 0 + \"px\",\r\n        top: 0 + \"px\",\r\n        diameter: 0 + \"px\"\r\n    })\r\n\r\n    const [selectionEllipse, setSelectionEllipse] = useState({\r\n        left: 0 + \"px\",\r\n        top: 0 + \"px\",\r\n        width: 0 + \"px\",\r\n        height: 0 + \"px\"\r\n    })\r\n\r\n    const [resizeDelta, setResizeDelta] = useState([0, 0, true])\r\n    const [dragDelta, setDragDelta] = useState([0, 0, 0, 0])\r\n    const [rotateStartPos, setRotateStartPos] = useState([0, 0, 0])\r\n\r\n    //Note: Firefox returns zero values during a drag event, therefore, \r\n    // in order to avoid incorrect values, values of zero are ignored\r\n    const getCursorFromEvent = (e) => {\r\n        let cursorX, cursorY, flag = false;\r\n        if (e.button === 0) {\r\n            if (e.clientX !== 0 && e.clientY !== 0) {\r\n                cursorX = e.clientX;\r\n                cursorY = e.clientY;\r\n                flag = true;\r\n            }\r\n        } else {\r\n            if (e.touches[0].clientX !== 0 && e.touches[0].clientY !== 0) {\r\n                cursorX = e.touches[0].clientX;\r\n                cursorY = e.touches[0].clientY;\r\n                flag = true;\r\n            }\r\n        }\r\n        if (!flag) {\r\n            return [0, 0, false]\r\n        } else {\r\n            let canvas = document.getElementById(\"interfaceCanvas\");\r\n            let ctx = canvas.getContext('2d', { alpha: true });\r\n            let boundary = canvas.getBoundingClientRect();\r\n            const scaleX = (ctx.canvas.width / boundary.width);\r\n            const scaleY = (ctx.canvas.height / boundary.height);\r\n            cursorX = (cursorX - boundary.left) * scaleX;\r\n            cursorY = (cursorY - boundary.top) * scaleY;\r\n            return [cursorX, cursorY, true]\r\n        }\r\n    }\r\n\r\n    const handleResizeStart = (e, direction) => {\r\n        e.stopPropagation();\r\n        setCursor({ ...cursor, selecting: true });\r\n        const cursorPos = getCursorFromEvent(e);\r\n        let newDeltaX = 0;\r\n        let newDeltaY = 0;\r\n        if (cursorPos[2] === false) return\r\n        if (direction.indexOf(\"N\") !== -1) {\r\n            newDeltaY = cursorPos[1] - Math.min(cursor.start.y, cursor.end.y);\r\n        } else if (direction.indexOf(\"S\") !== -1) {\r\n            newDeltaY = cursorPos[1] - Math.max(cursor.start.y, cursor.end.y);\r\n        }\r\n        if (direction.indexOf(\"W\") !== -1) {\r\n            newDeltaX = cursorPos[0] - Math.min(cursor.start.x, cursor.end.x);\r\n        } else if (direction.indexOf(\"E\") !== -1) {\r\n            newDeltaX = cursorPos[0] - Math.max(cursor.start.x, cursor.end.x);\r\n        }\r\n        setResizeDelta([newDeltaX, newDeltaY]);\r\n    }\r\n\r\n    function handleResizeCommon(e, cursorPos, direction) {\r\n        // check for inverted axis\r\n        let invertX = false, invertY = false;\r\n        if (cursor.start.x > cursor.end.x) invertX = true;\r\n        if (cursor.start.y > cursor.end.y) invertY = true;\r\n        // calculate difference between cursor and selectionBox\r\n        let newStartX = cursor.start.x, newStartY = cursor.start.y, newEndX = cursor.end.x, newEndY = cursor.end.y;\r\n        if (direction.indexOf(\"N\") !== -1) {\r\n            invertY ? newEndY = cursorPos[1] - resizeDelta[1] : newStartY = cursorPos[1] - resizeDelta[1]\r\n        } else if (direction.indexOf(\"S\") !== -1) {\r\n            invertY ? newStartY = cursorPos[1] - resizeDelta[1] : newEndY = cursorPos[1] - resizeDelta[1]\r\n        }\r\n        if (direction.indexOf(\"E\") !== -1) {\r\n            invertX ? newStartX = cursorPos[0] - resizeDelta[0] : newEndX = cursorPos[0] - resizeDelta[0]\r\n        } else if (direction.indexOf(\"W\") !== -1) {\r\n            invertX ? newEndX = cursorPos[0] - resizeDelta[0] : newStartX = cursorPos[0] - resizeDelta[0]\r\n        }\r\n        return [newStartX, newStartY, newEndX, newEndY]\r\n    }\r\n\r\n    const handleResize = (e, direction) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const cursorPos = getCursorFromEvent(e);\r\n        if (cursorPos[2] === false) return\r\n        const resizeResult = handleResizeCommon(e, cursorPos, direction);\r\n        setCursor({ ...cursor, start: { x: resizeResult[0], y: resizeResult[1] }, end: { x: resizeResult[2], y: resizeResult[3] } })\r\n    }\r\n\r\n    const handleResizeEnd = (e, direction) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const cursorPos = getCursorFromEvent(e);\r\n        if (cursorPos[2] === false) return\r\n        const resizeResult = handleResizeCommon(e, cursorPos, direction);\r\n        setCursor({ ...cursor, start: { x: resizeResult[0], y: resizeResult[1] }, end: { x: resizeResult[2], y: resizeResult[3] }, selecting: false })\r\n    }\r\n\r\n    const handleDragStart = (e) => {\r\n        e.stopPropagation();\r\n        setCursor({ ...cursor, selecting: true });\r\n        const cursorPos = getCursorFromEvent(e);\r\n        if (cursorPos[2] === false) return\r\n        if (e.target.id !== \"drawDocSelectionBox\"\r\n            && e.target.id !== \"drawDocSelectionEllipse\"\r\n            && e.target.id !== \"drawDocSelectionCircle\"\r\n            && e.target.id !== \"drawDocSelectionBoxDragPivot\") {\r\n            return\r\n        }\r\n        let startDeltaX = 0, startDeltaY = 0, endDeltaX = 0, endDeltaY = 0;\r\n        startDeltaX = cursorPos[0] - cursor.start.x;\r\n        startDeltaY = cursorPos[1] - cursor.start.y;\r\n        endDeltaX = cursorPos[0] - cursor.end.x;\r\n        endDeltaY = cursorPos[1] - cursor.end.y;\r\n        setDragDelta([startDeltaX, startDeltaY, endDeltaX, endDeltaY]);\r\n    }\r\n\r\n    const handleDrag = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const cursorPos = getCursorFromEvent(e);\r\n        if (cursorPos[2] === false) return\r\n        if (e.target.id !== \"drawDocSelectionBox\"\r\n            && e.target.id !== \"drawDocSelectionEllipse\"\r\n            && e.target.id !== \"drawDocSelectionCircle\"\r\n            && e.target.id !== \"drawDocSelectionBoxDragPivot\") {\r\n            return\r\n        }\r\n        setCursor({\r\n            ...cursor,\r\n            start: { x: cursorPos[0] - dragDelta[0], y: cursorPos[1] - dragDelta[1] },\r\n            end: { x: cursorPos[0] - dragDelta[2], y: cursorPos[1] - dragDelta[3] }\r\n        })\r\n    }\r\n\r\n    const handleDragEnd = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const cursorPos = getCursorFromEvent(e);\r\n        if (cursorPos[2] === false) return\r\n        if (e.target.id !== \"drawDocSelectionBox\"\r\n            && e.target.id !== \"drawDocSelectionEllipse\"\r\n            && e.target.id !== \"drawDocSelectionCircle\"\r\n            && e.target.id !== \"drawDocSelectionBoxDragPivot\") {\r\n            return\r\n        }\r\n        setCursor({\r\n            ...cursor,\r\n            start: { x: cursorPos[0] - dragDelta[0], y: cursorPos[1] - dragDelta[1] },\r\n            end: { x: cursorPos[0] - dragDelta[2], y: cursorPos[1] - dragDelta[3] },\r\n            selecting: false\r\n        })\r\n    }\r\n\r\n    const handleCircleRotateStart = (e) => {\r\n        setCursor({ ...cursor, selecting: true });\r\n        const cursorPos = getCursorFromEvent(e);\r\n        const boundary = document.getElementById(\"previewCanvas\").getBoundingClientRect();\r\n        if (cursorPos[2] === false) return\r\n        setRotateStartPos([cursorPos[0], cursorPos[1], subtool.angle, boundary.left, boundary.top]);\r\n    }\r\n\r\n    const handleCircleRotate = (e) => {\r\n        e.preventDefault();\r\n        const cursorPos = getCursorFromEvent(e);\r\n        //TODO: cursor position must be adjusted to indicate its relative position instead of absolute\r\n        if (cursorPos[2] === false) return\r\n        let top = Number(selectionCircle.top.slice(0, -2));\r\n        let left = Number(selectionCircle.left.slice(0, -2));\r\n        let diameter = Number(selectionCircle.diameter.slice(0, -2));\r\n        let centerX = left + (diameter / 2) + rotateStartPos[3];\r\n        let centerY = top + (diameter / 2) + rotateStartPos[4];\r\n        let horizontal = centerX > cursorPos[0] ? centerX - cursorPos[0] : cursorPos[0] - centerX;\r\n        let vertical = centerY > cursorPos[1] ? centerY - cursorPos[1] : cursorPos[1] - centerY;\r\n        let hypothenuse = Math.sqrt(Math.pow(horizontal, 2) + Math.pow(vertical, 2));\r\n        let currAngleRad = Math.acos((Math.pow(horizontal, 2) + Math.pow(hypothenuse, 2) - Math.pow(vertical, 2)) / (2 * horizontal * hypothenuse))\r\n        let currAngleDeg = currAngleRad / (Math.PI / 180)\r\n        let angle = 0;\r\n        if (cursorPos[0] > centerX && cursorPos[1] < centerY) angle = 90 - currAngleDeg\r\n        else if (cursorPos[0] > centerX && cursorPos[1] > centerY) angle = 90 + currAngleDeg\r\n        else if (cursorPos[0] < centerX && cursorPos[1] > centerY) angle = 180 + 90 - currAngleDeg\r\n        else if (cursorPos[0] < centerX && cursorPos[1] < centerY) angle = 270 + currAngleDeg\r\n        setSubTool({ ...subtool, angle: angle })\r\n    }\r\n\r\n    const handleCircleRotateEnd = (e) => {\r\n        handleCircleRotate(e);\r\n        setCursor({ ...cursor, selecting: false });\r\n    }\r\n\r\n    //Handles position and sizing calculations for each selection div\r\n    useEffect(() => {\r\n        if (tool !== \"Select\" || clipboard.state !== \"carry\") {\r\n            let left = Math.min(cursor.start.x, cursor.end.x);\r\n            let right = Math.max(cursor.start.x, cursor.end.x);\r\n            let top = Math.min(cursor.start.y, cursor.end.y);\r\n            let bottom = Math.max(cursor.start.y, cursor.end.y);\r\n            let height = bottom - top;\r\n            let width = right - left;\r\n            setSelectionBox({\r\n                ...selectionBox,\r\n                left: Math.floor(left * zoom) + \"px\",\r\n                top: Math.floor(top * zoom) + \"px\",\r\n                width: Math.floor(width * zoom) + \"px\",\r\n                height: Math.floor(height * zoom) + \"px\"\r\n            })\r\n            let centerLeft = left + Math.floor(width / 2);\r\n            let centerTop = top + Math.floor(height / 2);\r\n            let diameter = Math.min(width, height);\r\n            setSelectionCircle({\r\n                ...selectionCircle,\r\n                left: Math.floor((centerLeft - (diameter / 2)) * zoom) + \"px\",\r\n                top: Math.floor((centerTop - (diameter / 2)) * zoom) + \"px\",\r\n                diameter: Math.floor(diameter * zoom) + \"px\"\r\n            })\r\n            setSelectionEllipse({\r\n                ...selectionEllipse,\r\n                left: Math.floor(left * zoom) + \"px\",\r\n                top: Math.floor(top * zoom) + \"px\",\r\n                width: Math.floor(width * zoom) + \"px\",\r\n                height: Math.floor(height * zoom) + \"px\"\r\n            })\r\n        } else {\r\n            setSelectionBox({\r\n                ...selectionBox,\r\n                left: Math.floor(cursor.end.x * zoom) + \"px\",\r\n                top: Math.floor(cursor.end.y * zoom) + \"px\",\r\n                width: Math.floor(clipboard.data.width * zoom) + \"px\",\r\n                height: Math.floor(clipboard.data.height * zoom) + \"px\"\r\n            })\r\n        }\r\n    }, [cursor, zoom, tool, clipboard.state]);\r\n\r\n    return (\r\n        <>\r\n            {(tool === \"Select\" || tool === \"Shape\" || tool === \"Text\") &&\r\n                <div\r\n                    id=\"drawDocSelectionBox\"\r\n                    style={{\r\n                        top: selectionBox.top,\r\n                        left: selectionBox.left,\r\n                        width: selectionBox.width,\r\n                        height: selectionBox.height,\r\n                        pointerEvents: cursor.down ? \"none\" : \"auto\",\r\n                        zIndex: layers.length + 2\r\n                    }}\r\n                    draggable\r\n                    onDragStart={(e) => { if (!cursor.down) handleDragStart(e) }}\r\n                    onDrag={(e) => { if (!cursor.down) handleDrag(e) }}\r\n                    onDragEnd={(e) => { if (!cursor.down) handleDragEnd(e) }}\r\n                >\r\n                    {tool === \"Text\" &&\r\n                        <div id=\"drawDocSelectionBoxDragPivot\" />\r\n                    }\r\n                    {(tool !== \"Select\" || clipboard.state !== \"carry\") &&\r\n                        <>\r\n                            <div\r\n                                id=\"drawDocSelectionBoxNW\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"NW\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"NW\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"NW\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxN\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"N\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"N\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"N\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxNE\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"NE\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"NE\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"NE\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxE\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"E\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"E\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"E\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxSE\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"SE\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"SE\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"SE\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxS\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"S\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"S\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"S\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxSW\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"SW\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"SW\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"SW\") }}\r\n                            />\r\n                            <div\r\n                                id=\"drawDocSelectionBoxW\"\r\n                                draggable\r\n                                onDragStart={(e) => { if (!cursor.down) handleResizeStart(e, \"W\") }}\r\n                                onDrag={(e) => { if (!cursor.down) handleResize(e, \"W\") }}\r\n                                onDragEnd={(e) => { if (!cursor.down) handleResizeEnd(e, \"W\") }}\r\n                            />\r\n                        </>}\r\n                </div>\r\n            }\r\n            {tool === \"Shape\" && subtool.type !== \"Line\" && subtool.type !== \"Curve\" && subtool.stretch &&\r\n                <div\r\n                    id=\"drawDocSelectionEllipse\"\r\n                    style={{\r\n                        top: selectionEllipse.top,\r\n                        left: selectionEllipse.left,\r\n                        width: selectionEllipse.width,\r\n                        height: selectionEllipse.height,\r\n                        rotate: subtool.angle + \"deg\",\r\n                        zIndex: layers.length + 2\r\n                    }}\r\n                    draggable\r\n                    onDragStart={(e) => { if (!cursor.down) handleDragStart(e) }}\r\n                    onDrag={(e) => { if (!cursor.down) handleDrag(e) }}\r\n                    onDragEnd={(e) => { if (!cursor.down) handleDragEnd(e) }}\r\n                >\r\n                </div>}\r\n            {tool === \"Shape\" && subtool.type !== \"Line\" && subtool.type !== \"Curve\" &&\r\n                <div\r\n                    id=\"drawDocSelectionCircle\"\r\n                    style={{\r\n                        top: selectionCircle.top,\r\n                        left: selectionCircle.left,\r\n                        width: selectionCircle.diameter,\r\n                        height: selectionCircle.diameter,\r\n                        rotate: subtool.angle + \"deg\",\r\n                        zIndex: layers.length + 2\r\n                    }}\r\n                    draggable\r\n                    onDragStart={(e) => { if (!cursor.down) handleDragStart(e) }}\r\n                    onDrag={(e) => { if (!cursor.down) handleDrag(e) }}\r\n                    onDragEnd={(e) => { if (!cursor.down) handleDragEnd(e) }}\r\n                >\r\n                    <div\r\n                        id=\"drawDocSelectionCirclePoint\"\r\n                        draggable\r\n                        onDragStart={(e) => { if (!cursor.down) handleCircleRotateStart(e) }}\r\n                        onDrag={(e) => { if (!cursor.down) handleCircleRotate(e) }}\r\n                        onDragEnd={(e) => { if (!cursor.down) handleCircleRotateEnd(e) }}\r\n                    />\r\n                </div>}\r\n            {tool === \"Text\" && !cursor.down &&\r\n                <textarea id=\"drawDocSelectionBoxText\"\r\n                    style={{\r\n                        top: selectionBox.top,\r\n                        left: selectionBox.left,\r\n                        width: selectionBox.width,\r\n                        height: selectionBox.height,\r\n                        caretColor: context.text.color,\r\n                        fontSize: context.size * context.zoom + \"px\",\r\n                        fontFamily: context.text.fontFamily,\r\n                        lineHeight: context.text.lineHeight,\r\n                        zIndex: layers.length + 2\r\n                    }}\r\n                    spellCheck={false}\r\n                    value={context.text.text}\r\n                    onChange={(e) => context.setText({ ...context.text, text: e.target.value })}\r\n                />\r\n            }\r\n        </>\r\n    )\r\n}","import { useState, useEffect, useContext, Fragment } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { RiEyeCloseFill, RiEyeFill, RiEditLine } from \"react-icons/ri\";\r\nimport { FaTrashCan } from \"react-icons/fa6\";\r\nimport { BiUndo, BiRedo } from \"react-icons/bi\";\r\n\r\nexport default function LayersWindow(props) {\r\n\r\n    const action = props.action;\r\n    const setAction = props.setAction;\r\n    const contextMenu = props.contextMenu;\r\n\r\n    const context = useContext(Context);\r\n    const history = context.history;\r\n    const currLayer = context.currLayer;\r\n    const setCurrLayer = context.setCurrLayer;\r\n    const layers = context.layers;\r\n    const setLayers = context.setLayers;\r\n    const lastLayer = context.lastLayer;\r\n    const setLastLayer = context.setLastLayer;\r\n\r\n    const [layersCanvasPreviews, setLayersCanvasPreviews] = useState([]);\r\n    const [renameLayerIndex, setRenameLayerIndex] = useState(-1);\r\n    const [dragTargetIndex, setDragTargetIndex] = useState(-1);\r\n    const [dropTargetIndex, setDropTargetIndex] = useState(-1);\r\n\r\n\r\n    const getImageFromCanvasRef = (id, notMain) => {\r\n        const canvas = document.getElementById(id);\r\n        const ctx = notMain ?\r\n            canvas.getContext('2d', { alpha: true }) :\r\n            canvas.getContext('2d', { alpha: false });\r\n        return ctx.canvas.toDataURL(\"image/png\")\r\n    }\r\n\r\n    const createNewLayer = () => {\r\n        const newLayer = {\r\n            id: lastLayer + 1,\r\n            name: `Layer ${lastLayer + 1}`,\r\n            visible: true,\r\n            canUndo: false,\r\n            canRedo: false\r\n        }\r\n        setLayers([...layers, newLayer]);\r\n        setCurrLayer(layers.length);\r\n        setLastLayer(lastLayer + 1);\r\n        setAction(\"New Layer\");\r\n    }\r\n\r\n    const renameLayer = (e, index) => {\r\n        const newLayers = [...layers];\r\n        newLayers[index].name = e.target.value;\r\n        setLayers(newLayers);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (renameLayerIndex !== -1) {\r\n            const target = document.getElementById(`drawDocLayerNameInput${renameLayerIndex}`);\r\n            target.focus();\r\n            target.select();\r\n            target.addEventListener('blur', () => setRenameLayerIndex(-1));\r\n            target.addEventListener(\"keydown\", (e) => {\r\n                e.key === \"Enter\" && setRenameLayerIndex(-1);\r\n            });\r\n            return () => {\r\n                target.removeEventListener('blur', () => setRenameLayerIndex(-1))\r\n                target.removeEventListener(\"keydown\", (e) => {\r\n                    e.key === \"Enter\" && setRenameLayerIndex(-1);\r\n                });\r\n            };\r\n        }\r\n    }, [renameLayerIndex])\r\n\r\n    const toggleVisibility = (index) => {\r\n        const newLayers = [...layers];\r\n        newLayers[index].visible = !newLayers[index].visible;\r\n        setLayers(newLayers);\r\n    }\r\n\r\n    const deleteLayer = (index) => {\r\n        setLayers(layers.filter((_layer, i) => i !== index));\r\n        if (index === currLayer || currLayer > layers.length - 2) {\r\n            setCurrLayer(0);\r\n        }\r\n        setAction(\"Delete Layer\");\r\n    }\r\n\r\n    const handleLayerDragOver = (e, index) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        e.dataTransfer.dropEffect = \"move\";\r\n        setDropTargetIndex(index);\r\n    }\r\n\r\n    const handleLayerDrop = (e, index) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        let newLayers = [];\r\n        const draggedLayer = layers[dragTargetIndex];\r\n        //Base layer is not allowed to be dragged, terminates the drag\r\n        //If the target has been dropped on itself, terminates the drag\r\n        if (dragTargetIndex < 1 || dragTargetIndex === index) {\r\n            setDropTargetIndex(-1);\r\n            setDragTargetIndex(-1);\r\n            return\r\n        }\r\n        //No Layer other than Base is allowed in the start of the Array\r\n        else if (index === 0) {\r\n            newLayers = [\r\n                layers[0],\r\n                draggedLayer,\r\n                ...layers.filter((_layer, i) => i !== dragTargetIndex && i !== 0)\r\n            ];\r\n        }\r\n        //Indicates the drop zone is not a layer window, thus its at the end of the Array\r\n        else if (index === layers.length) {\r\n            newLayers = [\r\n                ...layers.filter((_layer, i) => i !== dragTargetIndex),\r\n                draggedLayer\r\n            ]\r\n        }\r\n        //If the target has been dropped on the last layer, places the dragged layer before the last layer\r\n        else if (index === layers.length - 1) {\r\n            const dropLayer = layers[index];\r\n            newLayers = [\r\n                ...layers.filter((_layer, i) => i < index && i !== dragTargetIndex),\r\n                draggedLayer,\r\n                dropLayer\r\n            ]\r\n        }\r\n        //If the target has been dropped on another layer other than itself or base layer\r\n        else {\r\n            const dropLayer = layers[index];\r\n            newLayers = [\r\n                ...layers.filter((_layer, i) => i < index && i !== dragTargetIndex),\r\n                index < dragTargetIndex ? draggedLayer : dropLayer,\r\n                index > dragTargetIndex ? draggedLayer : dropLayer,\r\n                ...layers.filter((_layer, i) => i > index && i !== dragTargetIndex)\r\n            ]\r\n        }\r\n        setLayers(newLayers);\r\n        setDropTargetIndex(-1);\r\n        setDragTargetIndex(-1);\r\n    }\r\n\r\n    useEffect(() => {\r\n        layers.length > 0 && setLayersCanvasPreviews(layers.map((layer, index) => getImageFromCanvasRef(`drawCanvasLayer${layer.id}`, true)));\r\n    }, [history, layers, action]);\r\n\r\n    return (\r\n        <div id=\"drawDocLayersWindow\"\r\n            onDragOver={(e) => { handleLayerDragOver(e, layers.length) }}\r\n            onDrop={(e) => { handleLayerDrop(e, layers.length); }}\r\n        >\r\n            {layers.map((layer, index) => {\r\n                return (\r\n                    <Fragment key={layer.id}>\r\n                        {index !== 0 && <hr style={{ display: dropTargetIndex === index ? \"block\" : \"none\" }} />}\r\n                        <div\r\n                            className=\"drawDocLayersWindowLayer\"\r\n                            draggable={index !== 0}\r\n                            onDragStart={(e) => setDragTargetIndex(index)}\r\n                            onDrag={(e) => e.preventDefault()}\r\n                            onDragOver={(e) => { handleLayerDragOver(e, index) }}\r\n                            onDrop={(e) => { handleLayerDrop(e, index) }}\r\n                            style={{ cursor: index === 0 ? \"default\" : \"grab\" }}\r\n                        >\r\n                            <img\r\n                                src={layersCanvasPreviews[index] ? layersCanvasPreviews[index] : \"\"}\r\n                                className=\"drawDocCheckersBackground\"\r\n                                onClick={() => setCurrLayer(index)}\r\n                                draggable={index !== 0}\r\n                            />\r\n                            <div>\r\n                                <div>\r\n                                    <input\r\n                                        type=\"radio\"\r\n                                        value={index}\r\n                                        checked={currLayer === index}\r\n                                        onChange={() => setCurrLayer(index)}\r\n                                    />\r\n                                    <span\r\n                                        style={{\r\n                                            textDecoration: index === currLayer ? \"underline\" : \"none\",\r\n                                            display: index === renameLayerIndex ? \"none\" : \"inline-block\"\r\n                                        }}\r\n                                    >\r\n                                        {layer.name}\r\n                                    </span>\r\n                                    <input\r\n                                        style={{ display: index === renameLayerIndex ? \"inline-block\" : \"none\" }}\r\n                                        id={`drawDocLayerNameInput${index}`}\r\n                                        type=\"text\"\r\n                                        value={layer.name}\r\n                                        onChange={(e) => {\r\n                                            renameLayer(e, index);\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <button\r\n                                        title=\"Undo Layer\"\r\n                                        aria-label=\"Undo Layer\"\r\n                                        disabled={!layer.canUndo}\r\n                                        onClick={() => { setCurrLayer(index); setAction(\"Undo\") }}\r\n                                    >\r\n                                        <BiUndo />\r\n                                    </button>\r\n                                    <button\r\n                                        title=\"Redo Layer\"\r\n                                        aria-label=\"Redo Layer\"\r\n                                        disabled={!layer.canRedo}\r\n                                        onClick={() => { setCurrLayer(index); setAction(\"Redo\") }}\r\n                                    >\r\n                                        <BiRedo />\r\n                                    </button>\r\n                                </div>\r\n                                <div>\r\n                                    <button\r\n                                        title=\"Rename Layer\"\r\n                                        aria-label=\"Rename Layer\"\r\n                                        disabled={index === 0}\r\n                                        onClick={() => setRenameLayerIndex(index)}\r\n                                    >\r\n                                        <RiEditLine />\r\n                                    </button>\r\n                                    <button\r\n                                        title=\"Toggle Visibility\"\r\n                                        aria-label=\"Toggle Visibility\"\r\n                                        onClick={() => toggleVisibility(index)}\r\n                                    >\r\n                                        {layer.visible ? <RiEyeFill /> : <RiEyeCloseFill />}\r\n                                    </button>\r\n                                    <button\r\n                                        title=\"Delete Layer\"\r\n                                        aria-label=\"Delete Layer\"\r\n                                        disabled={index === 0}\r\n                                        onClick={() => deleteLayer(index)}\r\n                                    >\r\n                                        <FaTrashCan />\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {index === 0 && <hr style={{ display: dropTargetIndex === index ? \"block\" : \"none\" }} />}\r\n                    </Fragment>)\r\n            })\r\n            }\r\n            {dropTargetIndex === layers.length && <hr />}\r\n            <button onClick={() => { createNewLayer() }}>\r\n                New Layer\r\n            </button>\r\n        </div>);\r\n};","import { useState, useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { GoTriangleLeft, GoTriangleRight } from \"react-icons/go\";\r\nimport LayersWindow from \"./LayersWindow.jsx\";\r\n\r\nexport default function ContentBar({ action, setAction, contextMenu }) {\r\n    const context = useContext(Context);\r\n    const [open, setOpen] = useState(false);\r\n    const [selected, setSelected] = useState(\"Layers\");\r\n\r\n    const handleContextMenu = (event) => {\r\n        event.preventDefault();\r\n        let content = { \"Hide\": { action:()=>setAction(\"contentBar\")} };\r\n        contextMenu.setOpen();\r\n        contextMenu.setPosition(event.clientX, event.clientY);\r\n        contextMenu.setContent(content);\r\n    };\r\n\r\n    if (context.view.contentBar) {\r\n        return (\r\n            <div id=\"drawDocContentBar\" onContextMenu={(event) => handleContextMenu(event)}>\r\n                <nav>\r\n                    <button onClick={() => setOpen(!open)}>{open ? <GoTriangleRight /> : <GoTriangleLeft />}</button>\r\n                    <ul>\r\n                        <li onClick={() => { setSelected(\"Layers\"); setOpen(true); }} style={{ textDecoration: selected === \"Layers\" ? \"underline\" : \"none\" }}>Layers</li>\r\n                    </ul>\r\n                </nav>\r\n                <div style={{ width: open ? \"auto\" : \"0\" }}>\r\n                    {selected === \"Layers\" && <LayersWindow action={action} setAction={setAction} contextMenu={contextMenu} />}\r\n                </div>\r\n            </div>)\r\n    }\r\n}","import { useContext } from \"react\"\r\nimport { Context } from \"../Context.jsx\"\r\n\r\nexport default function CarryCanvas() {\r\n    const context = useContext(Context);\r\n    const tool = context.tool;\r\n    const clipboard = context.clipboard;\r\n    const cursor = context.cursor;\r\n    const zoom = context.zoom;\r\n    const currLayer = context.currLayer;\r\n    const layers = context.layers;\r\n        return (\r\n            <canvas \r\n            id=\"carryCanvas\" \r\n            height={clipboard.data.height}\r\n            width={clipboard.data.width}\r\n            style={{ \r\n                display:\"none\", \r\n                position: \"absolute\",\r\n                zIndex: currLayer, \r\n                top: cursor.end.y + \"px\", \r\n                left: cursor.end.x + \"px\"\r\n            }} />\r\n        )\r\n    \r\n}","import { useRef, useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\n\r\nexport default function CanvasInterface({ setAction, contextMenu }){\r\n    const context = useContext(Context);\r\n    const interfaceRef = useRef(null);\r\n    const cursor = context.cursor;\r\n    const setCursor = context.setCursor;\r\n    const tool = context.tool;\r\n    const subTool = context.subTool;\r\n    const curveControls = context.curveControls;\r\n    const setCurveControls = context.setCurveControls;\r\n    const size = context.size;\r\n    const selectedColor = context.color.selected;\r\n    const color1 = context.color[1];\r\n    const setColor1 = (v) => context.setColor({ ...context.color, 1: v });\r\n    const color2 = context.color[2];\r\n    const setColor2 = (v) => context.setColor({ ...context.color, 2: v });\r\n    const text = context.text;\r\n    const setText = context.setText;\r\n    const clipboard = context.clipboard;\r\n    const setClipboard = context.setClipboard;\r\n    const layers = context.layers;\r\n    const params = {\r\n        tool,\r\n        subTool,\r\n        curveControls,\r\n        setCurveControls,\r\n        size,\r\n        selectedColor,\r\n        color1,\r\n        setColor1,\r\n        color2,\r\n        setColor2,\r\n        text,\r\n        setText,\r\n        clipboard,\r\n        setClipboard,\r\n    };\r\n\r\n    const getCorrectedPosition = (x, y) => {\r\n        let canvas = interfaceRef.current;\r\n        let ctx = canvas.getContext('2d', { alpha: true });\r\n        let boundary = canvas.getBoundingClientRect();\r\n        const scaleX = (ctx.canvas.width / boundary.width);\r\n        const scaleY = (ctx.canvas.height / boundary.height);\r\n        const newX = (x - boundary.left) * scaleX;\r\n        const newY = (y - boundary.top) * scaleY;\r\n        return { x: newX, y: newY };\r\n    };\r\n\r\n    const handleCursor = (e) => {\r\n        const pos = getCorrectedPosition(e.clientX, e.clientY);\r\n        if (e.button === 0) {\r\n            switch (e.type) {\r\n                case \"mousedown\":\r\n                    if (cursor.down) {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y },\r\n                            end: { x: pos.x, y: pos.y },\r\n                        });\r\n                    } else {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            down: true,\r\n                            start: { x: pos.x, y: pos.y },\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"mouseup\":\r\n                    setCursor({\r\n                        ...cursor,\r\n                        end: { x: pos.x, y: pos.y },\r\n                        down: false\r\n                    });\r\n                    break;\r\n                case \"mousemove\":\r\n                     if (!cursor.down) {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y }\r\n                        });\r\n                    } else {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y },\r\n                            end: { x: pos.x, y: pos.y },\r\n                        })\r\n                    }\r\n                    break;\r\n                case \"mouseleave\":\r\n                    setCursor({\r\n                        ...cursor,\r\n                        current: { x: pos.x, y: pos.y },\r\n                    });\r\n                    break;\r\n                case \"mouseenter\":\r\n                    if (e.buttons !== 0) {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            down: true,\r\n                            current: { x: pos.x, y: pos.y },\r\n                            end: { x: pos.x, y: pos.y },\r\n                        });\r\n                    }\r\n                    else {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            down: false,\r\n                            current: { x: pos.x, y: pos.y },\r\n                        })\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleTouch = (e) => {\r\n        e.preventDefault();\r\n        const pos = getCorrectedPosition(e.touches[0].clientX, e.touches[0].clientY);\r\n        if (e.touches.length === 1) {\r\n            switch (e.type) {\r\n                case \"touchstart\":\r\n                    if (cursor.down) {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y },\r\n                            end: { x: pos.x, y: pos.y },\r\n                        });\r\n                    } else {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            down: true,\r\n                            start: { x: pos.x, y: pos.y }\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"touchend\":\r\n                    setCursor({\r\n                        ...cursor,\r\n                        end: { x: pos.x, y: pos.y },\r\n                        down: false\r\n                    });\r\n                    break;\r\n                case \"touchmove\":\r\n                    if (!cursor.down) {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y }\r\n                        });\r\n                    }\r\n                    else {\r\n                        setCursor({\r\n                            ...cursor,\r\n                            current: { x: pos.x, y: pos.y },\r\n                            end: { x: pos.x, y: pos.y },\r\n                        })\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            };\r\n        } else {\r\n            setCursor({\r\n                ...cursor,\r\n                current: { x: 0, y: 0 },\r\n                end: { x: pos.x, y: pos.y },\r\n                down: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleContextMenu = (event) => {\r\n        event.preventDefault();\r\n        let content = {\r\n            \"Undo\": { action: () => setAction(\"Undo\"), disabled: !context.history.canUndo },\r\n            \"Redo\": { action: () => setAction(\"Redo\"), disabled: !context.history.canRedo },\r\n            \"LineBreak\": {},\r\n            \"Zoom In\": { action: () => setAction(\"Zoom In\"), disabled: context.zoom === 4 },\r\n            \"Zoom Out\": { action: () => setAction(\"Zoom Out\"), disabled: context.zoom === 0.25 },\r\n            \"Zoom Reset\": { action: () => setAction(\"Zoom Reset\"), disabled: context.zoom === 1 },\r\n        };\r\n        contextMenu.setOpen();\r\n        contextMenu.setPosition(event.clientX, event.clientY);\r\n        contextMenu.setContent(content);\r\n    };\r\n    return (\r\n        <canvas\r\n            ref={interfaceRef}\r\n            style={{ \r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n                color: params.selectedColor,\r\n                zIndex: layers.length+2\r\n            }}\r\n            className={(\"cursor\" + params.tool)}\r\n            id=\"interfaceCanvas\"\r\n            height={context.dimentions.height}\r\n            width={context.dimentions.width}\r\n            onMouseDown={(e) => { if (!cursor.selecting) handleCursor(e) }}\r\n            onMouseUp={(e) => { if (!cursor.selecting) handleCursor(e) }}\r\n            onMouseMove={(e) => { if (!cursor.selecting) handleCursor(e) }}\r\n            onMouseLeave={(e) => { if (!cursor.selecting) handleCursor(e) }}\r\n            onMouseEnter={(e) => { if (!cursor.selecting) handleCursor(e) }}\r\n            onTouchStart={(e) => { if (!cursor.selecting) handleTouch(e) }}\r\n            onTouchEnd={(e) => { if (!cursor.selecting) handleTouch(e) }}\r\n            onTouchMove={(e) => { if (!cursor.selecting) handleTouch(e) }}\r\n            onTouchCancel={(e) => { if (!cursor.selecting) handleTouch(e) }}\r\n            onContextMenu={(e) => { if (!cursor.selecting) handleContextMenu(e) }}\r\n        />\r\n    );\r\n\r\n}","import { useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { BiUndo, BiRedo } from \"react-icons/bi\";\r\nimport { TfiSave, TfiFile } from \"react-icons/tfi\";\r\nimport { CiLineHeight } from \"react-icons/ci\";\r\nimport { AiOutlineColumnHeight } from \"react-icons/ai\";\r\nimport { RiFontSize, RiShapesLine } from \"react-icons/ri\";\r\nimport { BiShapePolygon } from \"react-icons/bi\";\r\n\r\nimport ColorPicker from \"../../../System/GlobalComponents/ColorPicker/ColorPicker.jsx\";\r\n\r\nexport const TopNavBar = ({ setAction, contextMenu }) => {\r\n  const context = useContext(Context);\r\n  const handleZoom = (e) => {\r\n    context.setZoom(Number(e.target.value));\r\n    if (e.target.value === \"0.25\") {\r\n      setAction(\"Zoom Min\");\r\n    } else if (e.target.value === \"4\") {\r\n      setAction(\"Zoom Max\");\r\n    }\r\n    else if (e.target.value === \"1\") {\r\n      setAction(\"Zoom Default\");\r\n    }\r\n    else {\r\n      setAction(\"Zoom Change\");\r\n    }\r\n  }\r\n\r\n  const handleContextMenu = (event) => {\r\n    event.preventDefault();\r\n    let content = { \"Hide\": { action: () => setAction(\"topNavBar\") } };\r\n    contextMenu.setOpen();\r\n    contextMenu.setPosition(event.clientX, event.clientY);\r\n    contextMenu.setContent(content);\r\n  };\r\n\r\n  if (context.view.topNavBar) {\r\n    return (\r\n      <nav id=\"drawDocTopNavBar\" onContextMenu={(event) => handleContextMenu(event)}>\r\n        <button title=\"Undo\" onClick={() => setAction(\"Undo\")} disabled={!context.layers[context.currLayer].canUndo}>\r\n          <BiUndo />\r\n        </button>\r\n        <button title=\"Redo\" onClick={() => setAction(\"Redo\")} disabled={!context.layers[context.currLayer].canRedo}>\r\n          <BiRedo />\r\n        </button>\r\n        <vertical-rect ></vertical-rect>\r\n        <button title=\"New File\" onClick={() => setAction(\"New\")}>\r\n          <TfiFile />\r\n        </button>\r\n        <button title=\"Download File\" onClick={() => setAction(\"Save\")} disabled={!(context.history.canRedo || context.history.canUndo)}>\r\n          <TfiSave />\r\n        </button>\r\n        <vertical-rect ></vertical-rect>\r\n        <div style={{ display: \"flex\" }}>\r\n          <button title=\"Color 1\" className={context.color.selected === context.color[1] ? \"buttonActive\" : \"\"}\r\n            onClick={() => context.setColor({ ...context.color, selected: context.color[1] })}>\r\n            <label htmlFor=\"drawColor1\" style={{ textDecoration: context.color.selected === context.color[1] ? \"underline\" : \"\" }} onClick={(e) => e.preventDefault()}>1</label>\r\n          </button>\r\n          <ColorPicker\r\n            color={context.color[1]}\r\n            setColor={(color) => { context.setColor({ ...context.color, selected: color, 1: color }) }}\r\n            useAlpha={false}\r\n          />\r\n        </div>\r\n        <vertical-rect ></vertical-rect>\r\n        <div style={{ display: \"flex\" }}>\r\n          <button title=\"Color 2\" className={context.color.selected === context.color[2] ? \"buttonActive\" : \"\"}\r\n            onClick={() => context.setColor({ ...context.color, selected: context.color[2] })}>\r\n            <label htmlFor=\"drawColor2\" style={{ textDecoration: context.color.selected === context.color[2] ? \"underline\" : \"\" }} onClick={(e) => e.preventDefault()}>2</label>\r\n          </button>\r\n          <ColorPicker\r\n            color={context.color[2]}\r\n            setColor={(color) => context.setColor({ ...context.color, selected: color, 2: color })}\r\n            useAlpha={false}\r\n          />\r\n        </div>\r\n        <vertical-rect ></vertical-rect>\r\n        {context.tool === \"Magnifier\" &&\r\n          <select\r\n            value={context.zoom}\r\n            onChange={(e) => { handleZoom(e) }}\r\n            title=\"Zoom\"\r\n          >\r\n            <option value={0.25}>25%</option>\r\n            <option value={0.5}>50%</option>\r\n            <option value={0.75}>75%</option>\r\n            <option value={1}>100%</option>\r\n            <option value={2}>200%</option>\r\n            <option value={3}>300%</option>\r\n            <option value={4}>400%</option>\r\n          </select>}\r\n        {context.tool !== \"Select\" && context.tool !== \"Pipette\" && context.tool !== \"Magnifier\" && context.tool !== \"Bucket\" &&\r\n          <>\r\n            <AiOutlineColumnHeight />\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"100\"\r\n              value={context.size}\r\n              onChange={(e) => context.setSize(Number(e.target.value))}\r\n              title={context.tool === \"Text\" ? \"Font Size\" : context.tool === \"Shape\" ? \"Line Width\" : \"Radius\"}\r\n            />\r\n          </>\r\n        }\r\n        {context.tool === \"Text\" &&\r\n          <>\r\n            <vertical-rect ></vertical-rect>\r\n            <RiFontSize />\r\n            <select\r\n              title=\"Font Family\"\r\n              value={context.text.fontFamily}\r\n              onChange={(e) => context.setText({ ...context.text, fontFamily: e.target.value })}\r\n            >\r\n              <option>Arial</option>\r\n              <option>Times New Roman</option>\r\n              <option>Monospace</option>\r\n              <option>Verdana</option>\r\n              <option>Georgia</option>\r\n              <option>Courier New</option>\r\n              <option>Tahoma</option>\r\n              <option>Garamond</option>\r\n              <option>Impact</option>\r\n              <option>Comic Sans MS</option>\r\n              <option>Lucida Console</option>\r\n              <option>Lucida Sans Unicode</option>\r\n              <option>Palatino Linotype</option>\r\n              <option>Symbol</option>\r\n              <option>Wingdings</option>\r\n              <option>Helvetica</option>\r\n            </select>\r\n            <vertical-rect ></vertical-rect>\r\n            <CiLineHeight />\r\n            <input\r\n              title=\"Line Height\"\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              value={context.text.lineHeight}\r\n              onChange={(e) => { context.setText({ ...context.text, lineHeight: e.target.value }) }}\r\n            />\r\n            <vertical-rect ></vertical-rect>\r\n          </>\r\n        }\r\n        {context.tool === \"Shape\" &&\r\n          <>\r\n            <vertical-rect ></vertical-rect>\r\n            <RiShapesLine />\r\n            <select\r\n              title=\"Shape\"\r\n              value={context.subTool.shape}\r\n              onChange={(e) => context.setSubTool({ ...context.subTool, shape: e.target.value })}\r\n            >\r\n              <option>Line</option>\r\n              <option>Curve</option>\r\n              <option>Circle</option>\r\n              <option>Rectangle</option>\r\n              <option>Polygon</option>\r\n              <option>Star</option>\r\n              <option>Arrow</option>\r\n              <option>Heart</option>\r\n            </select>\r\n            <vertical-rect ></vertical-rect>\r\n            {(context.subTool.shape === \"Polygon\" || context.subTool.shape === \"Star\") &&\r\n              <>\r\n                <BiShapePolygon />\r\n                <input\r\n                  type=\"number\"\r\n                  title=\"Sides\"\r\n                  value={context.subTool.sides}\r\n                  onChange={(e) => context.setSubTool({ ...context.subTool, sides: e.target.value })}\r\n                  min=\"3\"\r\n                  step=\"1\" />\r\n                <vertical-rect ></vertical-rect>\r\n              </>\r\n            }\r\n          </>}\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nexport const SubToolIcon = ({ subtool, isSelected }) => {\r\n    let canvasSubToolRef = useRef(null);\r\n\r\n    const drawCircleIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.arc(\r\n            width / 2,\r\n            height / 2,\r\n            (height / 2) - 2,\r\n            0,\r\n            Math.PI * 2,\r\n        );\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n        context.stroke();\r\n        context.closePath();\r\n    };\r\n    const drawEllipseIcon = (context, width, height) => {\r\n        context.scale(1,0.5);\r\n        context.beginPath();\r\n        context.beginPath();\r\n        context.arc(\r\n            width / 2,\r\n            height,\r\n            (height / 2) - 2,\r\n            0,\r\n            Math.PI * 2,\r\n        );\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n        context.stroke();\r\n        context.closePath();\r\n        context.scale(1,2);\r\n    }\r\n    const drawRectangleIcon = (context, width, height) => {\r\n        if (subtool.fill) {\r\n            context.fillRect(0, height / 4, width, height / 2);\r\n        }\r\n        context.strokeRect(0, height / 4, width, height / 2);\r\n\r\n    };\r\n    const drawPolygonIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        //context.moveTo(width/2, 0);\r\n        for (let i = 0; i < subtool.sides; i++) {\r\n            context.lineTo(\r\n                width / 2 + (width / 2 - 3) * Math.cos((2 * Math.PI * i / subtool.sides) - Math.PI / 2),\r\n                height / 2 + (height / 2 - 3) * Math.sin((2 * Math.PI * i / subtool.sides) - Math.PI / 2)\r\n            );\r\n        };\r\n        context.closePath();\r\n        context.stroke();\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n    }\r\n    const drawLineIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.moveTo(width / 4, 2);\r\n        context.lineTo(3 * width / 4, height - 2);\r\n        context.closePath();\r\n        context.stroke();\r\n    }\r\n    const drawCurveIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.moveTo(width / 6, 2);\r\n        context.bezierCurveTo(5 * width / 6, height / 5, width / 6, 4 * height / 5 - 2, 5 * width / 6, height - 2);\r\n        context.stroke();\r\n    }\r\n    const drawArrowIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.moveTo(2, height / 3);\r\n        context.lineTo(width / 2, height / 3);\r\n        context.lineTo(width / 2, 2);\r\n        context.lineTo(width - 2, height / 2);\r\n        context.lineTo(width / 2, height - 2);\r\n        context.lineTo(width / 2, 2 * height / 3);\r\n        context.lineTo(2, 2 * height / 3);\r\n        context.closePath();\r\n        context.stroke();\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n    }\r\n    const drawStarIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.moveTo(width / 2, 3);\r\n        for (let i = 0; i < subtool.sides * 2; i++) {\r\n            if (i % 2 === 0) {\r\n                context.lineTo(\r\n                    width / 2 + (width / 2 - 3) * Math.cos((2 * Math.PI * i / (subtool.sides * 2)) - Math.PI / 2),\r\n                    height / 2 + (height / 2 - 3) * Math.sin((2 * Math.PI * i / (subtool.sides * 2)) - Math.PI / 2)\r\n                );\r\n            } else {\r\n                context.lineTo(\r\n                    width / 2 + (width / 4 - 3) * Math.cos((2 * Math.PI * i / (subtool.sides * 2)) - Math.PI / 2),\r\n                    height / 2 + (height / 4 - 3) * Math.sin((2 * Math.PI * i / (subtool.sides * 2)) - Math.PI / 2)\r\n                );\r\n            }\r\n        };\r\n        context.closePath();\r\n        context.stroke();\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n    }\r\n    const drawHeartIcon = (context, width, height) => {\r\n        context.beginPath();\r\n        context.moveTo(width / 2, height-3);\r\n        //context.lineTo(width / 4, 2*height/3);\r\n        context.arc(width/4+1, height/3, width/4-1, 3*Math.PI/4, 0, false);\r\n        context.arc(3*width/4-1, height/3, width/4-1, Math.PI, Math.PI/4, false);\r\n        context.closePath();\r\n        context.stroke();\r\n        if (subtool.fill) {\r\n            context.fill();\r\n        }\r\n\r\n    }\r\n\r\n    const functionList = {\r\n        drawCircleIcon,\r\n        drawEllipseIcon,\r\n        drawRectangleIcon,\r\n        drawPolygonIcon,\r\n        drawLineIcon,\r\n        drawCurveIcon,\r\n        drawStarIcon,\r\n        drawArrowIcon,\r\n        drawHeartIcon\r\n    };\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasSubToolRef.current;\r\n        const context = canvas.getContext(\"2d\");\r\n        const height = context.canvas.height;\r\n        const width = context.canvas.width;\r\n        context.clearRect(0, 0, width, height);\r\n        context.fillStyle = getComputedStyle(document.getElementById(\"drawDocToolBar\")).color;\r\n        context.strokeStyle = getComputedStyle(document.getElementById(\"drawDocToolBar\")).color;\r\n        context.lineWidth = 2;\r\n        functionList[\"draw\"+subtool.shape+\"Icon\"](context, width, height);\r\n    }, [subtool, isSelected]);\r\n\r\n\r\n    return <canvas ref={canvasSubToolRef} id=\"shapeCanvas\" width=\"25\" height=\"25\"  title=\"Custom Shape\"/>\r\n}","import { useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nimport { SubToolIcon } from \"./SubToolIcon.jsx\";\r\nimport { GiPaintBrush } from \"react-icons/gi\";\r\nimport {\r\n    TfiSpray,\r\n    TfiPaintBucket,\r\n    TfiEraser,\r\n} from \"react-icons/tfi\";\r\nimport { CgColorPicker } from \"react-icons/cg\";\r\nimport { RxLetterCaseCapitalize } from \"react-icons/rx\";\r\nimport { HiOutlineMagnifyingGlass } from \"react-icons/hi2\";\r\nimport { LuBoxSelect } from \"react-icons/lu\";\r\n\r\nexport const ToolBar = ({ setAction, contextMenu, isSelected }) => {\r\n    const context = useContext(Context);\r\n    const tool = context.tool;\r\n    const subTool = context.subTool;\r\n    const setTool = context.setTool;\r\n    const toolComponents = {\r\n        Brush: <GiPaintBrush title=\"Brush\" />,\r\n        Eraser: <TfiEraser title=\"Eraser\" />,\r\n        Bucket: <TfiPaintBucket title=\"Bucket\" />,\r\n        Spray: <TfiSpray title=\"Spray Can\" />,\r\n        Text: <RxLetterCaseCapitalize title=\"Insert Text\" />,\r\n        Pipette: <CgColorPicker title=\"Color Picker\" />,\r\n        Magnifier: <HiOutlineMagnifyingGlass title=\"Zoom\" />,\r\n        Select: <LuBoxSelect title=\"Selection\" />,\r\n        Shape: <SubToolIcon subtool={subTool} isSelected={isSelected}/>,\r\n    };\r\n    const handleContextMenu = (event) => {\r\n        event.preventDefault();\r\n        let content = { \"Hide\": { action:()=>setAction(\"toolBar\")} };\r\n        contextMenu.setOpen();\r\n        contextMenu.setPosition(event.clientX, event.clientY);\r\n        contextMenu.setContent(content);\r\n    };\r\n    if (context.view.toolBar) {\r\n        return (\r\n            <nav id=\"drawDocToolBar\" onContextMenu={(event) => handleContextMenu(event)}>\r\n                {Object.keys(toolComponents).map((name) => (\r\n                    <button\r\n                        key={name + \"drawToolDropdown\"}\r\n                        onClick={() => setTool(name)}\r\n                        className={tool === name ? \"buttonActive\" : \"\"}\r\n                    >\r\n                        {toolComponents[name]}\r\n                    </button>\r\n                ))}\r\n            </nav>\r\n        )\r\n    }\r\n}","import { useContext } from \"react\";\r\nimport { Context } from \"../Context.jsx\";\r\nexport const BottomNavBar = ({ action, setAction, contextMenu }) => {\r\n  const context = useContext(Context);\r\n  const handleContextMenu = (event) => {\r\n    event.preventDefault();\r\n    let content = { \"Hide\": { action: () => setAction(\"bottomNavBar\") }, }\r\n    contextMenu.setOpen();\r\n    contextMenu.setPosition(event.clientX, event.clientY);\r\n    contextMenu.setContent(content);\r\n  };\r\n  if (context.view.bottomNavBar) {\r\n    return (\r\n      <nav id=\"drawDocBottomNavBar\" onContextMenu={(event) => handleContextMenu(event)}>\r\n        {context.tool === \"Text\" &&\r\n          <>\r\n            <button\r\n              title=\"Confirm Text\"\r\n              onClick={() => setAction(\"confirm\")}\r\n            ><small>Confirm</small>\r\n            </button>\r\n            <vertical-rect ></vertical-rect>\r\n            <button\r\n              title=\"Use Fill\"\r\n              className={context.text.fill ? \"buttonActive\" : \"\"}\r\n              onClick={() => { context.setText({ ...context.text, fill: !context.text.fill }) }}\r\n            >\r\n              <small>Fill</small>\r\n            </button>\r\n            <vertical-rect ></vertical-rect>\r\n            <button\r\n              title=\"Use Stroke\"\r\n              className={context.text.stroke ? \"buttonActive\" : \"\"}\r\n              onClick={() => { context.setText({ ...context.text, stroke: !context.text.stroke }) }}\r\n            >\r\n              <small>Stroke</small>\r\n            </button>\r\n            <input\r\n              title=\"Stroke Width\"\r\n              type=\"number\"\r\n              step=\"1\"\r\n              min=\"1\"\r\n              max={context.size-1}\r\n              value={context.text.strokeWidth}\r\n              onChange={(e) => { context.setText({ ...context.text, strokeWidth: e.target.value }) }}\r\n            />\r\n            <vertical-rect ></vertical-rect>\r\n          </>}\r\n        {context.tool === \"Select\" ?\r\n          <>{action === \"clipping\" && context.clipboard.state === \"carry\" ?\r\n            <button\r\n              title=\"Paste\"\r\n              onClick={() => { setAction(\"confirm\"); context.setClipboard({ ...context.clipboard, state: \"paste\" }) }}\r\n            ><small>Paste</small></button>\r\n            :\r\n            <>\r\n              <button\r\n                title=\"Cut\"\r\n                onClick={() => { setAction(\"clipping\"); context.setClipboard({ ...context.clipboard, state: \"cut\" }) }}\r\n              ><small>Cut</small></button>\r\n              <vertical-rect ></vertical-rect>\r\n              <button\r\n                title=\"Copy\"\r\n                onClick={() => { setAction(\"clipping\"); context.setClipboard({ ...context.clipboard, state: \"copy\" }) }}\r\n              ><small>Copy</small></button>\r\n            </>\r\n          }</>\r\n          : null}\r\n        {context.tool === \"Shape\" ?\r\n          <>\r\n            <button\r\n              title=\"Confirm Shape\"\r\n              onClick={() => setAction(\"confirm\")}\r\n            ><small>Confirm</small></button>\r\n            <vertical-rect ></vertical-rect>\r\n            {context.subTool.shape === \"Curve\" &&\r\n              <button\r\n                title=\"Cancel Shape\"\r\n                onClick={() => setAction(\"cancel\")}\r\n              ><small>Cancel</small></button>\r\n            }\r\n            {context.subTool.shape !== \"Line\" && context.subTool.shape !== \"Curve\" ?\r\n              <>\r\n                <button\r\n                  title=\"Fill\"\r\n                  className={context.subTool.fill ? \"buttonActive\" : \"\"}\r\n                  onClick={() => context.setSubTool({ ...context.subTool, fill: !context.subTool.fill })}\r\n                ><small>Fill</small></button>\r\n                <vertical-rect ></vertical-rect>\r\n                <button\r\n                  title=\"Stretch\"\r\n                  className={context.subTool.stretch ? \"buttonActive\" : \"\"}\r\n                  onClick={() => context.setSubTool({ ...context.subTool, stretch: !context.subTool.stretch })}\r\n                ><small>Stretch</small>\r\n                </button>\r\n                <vertical-rect ></vertical-rect>\r\n                <button>\r\n                  <label htmlFor=\"rotationAngle\">Rotation</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    title=\"Rotation Angle\"\r\n                    id=\"rotationAngle\"\r\n                    value={context.subTool.angle}\r\n                    onChange={(e) => context.setSubTool({ ...context.subTool, angle: e.target.value })}\r\n                    step=\"1\" />\r\n                </button>\r\n                <vertical-rect ></vertical-rect>\r\n                {context.subTool.shape === \"Polygon\" || context.subTool.shape === \"Star\" ?\r\n                  <>\r\n                    <button>\r\n                      <label htmlFor=\"startAngle\">Start Angle</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        title=\"Start Angle\"\r\n                        id=\"startAngle\"\r\n                        value={context.subTool.startAngle}\r\n                        onChange={(e) => context.setSubTool({ ...context.subTool, startAngle: e.target.value })}\r\n                        step=\"1\" />\r\n                    </button>\r\n                    <vertical-rect ></vertical-rect>\r\n                  </> : null}\r\n              </>\r\n              : null}\r\n          </> : null}\r\n      </nav>\r\n    )\r\n  }\r\n}","// Paint.exe style editor in javascript, makes use of two overlapping canvas elements\r\nimport { useContext } from \"react\";\r\n\r\nimport Provider from \"./Context.jsx\";\r\nimport { Context } from \"./Context.jsx\";\r\nimport DrawCanvas from \"./Components/DrawCanvas.jsx\";\r\nimport PreviewCanvas from \"./Components/PreviewCanvas.jsx\";\r\nimport SelectionCanvas from \"./Components/SelectionCanvas.jsx\";\r\nimport ContentBar from \"./Components/ContentBar.jsx\";\r\nimport CarryCanvas from \"./Components/CarryCanvas.jsx\";\r\nimport CanvasInterface from \"./Components/CanvasInterface.jsx\";\r\n\r\nimport { TopNavBar } from \"./Components/TopNavBar.jsx\";\r\nimport { ToolBar } from \"./Components/ToolBar.jsx\";\r\nimport { BottomNavBar } from \"./Components/BottomNavBar.jsx\";\r\n\r\nimport \"./style.css\";\r\nexport default function DrawDoc(props) {\r\n\r\n  const action = props.action;\r\n  const setAction = props.setAction;\r\n  const appMenu = props.appMenu;\r\n  const setAppMenu = props.setAppMenu;\r\n  const appDialog = props.appDialog;\r\n  const setAppDialog = props.setAppDialog;\r\n  const contextMenu = props.contextMenu;\r\n  const canClose = props.canClose;\r\n  const setCanClose = props.setCanClose;\r\n  const isSelected = props.isSelected;\r\n  const title = props.title;\r\n  const setTitle = props.setTitle;\r\n\r\n  const context = useContext(Context);\r\n\r\n  return (\r\n    <Provider>\r\n      <>\r\n        <TopNavBar\r\n          setAction={setAction}\r\n          contextMenu={contextMenu}\r\n        />\r\n        <div style={{\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          margin: \"0px\"\r\n        }}>\r\n          <ToolBar\r\n            setAction={setAction}\r\n            contextMenu={contextMenu}\r\n            isSelected={isSelected}\r\n          />\r\n          <canvas-container>\r\n            <DrawCanvas\r\n              action={action}\r\n              setAction={setAction}\r\n              appMenu={appMenu}\r\n              setAppMenu={setAppMenu}\r\n              appDialog={appDialog}\r\n              setAppDialog={setAppDialog}\r\n              contextMenu={contextMenu}\r\n              canClose={canClose}\r\n              setCanClose={setCanClose}\r\n              title={title}\r\n              setTitle={setTitle}\r\n            />\r\n            <CarryCanvas />\r\n            <PreviewCanvas />\r\n            <CanvasInterface\r\n              action={action}\r\n              setAction={setAction}\r\n              contextMenu={contextMenu}\r\n            />\r\n            <SelectionCanvas />\r\n          </canvas-container>\r\n          <ContentBar\r\n            action={action}\r\n            setAction={setAction}\r\n            contextMenu={contextMenu}\r\n          />\r\n        </div>\r\n        <BottomNavBar\r\n          action={action}\r\n          setAction={setAction}\r\n          contextMenu={contextMenu}\r\n        />\r\n      </>\r\n    </Provider>\r\n  );\r\n};","export default function rgbToHsl(rgb) {\r\n    let r = rgb[0],\r\n        g = rgb[1],\r\n        b = rgb[2];\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n    let cmin = Math.min(r, g, b),\r\n        cmax = Math.max(r, g, b),\r\n        delta = cmax - cmin,\r\n        h = 0,\r\n        s = 0,\r\n        l = ((cmax + cmin) / 2);\r\n    if (delta === 0) {\r\n        s = 0;\r\n        h = 0;\r\n    }else {\r\n        if (l <= 0.5) {\r\n            s = delta / (cmax + cmin);\r\n        } else {\r\n            s = delta / (2 - cmax-cmin);\r\n        };\r\n        if (cmax === r) {\r\n            h = (g - b) / delta;\r\n        } else if (cmax === g) {\r\n            h = ((b - r) / delta) + 2;\r\n        } else if(cmax === b) {\r\n            h = ((r - g) / delta) + 4;\r\n        }\r\n    }\r\n    h = Math.round(h * 60);\r\n    if (h < 0) {\r\n        h += 360;\r\n    }\r\n    s = Math.abs(s * 100).toFixed(0);\r\n    l = (l * 100 ).toFixed(0);\r\n    let hsl = [h, s + '%', l + '%'];\r\n    return hsl;\r\n}","export default function rgbaToHsla(rgba) {\r\n    var r = rgba[0],\r\n        g = rgba[1],\r\n        b = rgba[2],\r\n        a = rgba[3];\r\n        var r = parseInt(rgba[1], 16);\r\n        var g = parseInt(rgba[2], 16);\r\n        var b = parseInt(rgba[3], 16);\r\n        var a = parseInt(rgba[4], 16);\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        let cmin = Math.min(r, g, b),\r\n            cmax = Math.max(r, g, b),\r\n            delta = cmax - cmin,\r\n            h = 0,\r\n            s = 0,\r\n            l = ((cmax + cmin) / 2);\r\n        if (delta === 0) {\r\n            s = 0;\r\n            h = 0;\r\n        }else {\r\n            if (l <= 0.5) {\r\n                s = delta / (cmax + cmin);\r\n            } else {\r\n                s = delta / (2 - cmax-cmin);\r\n            };\r\n            if (cmax === r) {\r\n                h = (g - b) / delta;\r\n            } else if (cmax === g) {\r\n                h = ((b - r) / delta) + 2;\r\n            } else if(cmax === b) {\r\n                h = ((r - g) / delta) + 4;\r\n            }\r\n        }\r\n        h = Math.round(h * 60);\r\n        if (h < 0) {\r\n            h += 360;\r\n        }\r\n        s = Math.abs(s * 100).toFixed(0);\r\n        l = (l * 100 ).toFixed(0);\r\n        let hsla = [h, s + '%', l + '%', a];\r\n        return hsla;\r\n    }","/*\r\nCustom color picker to replace default color picker from input[type=\"color\"],\r\nallowing for the use of alpha channel. The color picker is open on click,\r\nand closes on blur. \r\nThe color preview is set on color change, and applied when confirmed, by use \r\nof the callback function setColor, which is passed as props.\r\nThe return value is always in hsl or hsla format.\r\nThe alpha channel is used only if the useAlpha prop is true.\r\n\r\nTODO: \r\nAdd support for gradients,\r\nAdd support for color values RGB, RGBA, hex, and hex with alpha\r\n*/\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport hexToRgb from \"./Converters/hexToRgb\";\r\nimport hexToRgba from \"./Converters/hexToRgba\";\r\nimport rgbToHsl from \"./Converters/rgbToHsl\";\r\nimport rgbaToHsla from \"./Converters/rgbaToHsla\";\r\nimport nameToHsl from \"./Converters/nameToHsl\";\r\nimport \"../styles.css\";\r\n\r\nexport default function ColorPicker({ color, setColor, useAlpha }) {\r\n    const colorPickerRef = useRef(null);\r\n    const hueLumRef = useRef(null);\r\n    const saturationRef = useRef(null);\r\n    const alphaRef = useRef(null);\r\n    const [colorSelectorPos, setColorSelectorPos] = useState({ x: 0, y: 0 });\r\n    const [saturationSliderPos, setSaturationSliderPos] = useState(0);\r\n    const [alphaSliderPos, setAlphaSliderPos] = useState(0);\r\n    const [open, setOpen] = useState(false);\r\n    const [hue, setHue] = useState(0);\r\n    const [lightness, setLightness] = useState(50);\r\n    const [saturation, setSaturation] = useState(100);\r\n    const [alpha, setAlpha] = useState(100);\r\n\r\n    // Focus color picker when open, allowing its closing on blur\r\n    useEffect(() => {\r\n        if (open) {\r\n            colorPickerRef.current.focus();\r\n        }\r\n    }, [open]);\r\n\r\n    // Closes color picker on blur\r\n    const handleBlur = (event) => {\r\n        if (!event.currentTarget.contains(event.relatedTarget)) {\r\n            setOpen(false);\r\n        }\r\n    };\r\n\r\n    // Set displayed color based on current hue, saturation, and lightness, and uptades slider positions\r\n    useEffect(() => {\r\n        if (color) {\r\n            if (useAlpha) {\r\n                let hslaColor = [];\r\n                if (color[0] === \"#\") {\r\n                    hslaColor = rgbaToHsla(hexToRgba(color));\r\n                } else if (color.slice(0, 4) === \"rgba\") {\r\n                    hslaColor = rgbaToHsla(color);\r\n                } else if (color.slice(0, 4) === \"hsla\") {\r\n                    for (let i = 0; i < color.length; i++) {\r\n                        var start;\r\n                        var end;\r\n                        if (color[i] === \"(\") {\r\n                            start = i + 1;\r\n                        } else if (color[i] === \")\") {\r\n                            end = i;\r\n                            hslaColor.push(color.slice(start, end));\r\n                        } else if (color[i] === \",\") {\r\n                            hslaColor.push(color.slice(start, i));\r\n                            start = i + 1;\r\n                        }\r\n                    }\r\n                }\r\n                setHue(Number(hslaColor[0]));\r\n                setSaturation(Number(hslaColor[1].slice(0, hslaColor[1].length - 1)));\r\n                setLightness(Number(hslaColor[2].slice(0, hslaColor[2].length - 1)));\r\n                setAlpha(Number(hslaColor[3]));\r\n                if (open) {\r\n                    const hueLumRect = hueLumRef.current.getBoundingClientRect();\r\n                    setColorSelectorPos({\r\n                        x: hslaColor[0] / 360 * hueLumRect.width,\r\n                        y: (100 - hslaColor[2].slice(0, hslaColor[2].length - 1)) / 100 * hueLumRect.height\r\n                    });\r\n                    const saturationRect = saturationRef.current.getBoundingClientRect();\r\n                    setSaturationSliderPos(((100 - hslaColor[1].slice(0, hslaColor[1].length - 1)) / 100) * saturationRect.height);\r\n                    const alphaRect = alphaRef.current.getBoundingClientRect();\r\n                    setAlphaSliderPos(hslaColor[3] * alphaRect.width);\r\n                }\r\n            } else {\r\n                let hslColor = [];\r\n                if (color[0] === \"#\") {\r\n                    hslColor = rgbToHsl(hexToRgb(color));\r\n                } else if (color.slice(0, 3) === \"rgb\") {\r\n                    hslColor = rgbToHsl(color);\r\n                } else if (color.slice(0, 3) === \"hsl\") {\r\n                    for (let i = 0; i < color.length; i++) {\r\n                        var start;\r\n                        var end;\r\n                        if (color[i] === \"(\") {\r\n                            start = i + 1;\r\n                        } else if (color[i] === \")\") {\r\n                            end = i;\r\n                            hslColor.push(color.slice(start, end));\r\n                        } else if (color[i] === \",\") {\r\n                            hslColor.push(color.slice(start, i));\r\n                            start = i + 1;\r\n                        }\r\n                    }\r\n                } else {\r\n                    hslColor = nameToHsl(color);\r\n                }\r\n                setHue(Number(hslColor[0]));\r\n                setSaturation(Number(hslColor[1].slice(0, hslColor[1].length - 1)));\r\n                setLightness(Number(hslColor[2].slice(0, hslColor[2].length - 1)));\r\n                if (open) {\r\n                    const hueLumRect = hueLumRef.current.getBoundingClientRect();\r\n                    setColorSelectorPos({\r\n                        x: hslColor[0] / 360 * hueLumRect.width,\r\n                        y: (100 - hslColor[2].slice(0, hslColor[2].length - 1)) / 100 * hueLumRect.height\r\n                    });\r\n                    const saturationRect = saturationRef.current.getBoundingClientRect();\r\n                    setSaturationSliderPos(((100 - hslColor[1].slice(0, hslColor[1].length - 1)) / 100) * saturationRect.height);\r\n                }\r\n            }\r\n        }\r\n    }, [open, color, useAlpha])\r\n\r\n    // Draw color map for hue on the x axis and lightness on the y axis, for the current saturation value\r\n    const drawColorMap = (ctx) => {\r\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        let blockwidth = ctx.canvas.width / 360;\r\n        let blockheight = ctx.canvas.height / 100;\r\n        for (let i = 0; i < 360; i++) {\r\n            for (let j = 0; j < 100; j++) {\r\n                ctx.fillStyle = `hsl(${i},${saturation}%,${100 - j}%)`;\r\n                ctx.fillRect(i * blockwidth, j * blockheight, (i + 1) * blockwidth, (j + 1) * blockheight);\r\n            }\r\n        }\r\n    };\r\n\r\n    //Updates color map when saturation changes\r\n    useEffect(() => {\r\n        if (hueLumRef.current) {\r\n            const ctxColorPicker = hueLumRef.current.getContext(\"2d\", { alpha: false });\r\n            drawColorMap(ctxColorPicker);\r\n        }\r\n\r\n    }, [open, saturation]);\r\n\r\n    //Updates hue and luminance map slider positions when mouse moves, as well as their respective values\r\n    const handleHueLumMap = (event) => {\r\n        if (event.buttons !== 0) {\r\n            const rect = hueLumRef.current.getBoundingClientRect();\r\n            let x = event.clientX - rect.left;\r\n            let y = event.clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setColorSelectorPos({ x, y });\r\n                setHue(Math.floor(360 * x / rect.width));\r\n                setLightness(100 - Math.floor(100 * y / rect.height));\r\n            }\r\n        }\r\n    };\r\n    const touchHueLumMap = (event) => {\r\n        if (event.touches.length === 1) {\r\n            const rect = hueLumRef.current.getBoundingClientRect();\r\n            let x = event.touches[0].clientX - rect.left;\r\n            let y = event.touches[0].clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setColorSelectorPos({ x, y });\r\n                setHue(Math.floor(360 * x / rect.width));\r\n                setLightness(100 - Math.floor(100 * y / rect.height));\r\n            }\r\n        }\r\n    };\r\n\r\n    //Updates saturation slider position when mouse moves, as well as its value\r\n    const handleSaturationSlider = (event) => {\r\n        if (event.buttons !== 0) {\r\n            const rect = saturationRef.current.getBoundingClientRect();\r\n            let x = event.clientX - rect.left;\r\n            let y = event.clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setSaturation(100 - Math.floor(100 * y / rect.height));\r\n                setSaturationSliderPos(y);\r\n            }\r\n        }\r\n    };\r\n    const touchSaturationSlider = (event) => {\r\n        if (event.touches.length === 1) {\r\n            const rect = saturationRef.current.getBoundingClientRect();\r\n            let x = event.touches[0].clientX - rect.left;\r\n            let y = event.touches[0].clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setSaturation(100 - Math.floor(100 * y / rect.height));\r\n                setSaturationSliderPos(y);\r\n            }\r\n        }\r\n    };\r\n\r\n    //Updates alpha slider position when mouse moves, as well as its value\r\n    const handleAlphaSlider = (event) => {\r\n        if (event.buttons !== 0) {\r\n            const rect = alphaRef.current.getBoundingClientRect();\r\n            let x = event.clientX - rect.left;\r\n            let y = event.clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setAlpha((Math.floor(100 * x / rect.width)) / 100);\r\n                setAlphaSliderPos(x);\r\n            }\r\n        }\r\n    };\r\n    const touchAlphaSlider = (event) => {\r\n        if (event.touches.length === 1) {\r\n            const rect = alphaRef.current.getBoundingClientRect();\r\n            let x = event.touches[0].clientX - rect.left;\r\n            let y = event.touches[0].clientY - rect.top;\r\n            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {\r\n                setAlpha((Math.floor(100 * x / rect.width)) / 100);\r\n                setAlphaSliderPos(x);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const handleHueInput = (value) => {\r\n        setHue(value);\r\n        const rect = hueLumRef.current.getBoundingClientRect();\r\n        setColorSelectorPos({ ...colorSelectorPos, x: value / 360 * rect.width });\r\n    };\r\n\r\n    const handleLumInput = (value) => {\r\n        setLightness(value);\r\n        const rect = hueLumRef.current.getBoundingClientRect();\r\n        setColorSelectorPos({ ...colorSelectorPos, y: (100 - value) / 100 * rect.height });\r\n    };\r\n\r\n    const handleSaturationInput = (value) => {\r\n        setSaturation(value);\r\n        const rect = saturationRef.current.getBoundingClientRect();\r\n        setSaturationSliderPos(((100 - value) / 100) * rect.height);\r\n    };\r\n\r\n    const handleAlphaInput = (value) => {\r\n        setAlpha(value);\r\n        const rect = alphaRef.current.getBoundingClientRect();\r\n        setAlphaSliderPos(value * rect.width);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <color-picker-button onClick={() => setOpen(!open)} >\r\n                <div>\r\n                    <button style={{ background: color }} />\r\n                </div>\r\n            </color-picker-button>\r\n            {open && createPortal(\r\n                <color-picker-window\r\n                    tabIndex=\"0\"\r\n                    ref={colorPickerRef}\r\n                    onBlur={(e) => handleBlur(e)}\r\n                >\r\n                    <div>\r\n                        <hue-light-map>\r\n                            <canvas\r\n                                onMouseDown={(e) => handleHueLumMap(e)}\r\n                                onMouseMove={(e) => handleHueLumMap(e)}\r\n                                onTouchMove={(e) => touchHueLumMap(e)}\r\n                                onTouchStart={(e) => touchHueLumMap(e)}\r\n                                onTouchEnd={(e) => touchHueLumMap(e)}\r\n                                ref={hueLumRef} width=\"180\" height=\"180\"\r\n                                style={{ opacity: useAlpha ? alpha : 1 }}\r\n                            />\r\n                            <slider-thumb\r\n                                style={{\r\n                                    top: colorSelectorPos.y,\r\n                                    left: colorSelectorPos.x,\r\n                                    background:\r\n                                        useAlpha ?\r\n                                            `hsla(${hue},${saturation}%,${lightness}%, ${alpha})` :\r\n                                            `hsl(${hue},${saturation}%,${lightness}%)`\r\n                                }}\r\n                                onMouseDown={(e) => handleHueLumMap(e)}\r\n                                onMouseMove={(e) => handleHueLumMap(e)}\r\n                                onTouchMove={(e) => touchHueLumMap(e)}\r\n                                onTouchStart={(e) => touchHueLumMap(e)}\r\n                                onTouchEnd={(e) => touchHueLumMap(e)}\r\n                            />\r\n                        </hue-light-map>\r\n                        <saturation-slider title=\"Saturation\">\r\n                            <div\r\n                                ref={saturationRef}\r\n                                style={{\r\n                                    background:\r\n                                        `linear-gradient(0deg, hsl(${hue},0%,${lightness}%), hsla(${hue},100%,${lightness}%))`\r\n                                }}\r\n                                onMouseDown={(e) => handleSaturationSlider(e)}\r\n                                onMouseMove={(e) => handleSaturationSlider(e)}\r\n                                onTouchMove={(e) => touchSaturationSlider(e)}\r\n                                onTouchStart={(e) => touchSaturationSlider(e)}\r\n                                onTouchEnd={(e) => touchSaturationSlider(e)}\r\n                            />\r\n                            <slider-thumb\r\n                                style={{\r\n                                    top: saturationSliderPos,\r\n                                    background: `hsla(${hue},${saturation}%,${lightness}%, ${alpha})`\r\n                                }}\r\n                                onMouseDown={(e) => handleSaturationSlider(e)}\r\n                                onMouseMove={(e) => handleSaturationSlider(e)}\r\n                                onTouchMove={(e) => touchSaturationSlider(e)}\r\n                                onTouchStart={(e) => touchSaturationSlider(e)}\r\n                                onTouchEnd={(e) => touchSaturationSlider(e)}\r\n                            />\r\n                        </saturation-slider>\r\n                    </div>\r\n                    {useAlpha &&\r\n                        <alpha-slider title=\"Alpha\">\r\n                            <div\r\n                                ref={alphaRef}\r\n                                style={{\r\n                                    background:\r\n                                        `linear-gradient(90deg, hsla(${hue},${saturation}%,${lightness}%, 0), hsla(${hue},${saturation}%,${lightness}%, 1))`\r\n                                }}\r\n                                onMouseDown={(e) => handleAlphaSlider(e)}\r\n                                onMouseMove={(e) => handleAlphaSlider(e)}\r\n                                onTouchMove={(e) => touchAlphaSlider(e)}\r\n                                onTouchStart={(e) => touchAlphaSlider(e)}\r\n                                onTouchEnd={(e) => touchAlphaSlider(e)}\r\n                            />\r\n                            <slider-thumb\r\n                                style={{\r\n                                    left: alphaSliderPos,\r\n                                    background: `hsl(${hue},${saturation}%,${lightness}%, ${alpha})`\r\n                                }}\r\n                                onMouseDown={(e) => handleAlphaSlider(e)}\r\n                                onMouseMove={(e) => handleAlphaSlider(e)}\r\n                                onTouchMove={(e) => touchAlphaSlider(e)}\r\n                                onTouchStart={(e) => touchAlphaSlider(e)}\r\n                                onTouchEnd={(e) => touchAlphaSlider(e)}\r\n                            />\r\n                        </alpha-slider>\r\n                    }\r\n                    <color-inputs>\r\n                        <div>\r\n                            Hue\r\n                            <input type=\"number\" min=\"0\" max=\"360\" value={hue}\r\n                                onChange={(e) => handleHueInput(e.target.value)} />\r\n                        </div>\r\n                        <div>\r\n                            Lum.\r\n                            <input type=\"number\" min=\"0\" max=\"100\" value={lightness}\r\n                                onChange={(e) => handleLumInput(e.target.value)} />\r\n                        </div>\r\n                        <div>\r\n                            Sat.\r\n                            <input type=\"number\" min=\"0\" max=\"100\" value={saturation}\r\n                                onChange={(e) => handleSaturationInput(e.target.value)} />\r\n                        </div>\r\n                        {useAlpha &&\r\n                            <div>\r\n                                Alpha\r\n                                <input type=\"number\" min=\"0\" max=\"1\" step=\"0.01\" value={alpha}\r\n                                    onChange={(e) => handleAlphaInput(e.target.value)} />\r\n                            </div>\r\n                        }\r\n                    </color-inputs>\r\n                    <color-button >\r\n                        <button\r\n                            style={{\r\n                                background: useAlpha ? `hsla(${hue},${saturation}%,${lightness}%, ${alpha})` : `hsl(${hue},${saturation}%,${lightness}%)`\r\n                            }}\r\n                            onClick={() => { useAlpha ? setColor(`hsla(${hue},${saturation}%,${lightness}%, ${alpha})`) : setColor(`hsl(${hue},${saturation}%,${lightness}%)`) }}\r\n                        >\r\n                            Apply\r\n                        </button>\r\n                    </color-button>\r\n                </color-picker-window>\r\n                , document.getElementById(\"root\"))}\r\n        </>\r\n    );\r\n}","export default function hexToRgba(hex) {\r\n    var result;\r\n    if (hex.length === 5) {\r\n        result = /^#?([a-f\\d]{1})([a-f\\d]{1})([a-f\\d]{1})([a-f\\d]{1})$/i.exec(hex);\r\n        if(result[4] == 0){\r\n            result[4] = 'ff';\r\n        }\r\n    } else if(hex.length === 9) {\r\n        result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    }else if(hex.length === 8) {\r\n        result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        result[4] = 'ff';\r\n    }\r\n        return result\r\n            ? [\r\n                parseInt(result[1], 16),\r\n                parseInt(result[2], 16),\r\n                parseInt(result[3], 16),\r\n                parseInt(result[4], 16) / 255,\r\n            ]\r\n            : null;\r\n}","export default function hexToRgb(hex) {\r\n    var result;\r\n    if(hex.length === 4){\r\n        result = /^#?([a-f\\d]{1})([a-f\\d]{1})([a-f\\d]{1})$/i.exec(hex);\r\n    }else{\r\n        result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    }\r\n    return result\r\n        ? [\r\n               parseInt(result[1], 16),\r\n               parseInt(result[2], 16),\r\n               parseInt(result[3], 16),\r\n          ]\r\n        : null;\r\n}","export default function nameToHsl(name) {\r\n    switch(name){\r\n        case \"red\":\r\n            return [0, \"100%\", \"50%\"];\r\n        case \"green\":\r\n            return [120, \"100%\", \"50%\"];\r\n        case \"blue\":\r\n            return [240, \"100%\", \"50%\"];\r\n        case \"yellow\":\r\n            return [60, \"100%\", \"50%\"];\r\n        case \"cyan\":\r\n            return [180, \"100%\", \"50%\"];\r\n        case \"magenta\":\r\n            return [300, \"100%\", \"50%\"];\r\n        case \"black\":\r\n            return [0, \"0%\", \"0%\"];\r\n        case \"white\":\r\n            return [0, \"0%\", \"100%\"];\r\n        case \"gray\":\r\n        case \"grey\":\r\n            return [0, \"0%\", \"50%\"];\r\n        case \"lightgray\":\r\n        case \"lightgrey\":\r\n            return [0, \"0%\", \"75%\"];\r\n        case \"darkgray\":\r\n        case \"darkgrey\":\r\n            return [0, \"0%\", \"25%\"];\r\n        case \"brown\":\r\n            return [30, \"50%\", \"50%\"];\r\n        case \"orange\":\r\n            return [30, \"100%\", \"50%\"];\r\n        case \"purple\":\r\n            return [270, \"100%\", \"50%\"];\r\n        case \"pink\":\r\n            return [330, \"100%\", \"50%\"];\r\n        case \"lime\":\r\n            return [120, \"100%\", \"50%\"];\r\n        case \"teal\":\r\n            return [180, \"100%\", \"50%\"];\r\n        case \"aqua\":\r\n            return [240, \"100%\", \"50%\"];\r\n        case \"maroon\":\r\n            return [0, \"100%\", \"50%\"];\r\n        case \"navy\":\r\n            return [240, \"100%\", \"50%\"];\r\n        case \"olive\":\r\n            return [60, \"100%\", \"50%\"];\r\n        default:\r\n            return [0, \"0%\", \"0%\"];\r\n    }\r\n}"],"names":["Context","createContext","currLayer","layers","setLayers","lastLayer","setLastLayer","name","setName","setCurrLayer","history","setHistory","dimentions","setDimentions","tempDimentions","setTempDimentions","tool","setTool","subTool","setSubTool","curveControls","setCurveControls","color","setColor","size","setSize","text","setText","clipboard","setClipboard","zoom","setZoom","cursor","setCursor","view","setView","_ref","children","useState","id","visible","canUndo","canRedo","data","lastIndex","width","height","shape","fill","stretch","sides","angle","startAngle","state","start","x","y","end","controlPoint1","controlPoint2","selected","stroke","strokeWidth","lineHeight","fontFamily","current","down","selecting","toolBar","contentBar","topNavBar","bottomNavBar","menu","contextValue","_jsx","Provider","value","handleDraw","canvas","param","preview","ctx","getContext","alpha","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","imageSmoothingEnabled","startX","startY","endX","endY","drawEraser","strokeStyle","selectedColor","fillStyle","lineWidth","setLineDash","beginPath","arc","Math","PI","closePath","drawFunctions","drawBrush","drawSpray","randomX","random","randomNegativeX","randomY","randomNegativeY","sqrt","pow","fillRect","drawBucket","r","g","b","h","s","l","hslaColor","i","length","push","slice","temp1","temp2","tempR","tempG","tempB","secondTest","finalTest","tempColor","round","componentToHex","c","hex","Number","toString","hexColor","spans","parseInt","imageData","getImageData","pixelData","Uint32Array","buffer","getPixel","currX","currY","targetColor","floor","addSpan","left","right","line","direction","checkSpan","column","flag","depth","pop","lineOffset","console","log","error","putImageData","drawText","color1","color2","font","String","linesArr","split","lineIndex","maxWidth","top","whileBreak","measureText","firstText","firstTextIndex","whileBreak2","lastText","substring","toSpliced","forEach","index","fillText","strokeText","drawPipette","pixel","cmin","min","cmax","max","delta","abs","toFixed","setColor1","setColor2","drawSelect","carryCtx","document","getElementById","carryCanvas","drawImage","drawShape","radius","centerX","centerY","stretchX","stretchY","save","translate","rotate","restore","drawLine","moveTo","lineTo","drawCurve","startPoint","endPoint","bezierCurveTo","drawCircle","ellipse","drawRectangle","strokeRect","drawPolygon","cos","sin","drawStar","drawArrow","drawHeart","scale","clearRect","handleTools","params","action","setAction","newState","newStart","newEnd","newControlPoint1","newControlPoint2","handleTopMenu","appMenu","setAppMenu","args","updatedAppMenu","hasHistory","handleHistory","context","command","setCanClose","updatedHistory","updateStates","updatedLayers","canClose","undoAction","canUndoLayer","redoAction","canRedoLayer","saveAction","targetCanvas","splice","shift","handleFile","newFile","baseCanvas","saveFile","finalCanvas","createElement","layer","downloadLink","setAttribute","url","toDataURL","replace","click","handleAction","props","appDialog","setAppDialog","contextMenu","isSelected","title","setTitle","dialogNew","info","_jsxs","_Fragment","htmlFor","type","onChange","e","target","actions","Confirm","Cancel","dialogSaveAs","dialogChangeName","setTimeout","dialogCloseApp","Save","Close","DrawCanvas","useContext","v","useEffect","undefined","willReadFrequently","offsetX","offsetY","style","transform","getElementsByClassName","className","map","display","zIndex","PreviewCanvas","canvasPreviewRef","useRef","curLayer","ref","SelectionCanvas","subtool","selectionBox","setSelectionBox","canUsePointer","selectionCircle","setSelectionCircle","diameter","selectionEllipse","setSelectionEllipse","resizeDelta","setResizeDelta","dragDelta","setDragDelta","rotateStartPos","setRotateStartPos","getCursorFromEvent","cursorX","cursorY","button","clientX","clientY","touches","boundary","getBoundingClientRect","scaleX","scaleY","handleResizeStart","stopPropagation","cursorPos","newDeltaX","newDeltaY","indexOf","handleResizeCommon","invertX","invertY","newStartX","newStartY","newEndX","newEndY","handleResize","preventDefault","resizeResult","handleResizeEnd","handleDragStart","startDeltaX","startDeltaY","endDeltaX","endDeltaY","handleDrag","handleDragEnd","handleCircleRotate","horizontal","vertical","hypothenuse","currAngleDeg","acos","centerLeft","centerTop","pointerEvents","draggable","onDragStart","onDrag","onDragEnd","handleCircleRotateStart","handleCircleRotateEnd","caretColor","fontSize","spellCheck","LayersWindow","layersCanvasPreviews","setLayersCanvasPreviews","renameLayerIndex","setRenameLayerIndex","dragTargetIndex","setDragTargetIndex","dropTargetIndex","setDropTargetIndex","focus","select","addEventListener","key","removeEventListener","handleLayerDragOver","dataTransfer","dropEffect","handleLayerDrop","newLayers","draggedLayer","filter","_layer","dropLayer","getImageFromCanvasRef","notMain","onDragOver","onDrop","Fragment","src","onClick","checked","textDecoration","renameLayer","disabled","BiUndo","BiRedo","RiEditLine","toggleVisibility","RiEyeFill","RiEyeCloseFill","deleteLayer","FaTrashCan","createNewLayer","newLayer","ContentBar","open","setOpen","setSelected","onContextMenu","event","content","setPosition","setContent","handleContextMenu","GoTriangleRight","GoTriangleLeft","CarryCanvas","position","CanvasInterface","interfaceRef","getCorrectedPosition","handleCursor","pos","buttons","handleTouch","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","onMouseEnter","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","TopNavBar","TfiFile","TfiSave","ColorPicker","useAlpha","handleZoom","AiOutlineColumnHeight","RiFontSize","CiLineHeight","step","RiShapesLine","BiShapePolygon","SubToolIcon","canvasSubToolRef","functionList","drawCircleIcon","drawEllipseIcon","drawRectangleIcon","drawPolygonIcon","drawLineIcon","drawCurveIcon","drawStarIcon","drawArrowIcon","drawHeartIcon","getComputedStyle","ToolBar","toolComponents","Brush","GiPaintBrush","Eraser","TfiEraser","Bucket","TfiPaintBucket","Spray","TfiSpray","Text","RxLetterCaseCapitalize","Pipette","CgColorPicker","Magnifier","HiOutlineMagnifyingGlass","Select","LuBoxSelect","Shape","Object","keys","BottomNavBar","DrawDoc","flexDirection","margin","rgbToHsl","rgb","rgbaToHsla","rgba","a","colorPickerRef","hueLumRef","saturationRef","alphaRef","colorSelectorPos","setColorSelectorPos","saturationSliderPos","setSaturationSliderPos","alphaSliderPos","setAlphaSliderPos","hue","setHue","lightness","setLightness","saturation","setSaturation","setAlpha","result","exec","hexToRgba","hueLumRect","saturationRect","alphaRect","hslColor","hexToRgb","nameToHsl","blockwidth","blockheight","j","drawColorMap","handleHueLumMap","rect","touchHueLumMap","handleSaturationSlider","touchSaturationSlider","handleAlphaSlider","touchAlphaSlider","background","createPortal","tabIndex","onBlur","currentTarget","contains","relatedTarget","opacity","handleHueInput","handleLumInput","handleSaturationInput","handleAlphaInput"],"sourceRoot":""}