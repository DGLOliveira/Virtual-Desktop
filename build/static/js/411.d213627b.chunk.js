"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[411],{9411:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var n=o(5043),l=o(579);const a=(0,n.createContext)({name:"",setName:()=>{},history:{},setHistory:()=>{},dimention:{},setDimention:()=>{},tool:"",setTool:()=>{},subTool:{},setSubTool:()=>{},curveControls:{},setCurveControls:()=>{},color:{},setColor:()=>{},size:0,setSize:()=>{},text:{},setText:()=>{},clipboard:{},setClipboard:()=>{},zoom:1,setZoom:()=>{},cursor:{},setCursor:()=>{},view:{},setView:()=>{}});const s=function(e){let{children:t}=e;const[o,s]=(0,n.useState)("Untitled"),[i,r]=(0,n.useState)({history:[],index:0,canUndo:!1,canRedo:!1}),[c,d]=(0,n.useState)({width:350,height:350}),[h,u]=(0,n.useState)("Brush"),[p,x]=(0,n.useState)({shape:"Circle",fill:!1,stretch:!1,sides:4,angle:0,startAngle:0}),[b,m]=(0,n.useState)({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),[g,C]=(0,n.useState)({selected:"hsl(0, 100%, 0%)",1:"hsl(0, 100%, 0%)",2:"hsl(0, 100%, 100%)"}),[v,f]=(0,n.useState)(16),[y,w]=(0,n.useState)({text:"",top:0,left:0,color:"",fontSize:"",fontFamily:"Arial",state:"none"}),[j,M]=(0,n.useState)({data:{},state:"none"}),[k,T]=(0,n.useState)(1),[P,S]=(0,n.useState)({current:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0},down:!1}),[I,N]=(0,n.useState)({toolBar:!0,topNavBar:!0,bottomNavBar:!0,menu:!0}),B={name:o,setName:s,history:i,setHistory:r,dimention:c,setDimention:d,tool:h,setTool:u,subTool:p,setSubTool:x,curveControls:b,setCurveControls:m,color:g,setColor:C,size:v,setSize:f,text:y,setText:w,clipboard:j,setClipboard:M,zoom:k,setZoom:T,cursor:P,setCursor:S,view:I,setView:N};return(0,l.jsx)(a.Provider,{value:B,children:t})},i=(e,t,o,n)=>{let l;l=n?e.getContext("2d",{alpha:!0}):e.getContext("2d",{alpha:!1}),l.webkitImageSmoothingEnabled=!1,l.mozImageSmoothingEnabled=!1,l.imageSmoothingEnabled=!1;const a=e.getBoundingClientRect(),s=l.canvas.height,i=l.canvas.width,r=i/a.width,c=s/a.height,d=t.current.x,h=t.current.y,u=t.start.x,p=t.start.y,x=t.end.x,b=t.end.y,m=()=>{l.strokeStyle=o.selectedColor,l.fillStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([]),l.beginPath(),l.arc((d-a.left)*r,(h-a.top)*c,o.size,0,2*Math.PI),n?l.stroke():l.fill(),l.closePath()},g={drawBrush:()=>{l.fillStyle=o.selectedColor,l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([]),l.beginPath(),l.arc((d-a.left)*r,(h-a.top)*c,o.size,0,2*Math.PI),l.stroke(),l.fill(),l.closePath()},drawEraser:m,drawSpray:()=>{let e=Math.random()*o.size,t=Math.random(),n=Math.random()*o.size,s=Math.random();for(;Math.sqrt(Math.pow(e,2)+Math.pow(n,2))>o.size;)e=Math.random()*o.size,n=Math.random()*o.size;s>.5&&(n*=-1),t>.5&&(e*=-1),l.fillStyle=o.selectedColor,l.fillRect((d-a.left)*r+e,(h-a.top)*c+n,1,1)},drawBucket:()=>{let e,t,n,u,p,x,b=[];for(let I=0;I<o.selectedColor.length;I++){var m,g;"("===o.selectedColor[I]?m=I+1:")"===o.selectedColor[I]?(g=I,b.push(o.selectedColor.slice(m,g))):","===o.selectedColor[I]&&(b.push(o.selectedColor.slice(m,I)),m=I+1)}if(u=b[0]/360,p=b[1].slice(0,-1)/100,x=b[2].slice(0,-1)/100,0===p)e=255*x,t=255*x,n=255*x;else{let N,B,R,A,z;function F(e){return e<0?e+1:e>1?e-1:e}function D(e,t,o){return 6*o<1?t+6*(e-t)*o:2*o<1?e:3*o<2?t+(e-t)*(2/3-o)*6:t}N=x<.5?x*(1+p):x+p-x*p,B=2*x-N,R=F(u+1/3),A=F(u),z=F(u-1/3),e=Math.round(255*D(N,B,R)),t=Math.round(255*D(N,B,A)),n=Math.round(255*D(N,B,z))}function C(e){var t=Number(e).toString(16);return 1==t.length?"0"+t:t}let v="#"+C(e)+C(t)+C(n),f=[],y=parseInt("FF"+v.slice(5,7)+v.slice(3,5)+v.slice(1,3),16);const w=l.getImageData(0,0,i,s),j={width:w.width,height:w.height,data:new Uint32Array(w.data.buffer)};function M(e,t){return e<0||e<0||e>=j.width||e>=j.height?-1:j.data[t*w.width+e]}let k=M((d-a.left)*r,(h-a.top)*c);const T=(e,t,o,n)=>{f.push({left:e,right:t,line:o,direction:n})},P=(e,t,o,n)=>{let l,a,s=!1;for(a=e;a<t;++a){M(a,o)===k?s||(s=!0,l=a):s&&(s=!1,T(l,a-1,o,n))}s&&(s=!1,T(l,t-1,o,n))};T((d-a.left)*r,(d-a.left)*r,(h-a.top)*c,0);let S=0;for(;f.length>0&&S<1e4;){S++;const{left:Z,right:E,line:U,direction:L}=f.pop();let H=Z;for(;;){H--;if(M(H,U)!==k)break}++H;let X=E;for(;;){++X;if(M(X,U)!==k)break}const O=U*i;j.data.fill(y,O+H,O+X),L<=0?P(H,X,U-1,-1):(P(H,Z,U-1,-1),P(E,X,U-1,-1)),L>=0?P(H,X,U+1,1):(P(H,Z,U+1,1),P(E,X,U+1,1))}l.putImageData(w,0,0)},drawText:()=>{l.fillStyle=o.selectedColor,l.font=String(o.size+"px "+o.text.fontFamily),l.fillText(o.text.text,(x-a.left)*r,(b-a.top)*c)},drawPipette:()=>{let e=l.getImageData((d-a.left)*r,(h-a.top)*c,1,1),t=e.data[0],n=e.data[1],s=e.data[2];t/=255,n/=255,s/=255;let i=Math.min(t,n,s),u=Math.max(t,n,s),p=u-i,x=0,b=0,m=(u+i)/2;0===p?(b=0,x=0):(b=m<=.5?p/(u+i):p/(2-u-i),u===t?x=(n-s)/p:u===n?x=(s-t)/p+2:u===s&&(x=(t-n)/p+4)),x=Math.round(60*x),x<0&&(x+=360),b=Math.abs(100*b).toFixed(0),m=(100*m).toFixed(0);let g="hsl("+x+","+b+"%,"+m+"%)";if("Pipette"!==o.tool)return g;o.selectedColor===o.color1?o.setColor1(g):o.setColor2(g)},drawSelect:()=>{switch(o.clipboard.state){case"copy":if(!n&&x-u!==0&&b-p!==0){let e=l.getImageData((u-a.left)*r,(p-a.top)*c,x-u,b-p);o.setClipboard({data:e,state:"carry"})}break;case"cut":if(!n&&x-u!==0&&b-p!==0){let e=l.getImageData((u-a.left)*r,(p-a.top)*c,x-u,b-p);o.setClipboard({data:e,state:"carry"}),o.selectedColor===o.color1?l.fillStyle=o.color2:l.fillStyle=o.color1,l.fillRect((u-a.left)*r,(p-a.top)*c,x-u,b-p)}break;case"carry":l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([5]),t.down?(l.putImageData(o.clipboard.data,(d-a.left)*r,(h-a.top)*c),l.strokeRect((d-a.left)*r,(h-a.top)*c,o.clipboard.data.width,o.clipboard.data.height)):(l.putImageData(o.clipboard.data,(x-a.left)*r,(b-a.top)*c),l.strokeRect((x-a.left)*r,(b-a.top)*c,o.clipboard.data.width,o.clipboard.data.height));break;case"paste":n||(l.putImageData(o.clipboard.data,(x-a.left)*r,(b-a.top)*c),o.setClipboard({...o.clipboard,state:"none"}));break;default:l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([5]),l.strokeRect((u-a.left)*r,(p-a.top)*c,x-u,b-p)}},drawShape:()=>{l.strokeStyle=o.color1,l.fillStyle=o.color2,l.setLineDash([]),l.lineWidth=o.size;let e,t=(x-u)/2,s=(b-p)/2;e=Math.sqrt(Math.pow(x-u,2))/2<Math.sqrt(Math.pow(b-p,2))/2?Math.sqrt(Math.pow(x-u,2))/2:Math.sqrt(Math.pow(b-p,2))/2;let i=Math.sqrt(Math.pow((x-u)/(b-p),2)),d=Math.sqrt(Math.pow((b-p)/(x-u),2));o.subTool.stretch?i>d?d=1:i=1:(i=1,d=1),"Curve"!==o.subTool.shape&&"Line"!==o.subTool.shape&&(l.save(),l.translate((u+t-a.left)*r,(p+s-a.top)*c),l.rotate(Math.PI*o.subTool.angle/180)),"Rectangle"===o.subTool.shape?g["draw"+o.subTool.shape](t,s):g["draw"+o.subTool.shape](i,d,e),"Line"!==o.subTool.shape&&"Curve"!==o.subTool.shape&&(l.restore(),n&&(l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([5]),l.strokeRect((u-a.left)*r,(p-a.top)*c,x-u,b-p),((e,t,n)=>{l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([5]),l.beginPath(),l.arc((u+e-a.left)*r,(p+t-a.top)*c,n,0,2*Math.PI),l.stroke(),l.closePath()})(t,s,e),o.subTool.stretch&&((e,t,n,s,i)=>{l.strokeStyle=o.selectedColor,l.lineWidth=1,l.setLineDash([5]),l.beginPath(),l.ellipse((u+e-a.left)*r,(p+t-a.top)*c,n*i,s*i,Math.PI/180*o.subTool.angle,0,2*Math.PI),l.stroke(),l.closePath()})(t,s,i,d,e)))},drawLine:()=>{l.beginPath(),l.moveTo((u-a.left)*r,(p-a.top)*c),l.lineTo((x-a.left)*r,(b-a.top)*c),l.stroke()},drawCurve:()=>{let e={x:0,y:0},t={x:0,y:0},n={x:0,y:0},s={x:0,y:0};l.beginPath(),-1===o.curveControls.start.x?(e={x:u,y:p},t={x:x,y:b},n={x:u,y:p},s={x:x,y:b}):-1===o.curveControls.controlPoint1.x?(e=o.curveControls.start,t=o.curveControls.end,n={x:x,y:b},s=o.curveControls.end):-1===o.curveControls.controlPoint2.x?(e=o.curveControls.start,t=o.curveControls.end,n=o.curveControls.controlPoint1,s={x:x,y:b}):(e=o.curveControls.start,t=o.curveControls.end,n=o.curveControls.controlPoint1,s=o.curveControls.controlPoint2),l.moveTo((e.x-a.left)*r,(e.y-a.top)*c),l.bezierCurveTo((n.x-a.left)*r,(n.y-a.top)*c,(s.x-a.left)*r,(s.y-a.top)*c,(t.x-a.left)*r,(t.y-a.top)*c),l.stroke()},drawCircle:(e,t,n)=>{l.beginPath(),l.ellipse(0,0,e*n,t*n,0,0,2*Math.PI),o.subTool.fill&&l.fill(),l.stroke()},drawRectangle:(e,t)=>{o.subTool.fill&&l.fillRect(-e,-t,x-u,b-p),l.strokeRect(-e,-t,x-u,b-p)},drawPolygon:(e,t,n)=>{l.beginPath();for(let a=0;a<o.subTool.sides+2;a++)l.lineTo(e*n*Math.cos(2*Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*n*Math.sin(2*Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&l.fill(),l.stroke()},drawStar:(e,t,n)=>{l.beginPath();for(let a=0;a<2*o.subTool.sides+2;a++)a%2===0?l.lineTo(e*n*Math.cos(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*n*Math.sin(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle)):l.lineTo(e*n/3*Math.cos(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*n/3*Math.sin(Math.PI*a/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&l.fill(),l.stroke()},drawArrow:(e,t,n)=>{l.beginPath(),l.moveTo(e*-n*Math.cos(Math.PI/8),t*-n*Math.sin(Math.PI/8)),l.lineTo(0,t*-n*Math.sin(Math.PI/8)),l.lineTo(0,t*-n),l.lineTo(e*n,0),l.lineTo(0,t*n),l.lineTo(0,t*n*Math.sin(Math.PI/8)),l.lineTo(e*-n*Math.cos(Math.PI/8),t*n*Math.sin(Math.PI/8)),l.closePath(),o.subTool.fill&&l.fill(),l.stroke()},drawHeart:(e,t,n)=>{o.subTool.stretch&&(e>t?l.scale(e,1):l.scale(1,t)),l.beginPath(),l.moveTo(0,n),l.arc(-n/2,-n/5,n/2,3*Math.PI/4,0,!1),l.arc(n/2,-n/5,n/2,Math.PI,Math.PI/4,!1),l.closePath(),o.subTool.fill&&l.fill(),l.stroke()}};if(n){if(l.clearRect(0,0,i,s),"Magnifier"!==o.tool){if("Bucket"===o.tool||"Pipette"===o.tool)return;"Spray"===o.tool?m():g["draw"+o.tool]()}}else"Magnifier"!==o.tool&&g["draw"+o.tool]()},r=(e,t,o,n,l,a)=>{switch(n.tool){case"Brush":case"Eraser":i(e,t,n,!1),"drawing"!==l&&a("drawing");break;case"Bucket":i(e,t,n,!1),a("finished");break;case"Spray":for(let o=0;o<10;o++)i(e,t,n,!1);a("drawing");break;case"Text":if(0!==t.current.x&&0!==t.current.y){const o=e.getBoundingClientRect();n.setText({...n.text,left:t.start.x-o.x,top:t.start.y-o.y,color:n.selectedColor,size:n.size+"px",state:"preview"})}"confirm"===l&&(i(e,t,n,!1),n.setText({...n.text,text:"",state:"none"}),a("finished"));break;case"Pipette":i(e,t,n,!1);break;case"Magnifier":default:break;case"Select":"clipping"===l&&"carry"!==n.clipboard.state?i(e,t,n,!1):"confirm"===l&&(i(e,t,n,!1),a("finished"));break;case"Shape":if("Curve"===n.subTool.shape&&t.down){let e=n.curveControls.state,o=n.curveControls.start,s=n.curveControls.end,i=n.curveControls.controlPoint1,r=n.curveControls.controlPoint2;"none"===n.curveControls.state?(a("settingPoints"),e="start",o={x:t.start.x,y:t.start.y},s={x:t.end.x,y:t.end.y}):"start"===n.curveControls.state?"settingPoints"===l?s={x:t.end.x,y:t.end.y}:(a("settingPoints"),e="point1",i={x:t.end.x,y:t.end.y}):"point1"===n.curveControls.state?"settingPoints"===l?i={x:t.end.x,y:t.end.y}:(a("settingPoints"),e="point2",r={x:t.end.x,y:t.end.y}):"point2"===n.curveControls.state&&(r={x:t.end.x,y:t.end.y}),n.setCurveControls({...n.curveControls,state:e,start:o,end:s,controlPoint1:i,controlPoint2:r})}else"Curve"===n.subTool.shape&&"cancel"===l&&n.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}});"confirm"===l&&(i(e,t,n,!1),"Curve"===n.subTool.shape&&n.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),a("finished"),o({...t,start:{x:0,y:0},end:{x:0,y:0}}))}},c=(e,t,o,n)=>{if(null===e)t({File:{New:{action:"New",keybind:"Alt+N",disabled:!1},Open:{action:"Open",keybind:"Alt+O",disabled:!0,title:"Not Implemented"},Save:{action:"Save",keybind:"Ctrl+Alt+S",disabled:!0},"Save As":{action:"Save As",keybind:"Ctrl+Alt+Shift+S",disabled:!0,title:"Not Implemented"},"Change Name":{action:"Change Name",keybind:"F2",disabled:!1},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},Edit:{Undo:{action:"Undo",keybind:"Ctrl+Z",disabled:!1},Redo:{action:"Redo",keybind:"Ctrl+Y",disabled:!1},LineBreak1:{},Cut:{action:"Cut",keybind:"Ctrl+X",disabled:!0,title:"Not Implemented"},Copy:{action:"Copy",keybind:"Ctrl+C",disabled:!0,title:"Not Implemented"},Paste:{action:"Paste",keybind:"Ctrl+V",disabled:!0,title:"Not Implemented"},LineBreak2:{},"Select All":{action:"SelectAll",keybind:"Ctrl+A",disabled:!0,title:"Not Implemented"},Clear:{action:"SelectClear",keybind:"Ctrl+Shift+C",disabled:!0,title:"Not Implemented"}},View:{"Zoom In":{action:"Zoom In",keybind:"Alt++",disabled:!1},"Zoom Out":{action:"Zoom Out",keybind:"Alt+-",disabled:!1},"Zoom Reset":{action:"Zoom Reset",keybind:"Alt+0",disabled:!0},LineBreak1:{},"Tool Bar":{action:"toolBar",checkbox:!0,disabled:!1},"Bottom Bar":{action:"bottomNavBar",checkbox:!0,disabled:!1},"Top Bar":{action:"topNavBar",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{let l={...e};switch(n){case"history":let e=o.history.canUndo||o.history.canRedo;l={...l,File:{...l.File,Save:{...l.File.Save,disabled:!e},"Save As":{...l.File["Save As"],disabled:!e}},Edit:{...l.Edit,Undo:{...l.Edit.Undo,disabled:!o.history.canUndo},Redo:{...l.Edit.Redo,disabled:!o.history.canRedo}}};break;case"view":l={...l,View:{...l.View,"Tool Bar":{...l.View["Tool Bar"],checkbox:o.view.toolBar},"Bottom Bar":{...l.View["Bottom Bar"],checkbox:o.view.bottomNavBar},"Top Bar":{...l.View["Top Bar"],checkbox:o.view.topNavBar}}};break;case"zoom":l={...l,View:{...l.View,"Zoom In":{...l.View["Zoom In"],disabled:4===o.zoom},"Zoom Out":{...l.View["Zoom Out"],disabled:.25===o.zoom},"Zoom Reset":{...l.View["Zoom Reset"],disabled:1===o.zoom}}}}t(l)}},d=(e,t,o,n,l,a,s)=>{let i={},r={};const d=e.canvas.height,h=e.canvas.width,u=t.history,p=t.index;switch(n){case"undo":(()=>{if(u.length>0&&p>0){let n=!0;p-1===0&&(n=!1),e.putImageData(u[p-1],0,0),i={...t,index:p-1,canUndo:n,canRedo:!0},s(n),o(i),c(l,a,r={history:{...i}},"history")}})();break;case"redo":(()=>{let n=!0;p+1===u.length-1&&(n=!1),p<u.length-1&&(e.putImageData(u[p+1],0,0),i={...t,index:p+1,canUndo:!0,canRedo:n},o(i),s(!1),c(l,a,r={history:{...i}},"history"))})();break;case"save":u.length<50&&p===u.length?(i={history:[...u,e.getImageData(0,0,h,d)],index:p+1,canUndo:!0,canRedo:!1},o(i),c(l,a,r={history:{...i}},"history")):50===u.length&&p===u.length?(i={history:[...u.slice(1),e.getImageData(0,0,h,d)],index:p,canUndo:!0,canRedo:!1},o(i),c(l,a,r={history:{...i}},"history")):p<u.length&&(i={history:[...u.slice(0,p+1),e.getImageData(0,0,h,d)],index:p+1,canUndo:!0,canRedo:!1},o(i),c(l,a,r={history:{...i}},"history")),s(!1);break;case"clear":i={history:[e.getImageData(0,0,h,d)],index:0,canUndo:!1,canRedo:!1},o(i),s(!0),c(l,a,r={history:{...i}},"history")}},h=(e,t,o)=>{const n=e.canvas.height,l=e.canvas.width;switch(o){case"new":(e=>{e.fillStyle="#FFFFFF",e.fillRect(0,0,l,n)})(e);break;case"save":(e=>{let o=document.createElement("a");o.setAttribute("download",t+".png");let n=e.canvas.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");o.setAttribute("href",n),o.click()})(e)}},u=(e,t,o,n,a,s,i,u,p,x,b,m,g)=>{let C={};switch(n){case"Startup":h(t,s.name,"new"),d(t,s.history,s.setHistory,"clear",i,u,g),a(!1);break;case"New":((e,t,o)=>{const n=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("New")}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"Width",children:"Width"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"Width",type:"number",value:e.dimention.width,onChange:o=>{e.setDimention({...e.dimention,width:o.target.value}),t("New")}}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"Height",children:"Height"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"Height",type:"number",value:e.dimention.height,onChange:o=>{e.setDimention({...e.dimention,height:o.target.value}),t("New")}}),(0,l.jsx)("br",{})]}),a={Confirm:()=>{t("New Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"New File",info:n,actions:a})})(s,a,x),a(!1);break;case"New Confirm":x(null),h(t,s.name,"new"),d(t,s.history,s.setHistory,"clear",i,u,g),a(!1);break;case"Save":h(t,s.name,"save"),a(!1);break;case"Save As":break;case"Change Name":((e,t,o)=>{const n=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("Change Name")}}),(0,l.jsx)("br",{})]}),a={Confirm:()=>{t("Change Name Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"Change Name",info:n,actions:a})})(s,a,x),a(!1);break;case"Change Name Confirm":x(null),a(!1);break;case"Undo":d(t,s.history,s.setHistory,"undo",i,u,g),a(!1);break;case"Redo":d(t,s.history,s.setHistory,"redo",i,u,g),a(!1);break;case"Zoom In":s.zoom<4&&(s.zoom<1?(s.setZoom(s.zoom+.25),C={zoom:s.zoom+.25}):(s.setZoom(s.zoom+1),C={zoom:s.zoom+1}),c(i,u,C,"zoom")),a(!1);break;case"Zoom Out":s.zoom>.25&&(s.zoom<=1?(s.setZoom(s.zoom-.25),C={zoom:s.zoom-.25}):(s.setZoom(s.zoom-1),C={zoom:s.zoom-1}),c(i,u,C,"zoom")),a(!1);break;case"Zoom Reset":s.setZoom(1),C={zoom:1},c(i,u,C,"zoom"),a(!1);break;case"Zoom Min":C={zoom:.25},c(i,u,C,"zoom"),a(!1);break;case"Zoom Max":C={zoom:4},c(i,u,C,"zoom"),a(!1);break;case"Zoom Default":C={zoom:1},c(i,u,C,"zoom"),a(!1);break;case"Zoom Change":C={zoom:2},c(i,u,C,"zoom"),a(!1);break;case"Cut":case"Copy":case"Paste":case"Select All":case"Select Clear":a(!1);break;case"finished":d(t,s.history,s.setHistory,"save",i,u,g),a(!1);break;case"drawing":s.cursor.down?r(e,s.cursor,s.setCursor,o,n,a):a("finished");break;case"settingPoints":s.cursor.down?r(e,s.cursor,s.setCursor,o,n,a):a(!1);break;case"cancel":case"clipping":case"confirm":r(e,s.cursor,s.setCursor,o,n,a);break;case!1:s.cursor.down&&r(e,s.cursor,s.setCursor,o,n,a);break;case"topNavBar":s.setView({...s.view,topNavBar:!s.view.topNavBar}),C={view:{...s.view,topNavBar:!s.view.topNavBar}},c(i,u,C,"view"),a(!1);break;case"bottomNavBar":s.setView({...s.view,bottomNavBar:!s.view.bottomNavBar}),C={view:{...s.view,bottomNavBar:!s.view.bottomNavBar}},c(i,u,C,"view"),a(!1);break;case"toolBar":s.setView({...s.view,toolBar:!s.view.toolBar}),C={view:{...s.view,toolBar:!s.view.toolBar}},c(i,u,C,"view"),a(!1);break;case"Close":m||x({title:"Warning",info:"Do you want to download the file before closing?",actions:{Save:()=>{h(t,s.name,"save"),g(!0),x(null)},Close:()=>{g(!0),x(null)},Cancel:()=>{x(null),a(!1)}}});break;default:a(!1)}},p=e=>{let{action:t,setAction:o,appMenu:s,setAppMenu:i,appDialog:r,setAppDialog:c,contextMenu:d,canClose:h,setCanClose:p}=e;const x=(0,n.useRef)(null),b=(0,n.useContext)(a),m={tool:b.tool,subTool:b.subTool,curveControls:b.curveControls,setCurveControls:b.setCurveControls,size:b.size,selectedColor:b.color.selected,color1:b.color[1],setColor1:e=>b.setColor({...b.color,1:e,selected:e}),color2:b.color[2],setColor2:e=>b.setColor({...b.color,2:e,selected:e}),text:b.text,setText:b.setText,clipboard:b.clipboard,setClipboard:b.setClipboard};return(0,n.useEffect)((()=>{let e=x.current,n=e.getContext("2d",{willReadFrequently:!0});u(e,n,m,t,o,b,s,i,0,c,0,h,p)}),[b.cursor,t]),(0,n.useEffect)((()=>{let e=-1*(b.dimention.width/2-b.zoom*b.dimention.width/2)/b.zoom,t=-1*(b.dimention.height/2-b.zoom*b.dimention.height/2)/b.zoom;document.getElementById("previewCanvas").style.transform="scale(".concat(b.zoom,") translate(").concat(e,"px,").concat(t,"px)"),document.getElementById("drawCanvas").style.transform="scale(".concat(b.zoom,") translate(").concat(e,"px,").concat(t,"px)")}),[b.zoom]),(0,l.jsx)("canvas",{ref:x,id:"drawCanvas",height:b.dimention.height,width:b.dimention.width})},x=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,n.useContext)(a),r=(0,n.useRef)(null),c=s.cursor,d=s.setCursor,h={tool:s.tool,subTool:s.subTool,curveControls:s.curveControls,setCurveControls:s.setCurveControls,size:s.size,selectedColor:s.color.selected,color1:s.color[1],setColor1:e=>s.setColor({...s.color,1:e}),color2:s.color[2],setColor2:e=>s.setColor({...s.color,2:e}),text:s.text,setText:s.setText,clipboard:s.clipboard,setClipboard:s.setClipboard},u=e=>{if(0===e.button)switch(e.type){case"touchstart":case"mousedown":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!0,start:{x:e.clientX,y:e.clientY}});break;case"touchend":case"mouseup":d({...c,end:{x:e.clientX,y:e.clientY},down:!1});break;case"touchmove":case"mousemove":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,current:{x:e.clientX,y:e.clientY}});break;case"touchleave":case"mouseleave":d({...c,current:{x:0,y:0}});break;case"mouseenter":0!==e.buttons?d({...c,down:!0,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!1,current:{x:e.clientX,y:e.clientY}})}};(0,n.useEffect)((()=>{i(r.current,c,h,!0)}),[c,h]);return(0,l.jsx)("canvas",{ref:r,style:{color:h.selectedColor},className:"cursor"+h.tool,id:"previewCanvas",height:s.dimention.height,width:s.dimention.width,onMouseDown:e=>u(e),onMouseUp:e=>u(e),onMouseMove:e=>u(e),onMouseLeave:e=>u(e),onMouseEnter:e=>u(e),onContextMenu:e=>(e=>{e.preventDefault();let n={Undo:{action:()=>t("Undo"),disabled:!s.history.canUndo},Redo:{action:()=>t("Redo"),disabled:!s.history.canRedo},LineBreak:{},"Zoom In":{action:()=>t("Zoom In"),disabled:4===s.zoom},"Zoom Out":{action:()=>t("Zoom Out"),disabled:.25===s.zoom},"Zoom Reset":{action:()=>t("Zoom Reset"),disabled:1===s.zoom}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(n)})(e)})};var b=o(9804),m=o(7980),g=o(9106);const C=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,n.useContext)(a);if(s.view.topNavBar)return(0,l.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let n={Hide:{action:()=>t("topNavBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(n)})(e),children:[(0,l.jsx)("button",{onClick:()=>t("Undo"),disabled:!s.history.canUndo,children:(0,l.jsx)(b.qHd,{title:"Undo"})}),(0,l.jsx)("button",{onClick:()=>t("Redo"),disabled:!s.history.canRedo,children:(0,l.jsx)(b.qQW,{title:"Redo"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsx)("button",{onClick:()=>t("New"),children:(0,l.jsx)(m.QB2,{title:"New File"})}),(0,l.jsx)("button",{onClick:()=>t("Save"),disabled:!(s.history.canRedo||s.history.canUndo),children:(0,l.jsx)(m.RZ0,{title:"Save File"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)("button",{className:s.color.selected===s.color[1]?"buttonActive":"",onClick:()=>s.setColor({...s.color,selected:s.color[1]}),children:(0,l.jsx)("label",{htmlFor:"drawColor1",onClick:e=>e.preventDefault(),children:"1"})}),(0,l.jsx)(g.A,{color:s.color[1],setColor:e=>{s.setColor({...s.color,selected:e,1:e})},useAlpha:!1})]}),(0,l.jsx)("vertical-rect",{}),(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)("button",{className:s.color.selected===s.color[2]?"buttonActive":"",onClick:()=>s.setColor({...s.color,selected:s.color[2]}),children:(0,l.jsx)("label",{htmlFor:"drawColor2",onClick:e=>e.preventDefault(),children:"2"})}),(0,l.jsx)(g.A,{color:s.color[2],setColor:e=>s.setColor({...s.color,selected:e,2:e}),useAlpha:!1})]}),(0,l.jsx)("vertical-rect",{}),"Magnifier"===s.tool&&(0,l.jsxs)("select",{value:s.zoom,onChange:e=>{(e=>{s.setZoom(Number(e.target.value)),"0.25"===e.target.value?t("Zoom Min"):"4"===e.target.value?t("Zoom Max"):"1"===e.target.value?t("Zoom Default"):t("Zoom Change")})(e)},title:"Zoom",children:[(0,l.jsx)("option",{value:.25,children:"25%"}),(0,l.jsx)("option",{value:.5,children:"50%"}),(0,l.jsx)("option",{value:.75,children:"75%"}),(0,l.jsx)("option",{value:1,children:"100%"}),(0,l.jsx)("option",{value:2,children:"200%"}),(0,l.jsx)("option",{value:3,children:"300%"}),(0,l.jsx)("option",{value:4,children:"400%"})]}),"Select"!==s.tool&&"Pipette"!==s.tool&&"Magnifier"!==s.tool&&(0,l.jsxs)("select",{value:s.size,onChange:e=>{s.setSize(e.target.value)},title:"Text"===s.tool?"Font Size":"Shape"===s.tool?"Line Width":"Radius",children:[(0,l.jsx)("option",{value:1,children:"1px"}),(0,l.jsx)("option",{value:2,children:"2px"}),(0,l.jsx)("option",{value:4,children:"4px"}),(0,l.jsx)("option",{value:8,children:"8px"}),(0,l.jsx)("option",{value:16,children:"16px"}),(0,l.jsx)("option",{value:32,children:"32px"})]}),"Text"===s.tool&&(0,l.jsxs)("select",{title:"Font Family",value:s.text.fontFamily,onChange:e=>s.setText({...s.text,fontFamily:e.target.value}),children:[(0,l.jsx)("option",{children:"Arial"}),(0,l.jsx)("option",{children:"Times New Roman"}),(0,l.jsx)("option",{children:"Monospace"}),(0,l.jsx)("option",{children:"Verdana"}),(0,l.jsx)("option",{children:"Georgia"}),(0,l.jsx)("option",{children:"Courier New"}),(0,l.jsx)("option",{children:"Tahoma"}),(0,l.jsx)("option",{children:"Garamond"}),(0,l.jsx)("option",{children:"Impact"}),(0,l.jsx)("option",{children:"Comic Sans MS"}),(0,l.jsx)("option",{children:"Lucida Console"}),(0,l.jsx)("option",{children:"Lucida Sans Unicode"}),(0,l.jsx)("option",{children:"Palatino Linotype"}),(0,l.jsx)("option",{children:"Symbol"}),(0,l.jsx)("option",{children:"Wingdings"}),(0,l.jsx)("option",{children:"Helvetica"})]}),"Shape"===s.tool&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("select",{title:"Shape",value:s.subTool.shape,onChange:e=>s.setSubTool({...s.subTool,shape:e.target.value}),children:[(0,l.jsx)("option",{children:"Line"}),(0,l.jsx)("option",{children:"Curve"}),(0,l.jsx)("option",{children:"Circle"}),(0,l.jsx)("option",{children:"Rectangle"}),(0,l.jsx)("option",{children:"Polygon"}),(0,l.jsx)("option",{children:"Star"}),(0,l.jsx)("option",{children:"Arrow"}),(0,l.jsx)("option",{children:"Heart"})]}),("Polygon"===s.subTool.shape||"Star"===s.subTool.shape)&&(0,l.jsx)("input",{type:"number",title:"Sides",value:s.subTool.sides,onChange:e=>s.setSubTool({...s.subTool,sides:e.target.value}),min:"3",step:"1"})]})]})},v=e=>{let{subtool:t}=e,o=(0,n.useRef)(null);const a={drawCircleIcon:(e,o,n)=>{e.beginPath(),e.arc(o/2,n/2,n/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath()},drawEllipseIcon:(e,o,n)=>{e.scale(1,.5),e.beginPath(),e.beginPath(),e.arc(o/2,n,n/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath(),e.scale(1,2)},drawRectangleIcon:(e,o,n)=>{t.fill&&e.fillRect(0,n/4,o,n/2),e.strokeRect(0,n/4,o,n/2)},drawPolygonIcon:(e,o,n)=>{e.beginPath();for(let l=0;l<t.sides;l++)e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*l/t.sides-Math.PI/2),n/2+(n/2-3)*Math.sin(2*Math.PI*l/t.sides-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawLineIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/4,2),e.lineTo(3*t/4,o-2),e.closePath(),e.stroke()},drawCurveIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/6,2),e.bezierCurveTo(5*t/6,o/5,t/6,4*o/5-2,5*t/6,o-2),e.stroke()},drawStarIcon:(e,o,n)=>{e.beginPath(),e.moveTo(o/2,3);for(let l=0;l<2*t.sides;l++)l%2===0?e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*l/(2*t.sides)-Math.PI/2),n/2+(n/2-3)*Math.sin(2*Math.PI*l/(2*t.sides)-Math.PI/2)):e.lineTo(o/2+(o/4-3)*Math.cos(2*Math.PI*l/(2*t.sides)-Math.PI/2),n/2+(n/4-3)*Math.sin(2*Math.PI*l/(2*t.sides)-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawArrowIcon:(e,o,n)=>{e.beginPath(),e.moveTo(2,n/3),e.lineTo(o/2,n/3),e.lineTo(o/2,2),e.lineTo(o-2,n/2),e.lineTo(o/2,n-2),e.lineTo(o/2,2*n/3),e.lineTo(2,2*n/3),e.closePath(),e.stroke(),t.fill&&e.fill()},drawHeartIcon:(e,o,n)=>{e.beginPath(),e.moveTo(o/2,n-3),e.arc(o/4+1,n/3,o/4-1,3*Math.PI/4,0,!1),e.arc(3*o/4-1,n/3,o/4-1,Math.PI,Math.PI/4,!1),e.closePath(),e.stroke(),t.fill&&e.fill()}};return(0,n.useEffect)((()=>{const e=o.current.getContext("2d"),n=e.canvas.height,l=e.canvas.width;e.clearRect(0,0,l,n),e.fillStyle="lightgray",e.strokeStyle="white",e.lineWidth=2,a["draw"+t.shape+"Icon"](e,l,n)}),[t]),(0,l.jsx)("canvas",{ref:o,id:"shapeCanvas",width:"25",height:"25",title:"Custom Shape"})};var f=o(2639),y=o(8973),w=o(2021),j=o(7962),M=o(9698);const k=e=>{let{setAction:t,contextMenu:o}=e;const s=(0,n.useContext)(a),i=s.tool,r=s.subTool,c=s.setTool,d={Brush:(0,l.jsx)(f.Nw5,{title:"Brush"}),Eraser:(0,l.jsx)(m.qpr,{title:"Eraser"}),Bucket:(0,l.jsx)(m.ATI,{title:"Bucket"}),Spray:(0,l.jsx)(m.bOX,{title:"Spray Can"}),Text:(0,l.jsx)(w.tEi,{title:"Insert Text"}),Pipette:(0,l.jsx)(y._e3,{title:"Color Picker"}),Magnifier:(0,l.jsx)(j.JJh,{title:"Zoom"}),Select:(0,l.jsx)(M.ZdE,{title:"Selection"}),Shape:(0,l.jsx)(v,{subtool:r})};if(s.view.toolBar)return(0,l.jsx)("tool-bar",{onContextMenu:e=>(e=>{e.preventDefault();let n={Hide:{action:()=>t("toolBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(n)})(e),children:Object.keys(d).map((e=>(0,l.jsx)("button",{onClick:()=>c(e),className:i===e?"buttonActive":"",children:d[e]},e+"drawToolDropdown")))})},T=e=>{let{action:t,setAction:o,contextMenu:s}=e;const i=(0,n.useContext)(a);if(i.view.bottomNavBar)return(0,l.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let t={Hide:{action:()=>o("bottomNavBar")}};s.setOpen(),s.setPosition(e.clientX,e.clientY),s.setContent(t)})(e),children:["Text"===i.tool&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{title:"Confirm Text",onClick:()=>o("confirm"),children:(0,l.jsx)("small",{children:"Confirm"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsx)("input",{type:"text",title:"Text Input",value:i.text.text,onChange:e=>i.setText({...i.text,text:e.target.value})})]}),"Select"===i.tool?(0,l.jsx)(l.Fragment,{children:"clipping"===t&&"carry"===i.clipboard.state?(0,l.jsx)("button",{title:"Paste",onClick:()=>{o("confirm"),i.setClipboard({...i.clipboard,state:"paste"})},children:(0,l.jsx)("small",{children:"Paste"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{title:"Cut",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"cut"})},children:(0,l.jsx)("small",{children:"Cut"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsx)("button",{title:"Copy",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"copy"})},children:(0,l.jsx)("small",{children:"Copy"})})]})}):null,"Shape"===i.tool?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{title:"Confirm Shape",onClick:()=>o("confirm"),children:(0,l.jsx)("small",{children:"Confirm"})}),(0,l.jsx)("vertical-rect",{}),"Curve"===i.subTool.shape&&(0,l.jsx)("button",{title:"Cancel Shape",onClick:()=>o("cancel"),children:(0,l.jsx)("small",{children:"Cancel"})}),"Line"!==i.subTool.shape&&"Curve"!==i.subTool.shape?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{title:"Fill",className:i.subTool.fill?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,fill:!i.subTool.fill}),children:(0,l.jsx)("small",{children:"Fill"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsx)("button",{title:"Stretch",className:i.subTool.stretch?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,stretch:!i.subTool.stretch}),children:(0,l.jsx)("small",{children:"Stretch"})}),(0,l.jsx)("vertical-rect",{}),(0,l.jsxs)("button",{children:[(0,l.jsx)("label",{htmlFor:"rotationAngle",children:"Rotation"}),(0,l.jsx)("input",{type:"number",title:"Rotation Angle",id:"rotationAngle",value:i.subTool.angle,onChange:e=>i.setSubTool({...i.subTool,angle:e.target.value}),step:"1"})]}),(0,l.jsx)("vertical-rect",{}),"Polygon"===i.subTool.shape||"Star"===i.subTool.shape?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{children:[(0,l.jsx)("label",{htmlFor:"startAngle",children:"Start Angle"}),(0,l.jsx)("input",{type:"number",title:"Start Angle",id:"startAngle",value:i.subTool.startAngle,onChange:e=>i.setSubTool({...i.subTool,startAngle:e.target.value}),step:"1"})]}),(0,l.jsx)("vertical-rect",{})]}):null]}):null]}):null]})};function P(e){let{isSelected:t,action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}=e;(0,n.useContext)(a);return(0,l.jsx)(s,{children:(0,l.jsxs)("app-container",{children:[(0,l.jsx)(C,{setAction:i,contextMenu:u}),(0,l.jsxs)("app-body",{children:[(0,l.jsx)(k,{setAction:i,contextMenu:u}),(0,l.jsxs)("canvas-container",{children:[(0,l.jsx)(p,{action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}),(0,l.jsx)(x,{setAction:i,contextMenu:u})]})]}),(0,l.jsx)(T,{action:o,setAction:i,contextMenu:u})]})})}},9106:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(5043),l=o(7950);function a(e){let t=e[0],o=e[1],n=e[2];t/=255,o/=255,n/=255;let l=Math.min(t,o,n),a=Math.max(t,o,n),s=a-l,i=0,r=0,c=(a+l)/2;return 0===s?(r=0,i=0):(r=c<=.5?s/(a+l):s/(2-a-l),a===t?i=(o-n)/s:a===o?i=(n-t)/s+2:a===n&&(i=(t-o)/s+4)),i=Math.round(60*i),i<0&&(i+=360),r=Math.abs(100*r).toFixed(0),c=(100*c).toFixed(0),[i,r,c]}function s(e){var t=e[0],o=e[1],n=e[2],l=e[3];t=parseInt(e[1],16),o=parseInt(e[2],16),n=parseInt(e[3],16),l=parseInt(e[4],16)/255;t/=255,o/=255,n/=255;let a=Math.min(t,o,n),s=Math.max(t,o,n),i=s-a,r=0,c=0,d=(s+a)/2;return 0===i?(c=0,r=0):(c=d<=.5?i/(s+a):i/(2-s-a),s===t?r=(o-n)/i:s===o?r=(n-t)/i+2:s===n&&(r=(t-o)/i+4)),r=Math.round(60*r),r<0&&(r+=360),c=Math.abs(100*c).toFixed(0),d=(100*d).toFixed(0),[r,c+"%",d+"%",l]}o(7915);var i=o(579);function r(e){let{color:t,setColor:o,useAlpha:r}=e;const c=(0,n.useRef)(null),d=(0,n.useRef)(null),h=(0,n.useRef)(null),u=(0,n.useRef)(null),[p,x]=(0,n.useState)({x:0,y:0}),[b,m]=(0,n.useState)(0),[g,C]=(0,n.useState)(0),[v,f]=(0,n.useState)(!1),[y,w]=(0,n.useState)(0),[j,M]=(0,n.useState)(50),[k,T]=(0,n.useState)(100),[P,S]=(0,n.useState)(100);(0,n.useEffect)((()=>{v&&c.current.focus()}),[v]);(0,n.useEffect)((()=>{if(t)if(r){let n=[];if("#"===t[0])n=s(function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16)/255]:null}(t));else if("rgba"===t.slice(0,4))n=s(t);else if("hsla"===t.slice(0,4))for(let l=0;l<t.length;l++){"("===t[l]?e=l+1:")"===t[l]?(o=l,n.push(t.slice(e,o))):","===t[l]&&(n.push(t.slice(e,l)),e=l+1)}if(console.log(n),w(Number(n[0])),T(Number(n[1].slice(0,n[1].length-1))),M(Number(n[2].slice(0,n[2].length-1))),S(Number(n[3])),v){const e=d.current.getBoundingClientRect();x({x:n[0]/360*e.width,y:(100-n[2].slice(0,n[2].length-1))/100*e.height});const t=h.current.getBoundingClientRect();m((100-n[1].slice(0,n[1].length-1))/100*t.height);const o=u.current.getBoundingClientRect();C(n[3]*o.width)}}else{let n=[];if("#"===t[0])n=a(function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}(t));else if("rgb"===t.slice(0,3))n=a(t);else if("hsl"===t.slice(0,3))for(let l=0;l<t.length;l++){var e,o;"("===t[l]?e=l+1:")"===t[l]?(o=l,n.push(t.slice(e,o))):","===t[l]&&(n.push(t.slice(e,l)),e=l+1)}else n=function(e){switch(e){case"red":case"maroon":return[0,"100%","50%"];case"green":case"lime":return[120,"100%","50%"];case"blue":case"aqua":case"navy":return[240,"100%","50%"];case"yellow":case"olive":return[60,"100%","50%"];case"cyan":case"teal":return[180,"100%","50%"];case"magenta":return[300,"100%","50%"];case"black":default:return[0,"0%","0%"];case"white":return[0,"0%","100%"];case"gray":case"grey":return[0,"0%","50%"];case"lightgray":case"lightgrey":return[0,"0%","75%"];case"darkgray":case"darkgrey":return[0,"0%","25%"];case"brown":return[30,"50%","50%"];case"orange":return[30,"100%","50%"];case"purple":return[270,"100%","50%"];case"pink":return[330,"100%","50%"]}}(t);if(console.log(n),w(Number(n[1])),T(Number(n[1].slice(0,n[1].length-1))),M(Number(n[2].slice(0,n[2].length-1))),v){const e=d.current.getBoundingClientRect();x({x:n[0]/360*e.width,y:(100-n[2].slice(0,n[2].length-1))/100*e.height});const t=h.current.getBoundingClientRect();m((100-n[1].slice(0,n[1].length-1))/100*t.height)}}}),[v,t,r]);(0,n.useEffect)((()=>{if(d.current){(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height);let t=e.canvas.width/360,o=e.canvas.height/100;for(let n=0;n<360;n++)for(let l=0;l<100;l++)e.fillStyle="hsl(".concat(n,",").concat(k,"%,").concat(100-l,"%)"),e.fillRect(n*t,l*o,(n+1)*t,(l+1)*o)})(d.current.getContext("2d",{alpha:!1}))}}),[v,k]);const I=e=>{if(0!==e.buttons){const t=d.current.getBoundingClientRect();let o=e.clientX-t.left,n=e.clientY-t.top;o>=0&&o<=t.width&&n>=0&&n<=t.height&&(x({x:o,y:n}),w(Math.floor(360*o/t.width)),M(100-Math.floor(100*n/t.height)))}},N=e=>{if(0!==e.buttons){const t=h.current.getBoundingClientRect();let o=e.clientX-t.left,n=e.clientY-t.top;o>=0&&o<=t.width&&n>=0&&n<=t.height&&(T(100-Math.floor(100*n/t.height)),m(n))}},B=e=>{if(0!==e.buttons){const t=u.current.getBoundingClientRect();let o=e.clientX-t.left,n=e.clientY-t.top;o>=0&&o<=t.width&&n>=0&&n<=t.height&&(S(Math.floor(100*o/t.width)/100),C(o))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("color-picker-button",{onClick:()=>f(!v),children:(0,i.jsx)("button",{style:{background:t}})}),v&&(0,l.createPortal)((0,i.jsxs)("color-picker-window",{tabIndex:"0",ref:c,onBlur:e=>{var t;(t=e).currentTarget.contains(t.relatedTarget)||f(!1)},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("hue-light-map",{children:[(0,i.jsx)("canvas",{onMouseDown:e=>I(e),onMouseMove:e=>I(e),ref:d,width:"180",height:"180",style:{opacity:r?P:1}}),(0,i.jsx)("slider-thumb",{style:{top:p.y,left:p.x,background:r?"hsla(".concat(y,",").concat(k,"%,").concat(j,"%, ").concat(P,")"):"hsl(".concat(y,",").concat(k,"%,").concat(j,"%)")},onMouseDown:e=>I(e),onMouseMove:e=>I(e)})]}),(0,i.jsxs)("saturation-slider",{title:"Saturation",children:[(0,i.jsx)("div",{ref:h,style:{background:"linear-gradient(0deg, hsl(".concat(y,",0%,").concat(j,"%), hsla(").concat(y,",100%,").concat(j,"%))")},onMouseDown:e=>N(e),onMouseMove:e=>N(e)}),(0,i.jsx)("slider-thumb",{style:{top:b,background:"hsla(".concat(y,",").concat(k,"%,").concat(j,"%, ").concat(P,")")},onMouseDown:e=>N(e),onMouseMove:e=>N(e)})]})]}),r&&(0,i.jsxs)("alpha-slider",{title:"Alpha",children:[(0,i.jsx)("div",{ref:u,style:{background:"linear-gradient(90deg, hsla(".concat(y,",").concat(k,"%,").concat(j,"%, 0), hsla(").concat(y,",").concat(k,"%,").concat(j,"%, 1))")},onMouseDown:e=>B(e),onMouseMove:e=>B(e)}),(0,i.jsx)("slider-thumb",{style:{left:g,background:"hsl(".concat(y,",").concat(k,"%,").concat(j,"%, ").concat(P,")")},onMouseDown:e=>B(e),onMouseMove:e=>B(e)})]}),(0,i.jsxs)("color-inputs",{children:[(0,i.jsxs)("div",{children:["Hue",(0,i.jsx)("input",{type:"number",min:"0",max:"360",value:y,onChange:e=>(e=>{w(e);const t=d.current.getBoundingClientRect();x({...p,x:e/360*t.width})})(e.target.value)})]}),(0,i.jsxs)("div",{children:["Lum.",(0,i.jsx)("input",{type:"number",min:"0",max:"100",value:j,onChange:e=>(e=>{M(e);const t=d.current.getBoundingClientRect();x({...p,y:(100-e)/100*t.height})})(e.target.value)})]}),(0,i.jsxs)("div",{children:["Sat.",(0,i.jsx)("input",{type:"number",min:"0",max:"100",value:k,onChange:e=>(e=>{T(e);const t=h.current.getBoundingClientRect();m((100-e)/100*t.height)})(e.target.value)})]}),r&&(0,i.jsxs)("div",{children:["Alpha",(0,i.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:P,onChange:e=>(e=>{S(e);const t=u.current.getBoundingClientRect();C(e*t.width)})(e.target.value)})]})]}),(0,i.jsx)("color-button",{children:(0,i.jsx)("button",{style:{background:r?"hsla(".concat(y,",").concat(k,"%,").concat(j,"%, ").concat(P,")"):"hsl(".concat(y,",").concat(k,"%,").concat(j,"%)")},onClick:()=>{o(r?"hsla(".concat(y,",").concat(k,"%,").concat(j,"%, ").concat(P,")"):"hsl(".concat(y,",").concat(k,"%,").concat(j,"%)"))},children:"Apply"})})]}),document.getElementById("root"))]})}}}]);
//# sourceMappingURL=411.d213627b.chunk.js.map