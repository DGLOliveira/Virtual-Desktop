"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[255],{255:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var o=a(5043),n=a(184),r=a(1462);const s=JSON.parse('[{"Level":0,"Bars":15,"Matrix":[{"x":1,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":2,"w":4,"h":3,"s":1},{"x":13,"y":2,"w":4,"h":3,"s":1},{"x":19,"y":2,"w":4,"h":3,"s":1},{"x":25,"y":2,"w":4,"h":3,"s":1},{"x":1,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":6,"w":4,"h":3,"s":1},{"x":13,"y":6,"w":4,"h":3,"s":1},{"x":19,"y":6,"w":4,"h":3,"s":1},{"x":25,"y":6,"w":4,"h":3,"s":1},{"x":1,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":10,"w":4,"h":3,"s":1},{"x":13,"y":10,"w":4,"h":3,"s":1},{"x":19,"y":10,"w":4,"h":3,"s":1},{"x":25,"y":10,"w":4,"h":3,"s":1}]},{"Level":1,"Bars":15,"Matrix":[{"x":0,"y":2,"w":4,"h":3,"s":1},{"x":7,"y":3,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":3,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":4,"h":3,"s":1},{"x":0,"y":6,"w":4,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":4,"h":3,"s":1},{"x":0,"y":10,"w":4,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":10,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":10,"w":4,"h":3,"s":1}]},{"Level":2,"Bars":15,"Matrix":[{"x":0,"y":2,"w":2,"h":3,"s":1},{"x":7,"y":4,"w":2,"h":3,"s":1},{"x":14,"y":2,"w":2,"h":3,"s":1},{"x":21,"y":4,"w":2,"h":3,"s":1},{"x":26,"y":2,"w":2,"h":3,"s":1},{"x":0,"y":6,"w":2,"h":3,"s":1},{"x":7,"y":7,"w":2,"h":3,"s":1},{"x":14,"y":6,"w":2,"h":3,"s":1},{"x":21,"y":7,"w":2,"h":3,"s":1},{"x":26,"y":6,"w":2,"h":3,"s":1},{"x":0,"y":16,"w":2,"h":3,"s":1},{"x":7,"y":11,"w":2,"h":3,"s":1},{"x":14,"y":16,"w":2,"h":3,"s":1},{"x":21,"y":11,"w":2,"h":3,"s":1},{"x":26,"y":16,"w":2,"h":3,"s":1}]},{"Level":3,"Bars":0,"Matrix":[]}]'),c=(e,t,a)=>{e.fillStyle="silver",e.fillRect(0,0,t,1),e.fillRect(0,0,1,a),e.fillRect(t-1,0,1,a),e.fillRect(0,a-1,t,1)};var l=a(579);const i=60,d=1e3/i,u=30,h=30,y={x:12,y:27,w:6,speed:.25},x={x:15,y:50,r:.5,dirX:.25,dirY:-.25},f={x:15,y:52,r:.25,dirX:0,dirY:-.25,t:-5,color:""};function p(e){let{controls:t,updateScoreboard:a,isSelected:n,gameState:r,setGameState:p,canvasZoom:w}=e;const S=(0,o.useRef)(null),[v,m]=(0,o.useState)(JSON.parse(JSON.stringify(s))),[g,b]=(0,o.useState)(0),[k,T]=(0,o.useState)(v[g]),[B,j]=(0,o.useState)(k.Bars),[D,M]=(0,o.useState)(0),[P,C]=(0,o.useState)(0);let[E,O]=(0,o.useState)(Object.create(y)),[R,F]=(0,o.useState)(Object.create(x)),[N]=(0,o.useState)(Object.create(f));N.color="blue";let[A]=(0,o.useState)(Object.create(f));A.color="green";let[G]=(0,o.useState)(Object.create(f));G.color="red";let[L]=(0,o.useState)(Object.create(f));L.color="yellow";let[I]=(0,o.useState)(Object.create(f));I.color="cyan";let[Y]=(0,o.useState)(Object.create(f));Y.color="magenta";let[K]=(0,o.useState)(Object.create(f));K.color="white";const U={time:0,score:0,gameState:"Start"};let[X,Z]=(0,o.useState)(0);(0,o.useEffect)((()=>{t.pause&&("Play"===r?p("Pause"):"Pause"===r?p("Play"):"Win"!==r&&"End"!==r&&"Start"!==r||p("Restart"))}),[t]),(0,o.useEffect)((()=>{t.left&&!t.right&&E.x+E.w>E.w&&(E.x=E.x-E.speed),t.right&&!t.left&&E.x+E.w<h&&(E.x=E.x+E.speed)}),[t,D]);const W=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},J=(e,t,a,o)=>{for(let n=0;n<12;n++)e.fillStyle=o.color,e.scale(1,.5),e.beginPath(),e.arc(o.x*t+Math.cos(2*Math.PI/12*n)*o.t*2*t,o.y*a+2*Math.sin(2*Math.PI/12*n)*o.t*2*a,o.r/1*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)},V=(e,t,a,o)=>{switch(W(e),e.fillStyle="red",e.font="40px monospace",o){case 4:default:e.fillText("Next Level",5*t,17*a,500);break;case 3:e.fillText("3 sec",9*t,17*a,500);break;case 2:e.fillText("2 sec",9*t,17*a,500);break;case 1:e.fillText("1 sec",9*t,17*a,500)}},H=(e,t,a)=>{let o,n;o=E.x,n=E.y,e.fillStyle="cyan",e.fillRect(o*t,n*a,E.w*t,a)},$=(e,t,a,o)=>{let n;switch(o.h){case 3:n="green";break;case 2:n="yellow";break;case 1:n="orange";break;default:n="blue"}e.fillStyle=n,e.fillRect(o.x*t,o.y*a,o.w*t,a)},q=(e,t,a)=>{for(let o=0;o<k.Bars;o++)k.Matrix[o].h>0&&$(e,t,a,k.Matrix[o])},Q=e=>{e.h-1>=0&&(e.h=e.h-1,X+=e.s,Z(X)),0===e.h&&(j(B-1),B-1===0&&p("LevelUp"))},z=e=>{let t;0!==e.x&&e.x!==h||(e.dirX=-e.dirX),0===e.y?e.dirY=-e.dirY:e.y===2*u&&p("End"),e.y+e.r===2*E.y&&e.x>=E.x&&e.x<=E.x+E.w&&(e.dirY=-e.dirY);for(let a=0;a<k.Bars;a++)t=k.Matrix[a],t.h>0&&e.x+e.r>=t.x&&e.x-e.r<=t.x+t.w&&e.y+e.r>=2*t.y&&e.y-e.r<=2*(t.y+1)&&(e.x+e.r>t.x&&e.x-e.r<t.x+t.w&&(e.dirY=-e.dirY,Q(t)),e.y+e.r>2*t.y&&e.y-e.r<2*(t.y+1)&&(e.dirX=-e.dirX,Q(t)))},_=(e,t,a,o)=>{e.fillStyle="#FFFFFF",e.scale(1,.5),e.beginPath(),e.arc(o.x*t,o.y*a,o.r*t,0,2*Math.PI),e.fill(),e.closePath(),e.scale(1,2)};return(0,o.useEffect)((()=>{const e=S.current.getContext("2d");let t,o=e.canvas.width/h,n=e.canvas.height/u;switch(r){case"Play":W(e),c(e,e.canvas.width,e.canvas.height),H(e,o,n),q(e,o,n),R.x=R.x+R.dirX,R.y=R.y+R.dirY,z(R),_(e,o,n,R),setTimeout((()=>{M(D+1)}),[d]);break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,17*a,500)})(e,o,n);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,o,n);break;case"Restart":m(JSON.parse(JSON.stringify(s))),b(0),T(v[g]),j(k.Bars),F(Object.create(x)),O(Object.create(y)),Z(0),M(1),p("Play");break;case"LevelUp":g+1===3?p("Win"):(V(e,o,n,4),setTimeout((()=>{W(e),V(e,o,n,3)}),[1e3]),setTimeout((()=>{V(e,o,n,2)}),[2e3]),setTimeout((()=>{V(e,o,n,1)}),[3e3]),setTimeout((()=>{b(g+1),T(v[g+1]),j(k.Bars),F(Object.create(x)),W(e),q(e,o,n),p("Play")}),[4e3]));break;case"Win":T(v[3]),((e,t,a)=>{W(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",8*t,17*a,500)})(e,o,n),H(e,o,n),((e,t,a)=>{let o;for(let n=0;n<=6;n++){switch(n){case 0:o=N;break;case 1:o=A;break;case 2:o=G;break;case 3:o=L;break;case 4:o=I;break;case 5:o=Y;break;case 6:o=K}o.t<=-5?(o.t=Math.floor(4*Math.random())+1,o.x=E.x+E.w/2,o.y=52,o.dirX=(Math.random()-.5)/8,o.dirY=-.25):o.t>3?o.t=o.t-1/i:o.t>0?(o.x=o.x+o.dirX,o.y=o.y+o.dirY,z(o),_(e,t,a,o),o.t=o.t-1/i):o.t>-5&&(J(e,t,a,o),o.t=o.t-1/i)}})(e,o,n),setTimeout((()=>{C(P+1)}),[d]);break;default:W(e)}U.time=Math.floor(D/i),U.score=X,U.gameState=r,a(U);const l=()=>{t=window.requestAnimationFrame(l)};return l(),()=>{window.cancelAnimationFrame(t)}}),[D,P,r]),(0,l.jsx)("canvas",{ref:S,style:{transform:`scale(${w})`},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault()})}const w=e=>{let{controls:t,updateScoreboard:a,isSelected:n,gameState:r,setGameState:s,canvasZoom:i}=e;let d=(0,o.useRef)(null),[u,h]=(0,o.useState)(!1),[y]=(0,o.useState)({x:0,y:0}),[x,f]=(0,o.useState)(0),[p]=(0,o.useState)({direction:"right",x:0,y:0}),[w,S]=(0,o.useState)("right"),[v,m]=(0,o.useState)({x:[],y:[]}),[g,b]=(0,o.useState)(!1),[k,T]=(0,o.useState)(0);const B={time:0,score:0,gameState:"Start"};(0,o.useEffect)((()=>{t.pause&&t.pause&&("Play"===r?s("Pause"):"Pause"===r?s("Play"):"Win"!==r&&"End"!==r&&"Start"!==r||s("Restart"))}),[t]),(0,o.useEffect)((()=>{void 0===v.x[0]?t.up?p.direction="up":t.down?p.direction="down":t.left?p.direction="left":t.right&&(p.direction="right"):t.up&&"down"!==w?p.direction="up":t.down&&"up"!==w?p.direction="down":t.left&&"right"!==w?p.direction="left":t.right&&"left"!==w&&(p.direction="right")}),[t,k]);const j=(e,t,a)=>{e.fillStyle="#000000",e.fillRect(0,0,t,a)};return(0,o.useEffect)((()=>{const e=d.current.getContext("2d");let t,o=e.canvas.width/30,n=e.canvas.height/30;"Play"===r?(j(e,e.canvas.width,e.canvas.height),c(e,e.canvas.width,e.canvas.height),((e,t,a)=>{let o,n,r,s=!1;if(u)o=y.x,n=y.y;else{if(y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random()),void 0===v.x[0])for(;y.x===p.x&&y.y===p.y;)y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());else{for(let e=0;e<v.x.length;e++)y.x===v.x[e]&&(r=!0),y.y===v.y[e]&&(s=!0);for(;!0===r&&!0===s;){y.x=Math.floor(30*Math.random()),y.y=Math.floor(30*Math.random());let e=!1,t=!1;for(let a=0;a<v.x.length;a++)y.x===v.x[a]&&(e=!0),y.y===v.y[a]&&(t=!0);r=e,s=t}}o=y.x,n=y.y,h(!0)}e.fillStyle="#00FF00",e.fillRect(o*t,n*a,t,a)})(e,o,n),((e,t,a)=>{let o,n;if(g)switch(p.direction){case"right":o=p.x+1,n=p.y,p.x=p.x+1;break;case"left":o=p.x-1,n=p.y,p.x=p.x-1;break;case"up":o=p.x,n=p.y-1,p.y=p.y-1;break;case"down":o=p.x,n=p.y+1,p.y=p.y+1}else o=10*t,n=10*a,b(!0),p.x=10,p.y=10;if(S(p.direction),void 0!==v.x[2])for(let r=2;r<v.x.length;r++)v.x[r]===p.x&&v.y[r]===p.y&&s("End");p.x>=30||p.x<0||p.y<0||p.y>=30?s("End"):y.x===p.x&&y.y===p.y&&(h(!1),f(x+1),v.x.unshift(p.x),v.y.unshift(p.y)),e.fillStyle="#00FFFF",e.fillRect(o*t,n*a,t,a)})(e,o,n),((e,t,a)=>{for(let o=0;o<v.x.length;o++)e.fillStyle="#00FFFF",e.fillRect(v.x[o]*t,v.y[o]*a,t,a);v.x.unshift(p.x),v.y.unshift(p.y),v.x.pop(),v.y.pop()})(e,o,n),setTimeout((()=>{T(k+1)}),[1e3/(x/2+4)])):"Pause"===r?((e,t,a)=>{j(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Paused",8*t,17*a,500)})(e,o,n):"End"===r?(j(e,e.canvas.width,e.canvas.height),((e,t,a)=>{j(e,t,a),e.fillStyle="#FF0000",e.font="20px monospace",e.fillText("Game Over",5*t,17*a,500)})(e,o,n)):"Restart"===r&&(s("Play"),T(1),h(!1),b(!1),f(0),m({x:[],y:[]})),B.time=Math.floor(k/(x/2+4)),B.score=x,B.gameState=r,a(B);const l=()=>{t=window.requestAnimationFrame(l)};return l(),()=>{window.cancelAnimationFrame(t)}}),[k,r]),(0,l.jsx)("canvas",{height:"150",width:"150",ref:d,style:{transform:`scale(${i})`},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault()})},S=JSON.parse('{"1":{"Level":1,"Enemies":72,"Matrix":[[0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,9,0,0,9,0,9,0,0,9,0,9,0,0,9,0,9,0,9,0,9,0,0,9,0]]}}'),v=60,m=1e3/v,g=150,b=300,k=10,T={id:1,x:10,y:10,row:0,life:1,currSprite:1,totalSprites:2,w:10,h:10,hit:!1,color:"green",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,0,1,1,0,1,1,0],[1,1,0,0,1,1,0,0,1,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,0,1,0,1,1,0,1,0,0],[0,1,1,0,1,1,0,1,1,0],[0,1,0,0,0,0,0,0,1,1]]}},B={id:2,x:10,y:10,row:0,life:2,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"red",sprites:{1:[[0,1,0,0,0,0,0,0,1,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,0,0,0,0,1,1,0],[0,0,1,1,0,0,1,1,0,0]],2:[[0,0,1,0,0,0,0,1,0,0],[0,1,1,0,0,0,0,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,0,0,1,1,1,1],[1,1,0,0,0,0,0,0,1,1],[1,1,0,0,0,0,0,0,1,1],[0,1,1,1,0,0,1,1,1,0]]}},j={id:3,x:10,y:10,row:0,life:3,hit:!1,currSprite:1,totalSprites:2,w:10,h:10,color:"cyan",sprites:{1:[[0,1,1,0,0,0,0,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,1]],2:[[0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0,1,1],[1,1,0,0,1,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,1,0,0,0,0,0,0,1,1]]}},D={id:8,x:10,y:10,life:1,hit:!1,currSprite:1,totalSprites:2,w:20,h:10,color:"magenta",sprites:{1:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]],2:[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0]]}},M={id:10,x:10,y:130,speed:2,move:"none",shooting:!1,cooling:0,currSprite:1,w:10,h:10,color:"white",cooldown:250,sprites:{1:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,1,0,1,1,1,1,0,1,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,0,0,1,0,0,1,0,0,1]]}},P={id:9,x:10,y:10,currSprite:1,w:10,h:10,color:"gray",sprites:{1:[[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,0,0]]}},C={id:"player",x:10,y:10,h:9,w:2,speed:5,color:"white",currSprite:1,totalSprites:2,sprites:{1:[[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1]],2:[[1,1],[0,1],[1,1],[1,0],[1,1],[0,1],[1,1],[1,0],[1,1]]}},E={id:"invader",x:10,y:10,currSprite:1,totalSprites:1,w:2,h:9,speed:2,color:"yellow",sprites:{1:[[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1]]}};function O(e){let{controls:t,updateScoreboard:a,isSelected:n,gameState:r,setGameState:s,canvasZoom:i}=e;const d=(0,o.useRef)(null),[u,h]=(0,o.useState)(0),[y,x]=(0,o.useState)(3),[f,p]=(0,o.useState)(1),[w,O]=(0,o.useState)(0),[R,F]=(0,o.useState)(0),[N,A]=(0,o.useState)({index:0,rows:[]}),[G,L]=(0,o.useState)([]),[I,Y]=(0,o.useState)([]),[K,U]=(0,o.useState)([]),X=500;let[Z,W]=(0,o.useState)(Object.create(M));const J={time:0,score:0,gameState:"Start"};(0,o.useEffect)((()=>{if(t.pause)switch(r){case"Play":s("Pause");break;case"Pause":s("Play");break;case"Win":case"End":case"Start":s("Restart")}}),[t]),(0,o.useEffect)((()=>{"Play"===r&&(t.left&&!t.right&&Z.x+Z.w>Z.w?Z.x=Z.x-Z.speed:t.right&&!t.left&&Z.x+Z.w<b?Z.x=Z.x+Z.speed:t.left&&t.right?Z.move="none":t.left||t.right||(Z.move="none"),(t.up||t.one)&&0===Z.cooling&&(Z.shooting=!0))}),[t,w]);const V=e=>{e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)},H=(e,t)=>{!0===t.hit?e.fillStyle="white":e.fillStyle=t.color;for(let a=0;a<t.sprites[t.currSprite].length;a++)for(let o=0;o<t.sprites[t.currSprite][a].length;o++)1===t.sprites[t.currSprite][a][o]&&e.fillRect(t.x+o,t.y+a,1,1);t.sprites.length>1&&(t.currSprite<t.sprites.length-1?t.currSprite++:t.currSprite=1)},$=e=>{for(let t=0;t<G.length;t++)H(e,G[t]);for(let t=0;t<I.length;t++)H(e,I[t]);H(e,Z),(e=>{let t=0,a=0,o=0;if(K.length>0)for(let n=0;n<K.length;n++){K[n].decay<=166.66666666666666?t=Math.floor(255*K[n].decay/166.66666666666666):K[n].decay<=1e3/3?(t=255,a=Math.floor(255*(K[n].decay-166.66666666666666)/166.66666666666666)):(t=255,a=255,o=Math.floor(255*(K[n].decay-1e3/3)/166.66666666666666)),e.fillStyle="rgb("+t+","+a+","+o+")";let r=2*K[n].decay/(X+K[n].decay),s=K[n].w/2*r-10;e.fillRect(K[n].x+2*s/3,K[n].y+2*s/3,2,2),e.fillRect(K[n].x-2*s/3,K[n].y+2*s/3,2,2),e.fillRect(K[n].x+2*s/3,K[n].y-2*s/3,2,2),e.fillRect(K[n].x-2*s/3,K[n].y-2*s/3,2,2),e.fillRect(K[n].x+s,K[n].y,2,2),e.fillRect(K[n].x-s,K[n].y,2,2),e.fillRect(K[n].x,K[n].y+s,2,2),e.fillRect(K[n].x,K[n].y-s,2,2)}})(e)},q=e=>{let t={x:e.x+e.w/2-1,y:e.y+e.h/2-1,w:e.w,h:e.h,decay:X};K.push(t),U(K)},Q=e=>{G[e].life-1>0?(G[e].life=G[e].life-1,G[e].hit=!0,h(u+5),setTimeout((()=>{G[e].hit=!1}),[Z.cooldown/2])):(q(G[e]),8!==G[e].id?(F(R-1),h(u+10)):h(u+150),G.splice(e,1)),L(G)},z=e=>{q(G[e])},_=e=>{let t=!1;for(let a=0;a<G.length;a++)"player"===I[e].id?I[e].x>G[a].x&&I[e].x<G[a].x+G[a].w&&I[e].y>G[a].y&&I[e].y<G[a].y+G[a].h&&(t=!0,9===G[a].id?z(a):Q(a)):I[e].x>Z.x&&I[e].x<Z.x+Z.w&&I[e].y>Z.y-Z.h&&I[e].y<Z.y?(t=!0,y-1>=0?(x(y-1),q(Z)):s("End")):I[e].x>G[a].x&&I[e].x<G[a].x+G[a].w&&I[e].y>G[a].y-G[a].h&&I[e].y<G[a].y&&9===G[a].id&&(t=!0,z(a));return t},ee=()=>{w*m%(1200*m)===0&&(()=>{let e=Object.create(D);Math.random()>.5?(e.x=0,e.speed=1):(e.x=b-e.w,e.speed=-1),e.y=2,G.push(e),L(G)})(),(()=>{let e={};!0===Z.shooting&&0===Z.cooling&&(e=Object.create(C),e.x=Z.x-1+Z.w/2,e.y=Z.y,I.push(e),Z.cooling=Z.cooldown,setTimeout((()=>{Z.cooling=0}),[Z.cooldown]),Y(I),Z.shooting=!1)})(),(()=>{let e={},t=Math.random(),a=Math.floor(Math.random()*R);t>.95&&(e=Object.create(E),e.x=G[a].x+Z.w/2,e.y=G[a].y,I.push(e),Y(I))})(),(()=>{let e=[];if(I.length>0){for(let t=0;t<I.length;t++)_(t)||("player"===I[t].id?I[t].y>0&&(I[t].y-=I[t].speed,I[t].currSprite<I[t].totalSprites?I[t].currSprite=I[t].currSprite+1:I[t].currSprite=1,e.push(I[t])):I[t].y<g&&(I[t].y+=I[t].speed,e.push(I[t])));Y(e)}})(),(()=>{if(K.length>0){for(let e=0;e<K.length;e++)K[e].decay-m>0?K[e].decay=K[e].decay-m:K.splice(e,1);U(K)}})(),(()=>{switch(N.index>=R&&(N.index=0),N.rows[G[N.index].row]){case"left":G[N.index].x>2?G[N.index].x=G[N.index].x-1:(N.rows[G[N.index].row]="right",G[N.index].x=G[N.index].x+1);break;case"right":G[N.index].x+G[N.index].w<b-1?G[N.index].x=G[N.index].x+1:N.rows[G[N.index].row]="left"}G[N.index].currSprite<G[N.index].totalSprites?G[N.index].currSprite=G[N.index].currSprite+1:G[N.index].currSprite=1,N.index++;for(let e=0;e<G.length;e++)8===G[e].id&&(G[e].x+G[e].w>0&&G[e].x<b?(G[e].x=G[e].x+G[e].speed,G[e].currSprite<G[e].totalSprites?G[e].currSprite=G[e].currSprite+1:G[e].currSprite=1):G.splice(e,1));L(G),A(N)})()};return(0,o.useEffect)((()=>{const e=d.current.getContext("2d");let t;switch(r){case"Play":y>=0&&R>0?(V(e),c(e,e.canvas.width,e.canvas.height),ee(),$(e),n=k,l=k,(o=e).fillStyle="red",o.font="10px monospace",o.fillText("LIFE:"+y,n/2,g-l/4,500),setTimeout((()=>{O(w+1)}),[m])):y<0?s("End"):0===R&&s("Win");break;case"Pause":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Paused",8*t,8*a,500)})(e,k,k);break;case"Win":((e,t,a)=>{V(e),e.fillStyle="red",e.font="40px monospace",e.fillText("You Win",7*t,8*a,500)})(e,k,k);break;case"End":((e,t,a)=>{e.fillStyle="red",e.font="40px monospace",e.fillText("Game Over",5*t,8*a,500)})(e,k,k);break;case"Start":default:break;case"Restart":p(1),h(0),x(3),U([]),Y([]),(()=>{let e={},t=[],a={index:0,rows:[]};for(let o=0;o<S[f].Matrix.length;o++)for(let n=0;n<S[f].Matrix[o].length;n++)switch(S[f].Matrix[o][n]){case 1:e=Object.create(T),e.x=n*k*1.2,e.y=15+o*k*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 2:e=Object.create(B),e.x=n*k*1.2,e.y=15+o*k*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 3:e=Object.create(j),e.x=n*k*1.2,e.y=15+o*k*1.2,e.row=o,t.push(e),void 0===a.rows[o]&&a.rows.push("right");break;case 9:e=Object.create(P),e.x=n*k*1.2,e.y=5+o*k*1.2,t.push(e)}F(S[f].Enemies),L(t),A(a)})(),W(Object.create(M)),O(1),s("Play")}var o,n,l;J.time=Math.floor(w/v),J.score=u,J.gameState=r,a(J);const i=()=>{t=window.requestAnimationFrame(i)};return i(),()=>{window.cancelAnimationFrame(t)}}),[r,w]),(0,l.jsx)("canvas",{ref:d,width:300,height:150,style:{transform:`scale(${i})`},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault()})}const R=(e,t,a,o,n)=>{switch(e){case"Keybinds":n.setShowKeybindDialog(!n.showKeybindDialog),t(!1);break;case"Play / Pause":"Play"===n.gameState?n.setGameState("Pause"):"Pause"===n.gameState&&n.setGameState("Play"),t(!1);break;case"New":n.setGameState("Restart"),t(!1);break;case"scoreboard":n.setShowScoreboard(!n.showScoreboard),t(!1);break;case"touchscreenControls":n.setShowControls(!n.showControls),t(!1);break;case!1:break;default:t(!1)}},F=(e,t,a)=>{if(null===e)t({Game:{"New Game":{action:"New",keybind:"Alt+N",disabled:!0},"Play / Pause":{action:"Play / Pause",keybind:"P",disabled:!0},LineBreak1:{},Keybinds:{action:"Keybinds",disabled:!1},LineBreak2:{},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},View:{Scoreboard:{action:"scoreboard",checkbox:!0,disabled:!1},"Touchscreen Controls":{action:"touchscreenControls",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{t({...e,Game:{...e.Game,"New Game":{...e.Game["New Game"],disabled:!a.gameChoice},"Play / Pause":{...e.Game["Play / Pause"],disabled:!a.gameChoice}},View:{...e.View,Scoreboard:{...e.View.Scoreboard,checkbox:a.showScoreboard},"Touchscreen Controls":{...e.View["Touchscreen Controls"],checkbox:a.showControls}}})}},N=e=>{let{showKeybindDialog:t,setShowKeybindDialog:a,setAppDialog:n,keyboard:r,setKeyboard:s}=e;const[c,i]=(0,o.useState)(structuredClone(r)),[d,u]=(0,o.useState)(""),[h,y]=(0,o.useState)(0),x=(0,l.jsxs)("div",{children:[Object.keys(c).map((e=>(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",marginLeft:"5px"},children:[(0,l.jsx)("div",{style:{width:"55px",height:"30px",display:"flex",justifyContent:"start",alignItems:"center",textAlign:"center"},children:(0,l.jsxs)("b",{children:[e,":"]})}),c[e].keys.map(((t,a)=>(0,l.jsx)("button",{style:{width:"75px",height:"30px",border:"1px solid dimgray"},onContextMenu:t=>((e,t)=>{c[e].keys.splice(t,1),i(c),y(h+1)})(e,a),onClick:()=>((e,t)=>{u("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((a=>{c[e].keys[t]=a,i(c),u("")})).catch((e=>{u(e)}))})(e,a),children:t},e))),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:c[e].keys.length<3&&(0,l.jsx)("button",{onClick:()=>(e=>{u("Press new key..."),new Promise(((e,t)=>{document.addEventListener("keydown",(t=>e(t.key))),setTimeout((()=>{document.removeEventListener("keydown",(t=>e(t.key))),t("timeout")}),1e4)})).then((t=>{c[e].keys[c[e].keys.length]=t,i(c),u("")})).catch((e=>{u(e)}))})(e),children:"+"})})]},e))),d]}),f={Confirm:()=>{s(c),a(!1),n(null)},Reset:()=>{i(r),y(h+1)},Cancel:()=>{i(r),a(!1),n(null)}};return(0,o.useEffect)((()=>{t&&n({title:"Keybinds",info:x,actions:f})}),[t,c,d,h]),(0,l.jsx)(l.Fragment,{})};function A(e){let{isSelected:t,action:a,setAction:s,appMenu:c,setAppMenu:i,appDialog:d,setAppDialog:u,contextMenu:h}=e;const y=(0,o.useRef)(),[x,f]=(0,o.useState)({up:{keys:["w","W","ArrowUp"],active:!0},down:{keys:["s","S","ArrowDown"],active:!0},left:{keys:["a","A","ArrowLeft"],active:!0},right:{keys:["d","D","ArrowRight"],active:!0},one:{keys:["1"],active:!0},two:{keys:["2"],active:!0},pause:{keys:["p","P","Pause"],active:!0}}),S=function(e,t){var[a,n]=(0,o.useState)({up:!1,down:!1,left:!1,right:!1,one:!1,two:!1,pause:!1});const r=(0,o.useCallback)(((e,a)=>{const o=Object.keys(t);for(let r=0;r<o.length;r++){let s=t[o[r]].keys;for(let t=0;t<s.length;t++)s[t]===e&&n((e=>({...e,[o[r]]:a})))}}),[t]),s=(0,o.useCallback)((e=>{r(e.key,!0)}),[r]),c=(0,o.useCallback)((e=>{r(e.key,!1)}),[r]);return(0,o.useEffect)((()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)})),[s]),(0,o.useEffect)((()=>(document.addEventListener("keyup",c),()=>{document.removeEventListener("keyup",c)})),[c]),(0,o.useEffect)((()=>{e||n({...a,pause:!0})}),[e]),a}(t,x),[v,m]=(0,o.useState)("Start"),[g,b]=(0,o.useState)("None"),[k,T]=(0,o.useState)(1),[B,j]=(0,o.useState)(!0),[D,M]=(0,o.useState)(!0),[P,C]=(0,o.useState)(!0),[E,A]=(0,o.useState)(!1),[G,L]=(0,o.useState)({time:0,score:0,gameState:"Start"}),I=e=>{L(e)},Y=(e,t,a)=>{document.dispatchEvent(new KeyboardEvent(t,{key:x[e].keys[0],repeat:a}))},K=(e,t)=>{"touchstart"===e.type?S[t]=!0:"touchend"===e.type||"touchcancel"===e.type?S[t]=!1:"touchmove"===e.type&&Object.values(e.touches).forEach((e=>{let t=[],a=e.clientX,o=e.clientY,n={up:document.getElementById("arcadeButtonUp").getBoundingClientRect(),down:document.getElementById("arcadeButtonDown").getBoundingClientRect(),left:document.getElementById("arcadeButtonLeft").getBoundingClientRect(),right:document.getElementById("arcadeButtonRight").getBoundingClientRect(),one:document.getElementById("arcadeButtonA").getBoundingClientRect(),two:document.getElementById("arcadeButtonB").getBoundingClientRect()};Object.keys(n).forEach((e=>{a>=n[e].x&&a<=n[e].x+n[e].width&&o>=n[e].y&&o<=n[e].y+n[e].height&&t.push(e)})),Object.keys(x).forEach((e=>{t.includes(e)?S[e]=!0:S[e]=!1}))}))};return(0,o.useEffect)((()=>{j("Play"!==v)}),[v]),(0,o.useEffect)((()=>{R(a,s,d,u,{gameState:v,setGameState:m,showControls:D,setShowControls:M,showScoreboard:P,setShowScoreboard:C,showKeybindDialog:E,setShowKeybindDialog:A})}),[a]),(0,o.useEffect)((()=>{F(c,i,{gameState:v,showControls:D,showScoreboard:P,gameChoice:g})}),[v,g,D,P]),(0,l.jsxs)("div",{id:"arcadeContainer",children:[(0,l.jsx)("div",{id:"arcadeCanvasContainer",ref:y,onContextMenu:e=>((e,t)=>{let a={};if(e.preventDefault(),"keypad"===t)a={Hide:{action:()=>{M(!1)}}};else if("scoreboard"===t)a={Hide:{action:()=>{C(!1)}}};else if("canvas"===t&&"None"!==g){let e="Play"===v?"Pause":"Play";a={"Play/Pause":{action:()=>{m(e)}},"New Game":{action:()=>{m("Restart")}}}}h.setOpen(),h.setPosition(e.clientX,e.clientY),h.setContent(a)})(e,"canvas"),children:"None"===g?(0,l.jsx)("div",{id:"arcadeStartScreen",children:(0,l.jsxs)("select",{id:"gameMenu",onChange:e=>{b(e.target.value),m("Start")},children:[(0,l.jsx)("option",{value:"None",children:"Select Game"}),(0,l.jsx)("option",{value:"Snake",children:"Snake"}),(0,l.jsx)("option",{value:"Breakout",children:"Breakout"}),(0,l.jsx)("option",{value:"Space Invaders",children:"Space Invaders"})]})}):"Snake"===g?(0,l.jsx)(w,{controls:S,updateScoreboard:I,isSelected:t,gameState:v,setGameState:m,canvasZoom:k}):"Breakout"===g?(0,l.jsx)(p,{controls:S,updateScoreboard:I,isSelected:t,gameState:v,setGameState:m,canvasZoom:k}):"Space Invaders"===g?(0,l.jsx)(O,{controls:S,updateScoreboard:I,isSelected:t,gameState:v,setGameState:m,canvasZoom:k}):(0,l.jsx)(l.Fragment,{})}),D&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{id:"arcadeZoomControls",children:[(0,l.jsx)("div",{id:"arcadeZoomInButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{k<2&&T(k+.1)},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault(),children:(0,l.jsx)(r.YQo,{})}),(0,l.jsx)("div",{id:"arcadeZoomOutButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{k>.1&&T(k-.1)},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault(),children:(0,l.jsx)(r.B1P,{})})]}),(0,l.jsxs)("div",{id:"arcadeStateControls",children:[(0,l.jsx)("div",{id:"arcadeEjectButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{b("None"),m("Start")},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault(),children:(0,l.jsx)(r.GZd,{})}),(0,l.jsx)("div",{id:"arcadePlayButton",className:"arcadeButton arcadeButtonOff",onClick:()=>{Y("pause","keydown",!1),setTimeout((()=>Y("pause","keyup",!1)),50)},onTouchStart:e=>e.preventDefault(),onTouchMove:e=>e.preventDefault(),onTouchEnd:e=>e.preventDefault(),onTouchCancel:e=>e.preventDefault(),children:B?(0,l.jsx)(r.i8P,{}):(0,l.jsx)(r.bb6,{})})]}),(0,l.jsxs)("div",{id:"arcadeArrowControls",children:[(0,l.jsx)("div",{id:"arcadeButtonLeft",className:S.left?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("left","keydown",!0),onMouseUp:()=>Y("left","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"left")},onTouchMove:e=>{e.preventDefault(),K(e,"left")},onTouchEnd:e=>{e.preventDefault(),K(e,"left")},onTouchCancel:e=>{e.preventDefault(),K(e,"left")},children:(0,l.jsx)(n.QVr,{})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{id:"arcadeButtonUp",className:S.up?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("up","keydown",!0),onMouseUp:()=>Y("up","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"up")},onTouchMove:e=>{e.preventDefault(),K(e,"up")},onTouchEnd:e=>{e.preventDefault(),K(e,"up")},onTouchCancel:e=>{e.preventDefault(),K(e,"up")},children:(0,l.jsx)(n.uCC,{})}),(0,l.jsx)("div",{id:"arcadeButtonDown",className:S.down?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("down","keydown",!0),onMouseUp:()=>Y("down","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"down")},onTouchMove:e=>{e.preventDefault(),K(e,"down")},onTouchEnd:e=>{e.preventDefault(),K(e,"down")},onTouchCancel:e=>{e.preventDefault(),K(e,"down")},children:(0,l.jsx)(n.$TP,{})})]}),(0,l.jsx)("div",{id:"arcadeButtonRight",className:S.right?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("right","keydown",!0),onMouseUp:()=>Y("right","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"right")},onTouchMove:e=>{e.preventDefault(),K(e,"right")},onTouchEnd:e=>{e.preventDefault(),K(e,"right")},onTouchCancel:e=>{e.preventDefault(),K(e,"right")},children:(0,l.jsx)(n.Z0P,{})})]}),(0,l.jsxs)("div",{id:"arcadeFireControls",children:[(0,l.jsx)("div",{id:"arcadeButtonA",className:S.one?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("one","keydown",!0),onMouseUp:()=>Y("one","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"one")},onTouchMove:e=>{e.preventDefault(),K(e,"one")},onTouchEnd:e=>{e.preventDefault(),K(e,"one")},onTouchCancel:e=>{e.preventDefault(),K(e,"one")},children:"A"}),(0,l.jsx)("div",{id:"arcadeButtonB",className:S.two?"arcadeButton arcadeButtonOn":"arcadeButton arcadeButtonOff",onMouseDown:()=>Y("two","keydown",!0),onMouseUp:()=>Y("two","keyup",!0),onTouchStart:e=>{e.preventDefault(),K(e,"two")},onTouchMove:e=>{e.preventDefault(),K(e,"two")},onTouchEnd:e=>{e.preventDefault(),K(e,"two")},onTouchCancel:e=>{e.preventDefault(),K(e,"two")},children:"B"})]})]}),(0,l.jsx)(N,{showKeybindDialog:E,setShowKeybindDialog:A,setAppDialog:u,keyboard:x,setKeyboard:f})]})}}}]);
//# sourceMappingURL=255.bfed0f30.chunk.js.map