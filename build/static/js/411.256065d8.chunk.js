"use strict";(self.webpackChunkpc=self.webpackChunkpc||[]).push([[411],{9411:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var l=o(5043),n=o(579);const s=(0,l.createContext)({name:"",setName:()=>{},history:{},setHistory:()=>{},dimention:{},setDimention:()=>{},tool:"",setTool:()=>{},subTool:{},setSubTool:()=>{},curveControls:{},setCurveControls:()=>{},color:{},setColor:()=>{},size:0,setSize:()=>{},text:{},setText:()=>{},clipboard:{},setClipboard:()=>{},zoom:1,setZoom:()=>{},cursor:{},setCursor:()=>{},view:{},setView:()=>{}});const a=function(e){let{children:t}=e;const[o,a]=(0,l.useState)("Untitled"),[i,r]=(0,l.useState)({history:[],index:0,canUndo:!1,canRedo:!1}),[c,d]=(0,l.useState)({width:350,height:350}),[h,u]=(0,l.useState)("Brush"),[x,p]=(0,l.useState)({shape:"Circle",fill:!1,stretch:!1,sides:4,angle:0,startAngle:0}),[b,m]=(0,l.useState)({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),[g,C]=(0,l.useState)({selected:"hsl(0, 100%, 0%)",1:"hsl(0, 100%, 0%)",2:"hsl(0, 100%, 100%)"}),[f,v]=(0,l.useState)(16),[y,w]=(0,l.useState)({text:"",top:0,left:0,color:"",fontSize:"",fontFamily:"Arial",state:"none"}),[j,M]=(0,l.useState)({data:{},state:"none"}),[k,T]=(0,l.useState)(1),[P,S]=(0,l.useState)({current:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0},down:!1}),[I,N]=(0,l.useState)({toolBar:!0,topNavBar:!0,bottomNavBar:!0,menu:!0}),B={name:o,setName:a,history:i,setHistory:r,dimention:c,setDimention:d,tool:h,setTool:u,subTool:x,setSubTool:p,curveControls:b,setCurveControls:m,color:g,setColor:C,size:f,setSize:v,text:y,setText:w,clipboard:j,setClipboard:M,zoom:k,setZoom:T,cursor:P,setCursor:S,view:I,setView:N};return(0,n.jsx)(s.Provider,{value:B,children:t})},i=(e,t,o,l)=>{let n;n=l?e.getContext("2d",{alpha:!0}):e.getContext("2d",{alpha:!1}),n.webkitImageSmoothingEnabled=!1,n.mozImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1;const s=e.getBoundingClientRect(),a=n.canvas.height,i=n.canvas.width,r=i/s.width,c=a/s.height,d=t.current.x,h=t.current.y,u=t.start.x,x=t.start.y,p=t.end.x,b=t.end.y,m=()=>{n.strokeStyle=o.selectedColor,n.fillStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([]),n.beginPath(),n.arc((d-s.left)*r,(h-s.top)*c,o.size,0,2*Math.PI),l?n.stroke():n.fill(),n.closePath()},g={drawBrush:()=>{n.fillStyle=o.selectedColor,n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([]),n.beginPath(),n.arc((d-s.left)*r,(h-s.top)*c,o.size,0,2*Math.PI),n.stroke(),n.fill(),n.closePath()},drawEraser:m,drawSpray:()=>{let e=Math.random()*o.size,t=Math.random(),l=Math.random()*o.size,a=Math.random();for(;Math.sqrt(Math.pow(e,2)+Math.pow(l,2))>o.size;)e=Math.random()*o.size,l=Math.random()*o.size;a>.5&&(l*=-1),t>.5&&(e*=-1),n.fillStyle=o.selectedColor,n.fillRect((d-s.left)*r+e,(h-s.top)*c+l,1,1)},drawBucket:()=>{let e,t,l,u,x,p,b=[];for(let I=0;I<o.selectedColor.length;I++){var m,g;"("===o.selectedColor[I]?m=I+1:")"===o.selectedColor[I]?(g=I,b.push(o.selectedColor.slice(m,g))):","===o.selectedColor[I]&&(b.push(o.selectedColor.slice(m,I)),m=I+1)}if(u=b[0]/360,x=b[1].slice(0,-1)/100,p=b[2].slice(0,-1)/100,0===x)e=255*p,t=255*p,l=255*p;else{let N,B,R,A,z;function F(e){return e<0?e+1:e>1?e-1:e}function $(e,t,o){return 6*o<1?t+6*(e-t)*o:2*o<1?e:3*o<2?t+(e-t)*(2/3-o)*6:t}N=p<.5?p*(1+x):p+x-p*x,B=2*p-N,R=F(u+1/3),A=F(u),z=F(u-1/3),e=Math.round(255*$(N,B,R)),t=Math.round(255*$(N,B,A)),l=Math.round(255*$(N,B,z))}function C(e){var t=Number(e).toString(16);return 1==t.length?"0"+t:t}let f="#"+C(e)+C(t)+C(l),v=[],y=parseInt("FF"+f.slice(5,7)+f.slice(3,5)+f.slice(1,3),16);const w=n.getImageData(0,0,i,a),j={width:w.width,height:w.height,data:new Uint32Array(w.data.buffer)};function M(e,t){return e<0||e<0||e>=j.width||e>=j.height?-1:j.data[t*w.width+e]}let k=M((d-s.left)*r,(h-s.top)*c);const T=(e,t,o,l)=>{v.push({left:e,right:t,line:o,direction:l})},P=(e,t,o,l)=>{let n,s,a=!1;for(s=e;s<t;++s){M(s,o)===k?a||(a=!0,n=s):a&&(a=!1,T(n,s-1,o,l))}a&&(a=!1,T(n,t-1,o,l))};T((d-s.left)*r,(d-s.left)*r,(h-s.top)*c,0);let S=0;for(;v.length>0&&S<1e4;){S++;const{left:D,right:Z,line:E,direction:U}=v.pop();let X=D;for(;;){X--;if(M(X,E)!==k)break}++X;let L=Z;for(;;){++L;if(M(L,E)!==k)break}const Y=E*i;j.data.fill(y,Y+X,Y+L),U<=0?P(X,L,E-1,-1):(P(X,D,E-1,-1),P(Z,L,E-1,-1)),U>=0?P(X,L,E+1,1):(P(X,D,E+1,1),P(Z,L,E+1,1))}n.putImageData(w,0,0)},drawText:()=>{n.fillStyle=o.selectedColor,n.font=String(o.size+"px "+o.text.fontFamily),n.fillText(o.text.text,(p-s.left)*r,(b-s.top)*c)},drawPipette:()=>{let e=n.getImageData((d-s.left)*r,(h-s.top)*c,1,1),t=e.data[0],l=e.data[1],a=e.data[2];t/=255,l/=255,a/=255;let i=Math.min(t,l,a),u=Math.max(t,l,a),x=u-i,p=0,b=0,m=(u+i)/2;0===x?(b=0,p=0):(b=m<=.5?x/(u+i):x/(2-u-i),u===t?p=(l-a)/x:u===l?p=(a-t)/x+2:u===a&&(p=(t-l)/x+4)),p=Math.round(60*p),p<0&&(p+=360),b=Math.abs(100*b).toFixed(0),m=(100*m).toFixed(0);let g="hsl("+p+","+b+"%,"+m+"%)";if("Pipette"!==o.tool)return g;o.selectedColor===o.color1?o.setColor1(g):o.setColor2(g)},drawSelect:()=>{switch(o.clipboard.state){case"copy":if(!l&&p-u!==0&&b-x!==0){let e=n.getImageData((u-s.left)*r,(x-s.top)*c,p-u,b-x);o.setClipboard({data:e,state:"carry"})}break;case"cut":if(!l&&p-u!==0&&b-x!==0){let e=n.getImageData((u-s.left)*r,(x-s.top)*c,p-u,b-x);o.setClipboard({data:e,state:"carry"}),o.selectedColor===o.color1?n.fillStyle=o.color2:n.fillStyle=o.color1,n.fillRect((u-s.left)*r,(x-s.top)*c,p-u,b-x)}break;case"carry":n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),t.down?(n.putImageData(o.clipboard.data,(d-s.left)*r,(h-s.top)*c),n.strokeRect((d-s.left)*r,(h-s.top)*c,o.clipboard.data.width,o.clipboard.data.height)):(n.putImageData(o.clipboard.data,(p-s.left)*r,(b-s.top)*c),n.strokeRect((p-s.left)*r,(b-s.top)*c,o.clipboard.data.width,o.clipboard.data.height));break;case"paste":l||(n.putImageData(o.clipboard.data,(p-s.left)*r,(b-s.top)*c),o.setClipboard({...o.clipboard,state:"none"}));break;default:n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.strokeRect((u-s.left)*r,(x-s.top)*c,p-u,b-x)}},drawShape:()=>{n.strokeStyle=o.color1,n.fillStyle=o.color2,n.setLineDash([]),n.lineWidth=o.size;let e,t=(p-u)/2,a=(b-x)/2;e=Math.sqrt(Math.pow(p-u,2))/2<Math.sqrt(Math.pow(b-x,2))/2?Math.sqrt(Math.pow(p-u,2))/2:Math.sqrt(Math.pow(b-x,2))/2;let i=Math.sqrt(Math.pow((p-u)/(b-x),2)),d=Math.sqrt(Math.pow((b-x)/(p-u),2));o.subTool.stretch?i>d?d=1:i=1:(i=1,d=1),"Curve"!==o.subTool.shape&&"Line"!==o.subTool.shape&&(n.save(),n.translate((u+t-s.left)*r,(x+a-s.top)*c),n.rotate(Math.PI*o.subTool.angle/180)),"Rectangle"===o.subTool.shape?g["draw"+o.subTool.shape](t,a):g["draw"+o.subTool.shape](i,d,e),"Line"!==o.subTool.shape&&"Curve"!==o.subTool.shape&&(n.restore(),l&&(n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.strokeRect((u-s.left)*r,(x-s.top)*c,p-u,b-x),((e,t,l)=>{n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.beginPath(),n.arc((u+e-s.left)*r,(x+t-s.top)*c,l,0,2*Math.PI),n.stroke(),n.closePath()})(t,a,e),o.subTool.stretch&&((e,t,l,a,i)=>{n.strokeStyle=o.selectedColor,n.lineWidth=1,n.setLineDash([5]),n.beginPath(),n.ellipse((u+e-s.left)*r,(x+t-s.top)*c,l*i,a*i,Math.PI/180*o.subTool.angle,0,2*Math.PI),n.stroke(),n.closePath()})(t,a,i,d,e)))},drawLine:()=>{n.beginPath(),n.moveTo((u-s.left)*r,(x-s.top)*c),n.lineTo((p-s.left)*r,(b-s.top)*c),n.stroke()},drawCurve:()=>{let e={x:0,y:0},t={x:0,y:0},l={x:0,y:0},a={x:0,y:0};n.beginPath(),-1===o.curveControls.start.x?(e={x:u,y:x},t={x:p,y:b},l={x:u,y:x},a={x:p,y:b}):-1===o.curveControls.controlPoint1.x?(e=o.curveControls.start,t=o.curveControls.end,l={x:p,y:b},a=o.curveControls.end):-1===o.curveControls.controlPoint2.x?(e=o.curveControls.start,t=o.curveControls.end,l=o.curveControls.controlPoint1,a={x:p,y:b}):(e=o.curveControls.start,t=o.curveControls.end,l=o.curveControls.controlPoint1,a=o.curveControls.controlPoint2),n.moveTo((e.x-s.left)*r,(e.y-s.top)*c),n.bezierCurveTo((l.x-s.left)*r,(l.y-s.top)*c,(a.x-s.left)*r,(a.y-s.top)*c,(t.x-s.left)*r,(t.y-s.top)*c),n.stroke()},drawCircle:(e,t,l)=>{n.beginPath(),n.ellipse(0,0,e*l,t*l,0,0,2*Math.PI),o.subTool.fill&&n.fill(),n.stroke()},drawRectangle:(e,t)=>{o.subTool.fill&&n.fillRect(-e,-t,p-u,b-x),n.strokeRect(-e,-t,p-u,b-x)},drawPolygon:(e,t,l)=>{n.beginPath();for(let s=0;s<o.subTool.sides+2;s++)n.lineTo(e*l*Math.cos(2*Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l*Math.sin(2*Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&n.fill(),n.stroke()},drawStar:(e,t,l)=>{n.beginPath();for(let s=0;s<2*o.subTool.sides+2;s++)s%2===0?n.lineTo(e*l*Math.cos(Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l*Math.sin(Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle)):n.lineTo(e*l/3*Math.cos(Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle),t*l/3*Math.sin(Math.PI*s/o.subTool.sides-Math.PI/2+Math.PI/180*o.subTool.startAngle));o.subTool.fill&&n.fill(),n.stroke()},drawArrow:(e,t,l)=>{n.beginPath(),n.moveTo(e*-l*Math.cos(Math.PI/8),t*-l*Math.sin(Math.PI/8)),n.lineTo(0,t*-l*Math.sin(Math.PI/8)),n.lineTo(0,t*-l),n.lineTo(e*l,0),n.lineTo(0,t*l),n.lineTo(0,t*l*Math.sin(Math.PI/8)),n.lineTo(e*-l*Math.cos(Math.PI/8),t*l*Math.sin(Math.PI/8)),n.closePath(),o.subTool.fill&&n.fill(),n.stroke()},drawHeart:(e,t,l)=>{o.subTool.stretch&&(e>t?n.scale(e,1):n.scale(1,t)),n.beginPath(),n.moveTo(0,l),n.arc(-l/2,-l/5,l/2,3*Math.PI/4,0,!1),n.arc(l/2,-l/5,l/2,Math.PI,Math.PI/4,!1),n.closePath(),o.subTool.fill&&n.fill(),n.stroke()}};if(l){if(n.clearRect(0,0,i,a),"Magnifier"!==o.tool){if("Bucket"===o.tool||"Pipette"===o.tool)return;"Spray"===o.tool?m():g["draw"+o.tool]()}}else"Magnifier"!==o.tool&&g["draw"+o.tool]()},r=(e,t,o,l,n,s)=>{switch(l.tool){case"Brush":case"Eraser":i(e,t,l,!1),"drawing"!==n&&s("drawing");break;case"Bucket":i(e,t,l,!1),s("finished");break;case"Spray":for(let o=0;o<10;o++)i(e,t,l,!1);s("drawing");break;case"Text":if(0!==t.current.x&&0!==t.current.y){const o=e.getBoundingClientRect();l.setText({...l.text,left:t.start.x-o.x,top:t.start.y-o.y,color:l.selectedColor,size:l.size+"px",state:"preview"})}"confirm"===n&&(i(e,t,l,!1),l.setText({...l.text,text:"",state:"none"}),s("finished"));break;case"Pipette":i(e,t,l,!1);break;case"Magnifier":default:break;case"Select":"clipping"===n&&"carry"!==l.clipboard.state?i(e,t,l,!1):"confirm"===n&&(i(e,t,l,!1),s("finished"));break;case"Shape":if("Curve"===l.subTool.shape&&t.down){let e=l.curveControls.state,o=l.curveControls.start,a=l.curveControls.end,i=l.curveControls.controlPoint1,r=l.curveControls.controlPoint2;"none"===l.curveControls.state?(s("settingPoints"),e="start",o={x:t.start.x,y:t.start.y},a={x:t.end.x,y:t.end.y}):"start"===l.curveControls.state?"settingPoints"===n?a={x:t.end.x,y:t.end.y}:(s("settingPoints"),e="point1",i={x:t.end.x,y:t.end.y}):"point1"===l.curveControls.state?"settingPoints"===n?i={x:t.end.x,y:t.end.y}:(s("settingPoints"),e="point2",r={x:t.end.x,y:t.end.y}):"point2"===l.curveControls.state&&(r={x:t.end.x,y:t.end.y}),l.setCurveControls({...l.curveControls,state:e,start:o,end:a,controlPoint1:i,controlPoint2:r})}else"Curve"===l.subTool.shape&&"cancel"===n&&l.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}});"confirm"===n&&(i(e,t,l,!1),"Curve"===l.subTool.shape&&l.setCurveControls({state:"none",start:{x:-1,y:-1},end:{x:-1,y:-1},controlPoint1:{x:-1,y:-1},controlPoint2:{x:-1,y:-1}}),s("finished"),o({...t,start:{x:0,y:0},end:{x:0,y:0}}))}},c=(e,t,o,l)=>{if(null===e)t({File:{New:{action:"New",keybind:"Alt+N",disabled:!1},Open:{action:"Open",keybind:"Alt+O",disabled:!0,title:"Not Implemented"},Save:{action:"Save",keybind:"Ctrl+Alt+S",disabled:!0},"Save As":{action:"Save As",keybind:"Ctrl+Alt+Shift+S",disabled:!0,title:"Not Implemented"},"Change Name":{action:"Change Name",keybind:"F2",disabled:!1},Close:{action:"Close",keybind:"Alt+Shift+F4",disabled:!1}},Edit:{Undo:{action:"Undo",keybind:"Ctrl+Z",disabled:!1},Redo:{action:"Redo",keybind:"Ctrl+Y",disabled:!1},LineBreak1:{},Cut:{action:"Cut",keybind:"Ctrl+X",disabled:!0,title:"Not Implemented"},Copy:{action:"Copy",keybind:"Ctrl+C",disabled:!0,title:"Not Implemented"},Paste:{action:"Paste",keybind:"Ctrl+V",disabled:!0,title:"Not Implemented"},LineBreak2:{},"Select All":{action:"SelectAll",keybind:"Ctrl+A",disabled:!0,title:"Not Implemented"},Clear:{action:"SelectClear",keybind:"Ctrl+Shift+C",disabled:!0,title:"Not Implemented"}},View:{"Zoom In":{action:"Zoom In",keybind:"Alt++",disabled:!1},"Zoom Out":{action:"Zoom Out",keybind:"Alt+-",disabled:!1},"Zoom Reset":{action:"Zoom Reset",keybind:"Alt+0",disabled:!0},LineBreak1:{},"Tool Bar":{action:"toolBar",checkbox:!0,disabled:!1},"Bottom Bar":{action:"bottomNavBar",checkbox:!0,disabled:!1},"Top Bar":{action:"topNavBar",checkbox:!0,disabled:!1}},Help:{Help:{action:"help",keybind:"F1",disabled:!0,title:"Not Implemented"},About:{action:"about",disabled:!0,title:"Not Implemented"}}});else{let n={...e};switch(l){case"history":let e=o.history.canUndo||o.history.canRedo;n={...n,File:{...n.File,Save:{...n.File.Save,disabled:!e},"Save As":{...n.File["Save As"],disabled:!e}},Edit:{...n.Edit,Undo:{...n.Edit.Undo,disabled:!o.history.canUndo},Redo:{...n.Edit.Redo,disabled:!o.history.canRedo}}};break;case"view":n={...n,View:{...n.View,"Tool Bar":{...n.View["Tool Bar"],checkbox:o.view.toolBar},"Bottom Bar":{...n.View["Bottom Bar"],checkbox:o.view.bottomNavBar},"Top Bar":{...n.View["Top Bar"],checkbox:o.view.topNavBar}}};break;case"zoom":n={...n,View:{...n.View,"Zoom In":{...n.View["Zoom In"],disabled:4===o.zoom},"Zoom Out":{...n.View["Zoom Out"],disabled:.25===o.zoom},"Zoom Reset":{...n.View["Zoom Reset"],disabled:1===o.zoom}}}}t(n)}},d=(e,t,o,l,n,s,a)=>{let i={},r={};const d=e.canvas.height,h=e.canvas.width,u=t.history,x=t.index;switch(l){case"undo":(()=>{if(u.length>0&&x>0){let l=!0;x-1===0&&(l=!1),e.putImageData(u[x-1],0,0),i={...t,index:x-1,canUndo:l,canRedo:!0},a(l),o(i),c(n,s,r={history:{...i}},"history")}})();break;case"redo":(()=>{let l=!0;x+1===u.length-1&&(l=!1),x<u.length-1&&(e.putImageData(u[x+1],0,0),i={...t,index:x+1,canUndo:!0,canRedo:l},o(i),a(!1),c(n,s,r={history:{...i}},"history"))})();break;case"save":u.length<50&&x===u.length?(i={history:[...u,e.getImageData(0,0,h,d)],index:x+1,canUndo:!0,canRedo:!1},o(i),c(n,s,r={history:{...i}},"history")):50===u.length&&x===u.length?(i={history:[...u.slice(1),e.getImageData(0,0,h,d)],index:x,canUndo:!0,canRedo:!1},o(i),c(n,s,r={history:{...i}},"history")):x<u.length&&(i={history:[...u.slice(0,x+1),e.getImageData(0,0,h,d)],index:x+1,canUndo:!0,canRedo:!1},o(i),c(n,s,r={history:{...i}},"history")),a(!1);break;case"clear":i={history:[e.getImageData(0,0,h,d)],index:0,canUndo:!1,canRedo:!1},o(i),a(!0),c(n,s,r={history:{...i}},"history")}},h=(e,t,o)=>{const l=e.canvas.height,n=e.canvas.width;switch(o){case"new":(e=>{e.fillStyle="#FFFFFF",e.fillRect(0,0,n,l)})(e);break;case"save":(e=>{let o=document.createElement("a");o.setAttribute("download",t+".png");let l=e.canvas.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");o.setAttribute("href",l),o.click()})(e)}},u=(e,t,o,l,s,a,i,u,x,p,b,m,g)=>{let C={};switch(l){case"Startup":h(t,a.name,"new"),d(t,a.history,a.setHistory,"clear",i,u,g),s(!1);break;case"New":((e,t,o)=>{const l=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("New")}}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"Width",children:"Width"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"Width",type:"number",value:e.dimention.width,onChange:o=>{e.setDimention({...e.dimention,width:o.target.value}),t("New")}}),(0,n.jsx)("br",{}),(0,n.jsx)("label",{htmlFor:"Height",children:"Height"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"Height",type:"number",value:e.dimention.height,onChange:o=>{e.setDimention({...e.dimention,height:o.target.value}),t("New")}}),(0,n.jsx)("br",{})]}),s={Confirm:()=>{t("New Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"New File",info:l,actions:s})})(a,s,p),s(!1);break;case"New Confirm":p(null),h(t,a.name,"new"),d(t,a.history,a.setHistory,"clear",i,u,g),s(!1);break;case"Save":h(t,a.name,"save"),s(!1);break;case"Save As":break;case"Change Name":((e,t,o)=>{const l=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:"New title",children:"Name"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{id:"New title",type:"text",value:e.name,onChange:o=>{e.setName(o.target.value),t("Change Name")}}),(0,n.jsx)("br",{})]}),s={Confirm:()=>{t("Change Name Confirm"),o(null)},Cancel:()=>{o(null),t(!1)}};o({title:"Change Name",info:l,actions:s})})(a,s,p),s(!1);break;case"Change Name Confirm":p(null),s(!1);break;case"Undo":d(t,a.history,a.setHistory,"undo",i,u,g),s(!1);break;case"Redo":d(t,a.history,a.setHistory,"redo",i,u,g),s(!1);break;case"Zoom In":a.zoom<4&&(a.zoom<1?(a.setZoom(a.zoom+.25),C={zoom:a.zoom+.25}):(a.setZoom(a.zoom+1),C={zoom:a.zoom+1}),c(i,u,C,"zoom")),s(!1);break;case"Zoom Out":a.zoom>.25&&(a.zoom<=1?(a.setZoom(a.zoom-.25),C={zoom:a.zoom-.25}):(a.setZoom(a.zoom-1),C={zoom:a.zoom-1}),c(i,u,C,"zoom")),s(!1);break;case"Zoom Reset":a.setZoom(1),C={zoom:1},c(i,u,C,"zoom"),s(!1);break;case"Zoom Min":C={zoom:.25},c(i,u,C,"zoom"),s(!1);break;case"Zoom Max":C={zoom:4},c(i,u,C,"zoom"),s(!1);break;case"Zoom Default":C={zoom:1},c(i,u,C,"zoom"),s(!1);break;case"Zoom Change":C={zoom:2},c(i,u,C,"zoom"),s(!1);break;case"Cut":case"Copy":case"Paste":case"Select All":case"Select Clear":s(!1);break;case"finished":d(t,a.history,a.setHistory,"save",i,u,g),s(!1);break;case"drawing":a.cursor.down?r(e,a.cursor,a.setCursor,o,l,s):s("finished");break;case"settingPoints":a.cursor.down?r(e,a.cursor,a.setCursor,o,l,s):s(!1);break;case"cancel":case"clipping":case"confirm":r(e,a.cursor,a.setCursor,o,l,s);break;case!1:a.cursor.down&&r(e,a.cursor,a.setCursor,o,l,s);break;case"topNavBar":a.setView({...a.view,topNavBar:!a.view.topNavBar}),C={view:{...a.view,topNavBar:!a.view.topNavBar}},c(i,u,C,"view"),s(!1);break;case"bottomNavBar":a.setView({...a.view,bottomNavBar:!a.view.bottomNavBar}),C={view:{...a.view,bottomNavBar:!a.view.bottomNavBar}},c(i,u,C,"view"),s(!1);break;case"toolBar":a.setView({...a.view,toolBar:!a.view.toolBar}),C={view:{...a.view,toolBar:!a.view.toolBar}},c(i,u,C,"view"),s(!1);break;case"Close":m||p({title:"Warning",info:"Do you want to download the file before closing?",actions:{Save:()=>{h(t,a.name,"save"),g(!0),p(null)},Close:()=>{g(!0),p(null)},Cancel:()=>{p(null),s(!1)}}});break;default:s(!1)}},x=e=>{let{action:t,setAction:o,appMenu:a,setAppMenu:i,appDialog:r,setAppDialog:c,contextMenu:d,canClose:h,setCanClose:x}=e;const p=(0,l.useRef)(null),b=(0,l.useContext)(s),m={tool:b.tool,subTool:b.subTool,curveControls:b.curveControls,setCurveControls:b.setCurveControls,size:b.size,selectedColor:b.color.selected,color1:b.color[1],setColor1:e=>b.setColor({...b.color,1:e,selected:e}),color2:b.color[2],setColor2:e=>b.setColor({...b.color,2:e,selected:e}),text:b.text,setText:b.setText,clipboard:b.clipboard,setClipboard:b.setClipboard};return(0,l.useEffect)((()=>{let e=p.current,l=e.getContext("2d",{willReadFrequently:!0});u(e,l,m,t,o,b,a,i,0,c,0,h,x)}),[b.cursor,t]),(0,l.useEffect)((()=>{let e=-1*(b.dimention.width/2-b.zoom*b.dimention.width/2)/b.zoom,t=-1*(b.dimention.height/2-b.zoom*b.dimention.height/2)/b.zoom;document.getElementById("previewCanvas").style.transform=`scale(${b.zoom}) translate(${e}px,${t}px)`,document.getElementById("drawCanvas").style.transform=`scale(${b.zoom}) translate(${e}px,${t}px)`}),[b.zoom]),(0,n.jsx)("canvas",{ref:p,id:"drawCanvas",height:b.dimention.height,width:b.dimention.width})},p=e=>{let{setAction:t,contextMenu:o}=e;const a=(0,l.useContext)(s),r=(0,l.useRef)(null),c=a.cursor,d=a.setCursor,h={tool:a.tool,subTool:a.subTool,curveControls:a.curveControls,setCurveControls:a.setCurveControls,size:a.size,selectedColor:a.color.selected,color1:a.color[1],setColor1:e=>a.setColor({...a.color,1:e}),color2:a.color[2],setColor2:e=>a.setColor({...a.color,2:e}),text:a.text,setText:a.setText,clipboard:a.clipboard,setClipboard:a.setClipboard},u=e=>{if(0===e.button)switch(e.type){case"mousedown":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!0,start:{x:e.clientX,y:e.clientY}});break;case"mouseup":d({...c,end:{x:e.clientX,y:e.clientY},down:!1});break;case"mousemove":c.down?d({...c,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,current:{x:e.clientX,y:e.clientY}});break;case"mouseleave":d({...c,current:{x:0,y:0}});break;case"mouseenter":0!==e.buttons?d({...c,down:!0,current:{x:e.clientX,y:e.clientY},end:{x:e.clientX,y:e.clientY}}):d({...c,down:!1,current:{x:e.clientX,y:e.clientY}})}},x=e=>{if(1===e.touches.length)switch(e.type){case"touchstart":c.down?d({...c,current:{x:e.touches[0].clientX,y:e.touches[0].clientY},end:{x:e.touches[0].clientX,y:e.touches[0].clientY}}):d({...c,down:!0,start:{x:e.touches[0].clientX,y:e.touches[0].clientY}});break;case"touchend":d({...c,end:{x:e.touches[0].clientX,y:e.touches[0].clientY},down:!1});break;case"touchmove":c.down?d({...c,current:{x:e.touches[0].clientX,y:e.touches[0].clientY},end:{x:e.touches[0].clientX,y:e.touches[0].clientY}}):d({...c,current:{x:e.touches[0].clientX,y:e.touches[0].clientY}})}else d({...c,current:{x:0,y:0},end:{x:c.current.x,y:c.current.y},down:!1})};(0,l.useEffect)((()=>{i(r.current,c,h,!0)}),[c,h]);return(0,n.jsx)("canvas",{ref:r,style:{color:h.selectedColor},className:"cursor"+h.tool,id:"previewCanvas",height:a.dimention.height,width:a.dimention.width,onMouseDown:e=>u(e),onMouseUp:e=>u(e),onMouseMove:e=>u(e),onMouseLeave:e=>u(e),onMouseEnter:e=>u(e),onTouchStart:e=>x(e),onTouchEnd:e=>x(e),onTouchMove:e=>x(e),onTouchCancel:e=>x(e),onContextMenu:e=>(e=>{e.preventDefault();let l={Undo:{action:()=>t("Undo"),disabled:!a.history.canUndo},Redo:{action:()=>t("Redo"),disabled:!a.history.canRedo},LineBreak:{},"Zoom In":{action:()=>t("Zoom In"),disabled:4===a.zoom},"Zoom Out":{action:()=>t("Zoom Out"),disabled:.25===a.zoom},"Zoom Reset":{action:()=>t("Zoom Reset"),disabled:1===a.zoom}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e)})};var b=o(9804),m=o(7980),g=o(9106);const C=e=>{let{setAction:t,contextMenu:o}=e;const a=(0,l.useContext)(s);if(a.view.topNavBar)return(0,n.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let l={Hide:{action:()=>t("topNavBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e),children:[(0,n.jsx)("button",{onClick:()=>t("Undo"),disabled:!a.history.canUndo,children:(0,n.jsx)(b.qHd,{title:"Undo"})}),(0,n.jsx)("button",{onClick:()=>t("Redo"),disabled:!a.history.canRedo,children:(0,n.jsx)(b.qQW,{title:"Redo"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{onClick:()=>t("New"),children:(0,n.jsx)(m.QB2,{title:"New File"})}),(0,n.jsx)("button",{onClick:()=>t("Save"),disabled:!(a.history.canRedo||a.history.canUndo),children:(0,n.jsx)(m.RZ0,{title:"Save File"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("button",{className:a.color.selected===a.color[1]?"buttonActive":"",onClick:()=>a.setColor({...a.color,selected:a.color[1]}),children:(0,n.jsx)("label",{htmlFor:"drawColor1",onClick:e=>e.preventDefault(),children:"1"})}),(0,n.jsx)(g.A,{color:a.color[1],setColor:e=>{a.setColor({...a.color,selected:e,1:e})},useAlpha:!1})]}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("button",{className:a.color.selected===a.color[2]?"buttonActive":"",onClick:()=>a.setColor({...a.color,selected:a.color[2]}),children:(0,n.jsx)("label",{htmlFor:"drawColor2",onClick:e=>e.preventDefault(),children:"2"})}),(0,n.jsx)(g.A,{color:a.color[2],setColor:e=>a.setColor({...a.color,selected:e,2:e}),useAlpha:!1})]}),(0,n.jsx)("vertical-rect",{}),"Magnifier"===a.tool&&(0,n.jsxs)("select",{value:a.zoom,onChange:e=>{(e=>{a.setZoom(Number(e.target.value)),"0.25"===e.target.value?t("Zoom Min"):"4"===e.target.value?t("Zoom Max"):"1"===e.target.value?t("Zoom Default"):t("Zoom Change")})(e)},title:"Zoom",children:[(0,n.jsx)("option",{value:.25,children:"25%"}),(0,n.jsx)("option",{value:.5,children:"50%"}),(0,n.jsx)("option",{value:.75,children:"75%"}),(0,n.jsx)("option",{value:1,children:"100%"}),(0,n.jsx)("option",{value:2,children:"200%"}),(0,n.jsx)("option",{value:3,children:"300%"}),(0,n.jsx)("option",{value:4,children:"400%"})]}),"Select"!==a.tool&&"Pipette"!==a.tool&&"Magnifier"!==a.tool&&(0,n.jsxs)("select",{value:a.size,onChange:e=>{a.setSize(e.target.value)},title:"Text"===a.tool?"Font Size":"Shape"===a.tool?"Line Width":"Radius",children:[(0,n.jsx)("option",{value:1,children:"1px"}),(0,n.jsx)("option",{value:2,children:"2px"}),(0,n.jsx)("option",{value:4,children:"4px"}),(0,n.jsx)("option",{value:8,children:"8px"}),(0,n.jsx)("option",{value:16,children:"16px"}),(0,n.jsx)("option",{value:32,children:"32px"})]}),"Text"===a.tool&&(0,n.jsxs)("select",{title:"Font Family",value:a.text.fontFamily,onChange:e=>a.setText({...a.text,fontFamily:e.target.value}),children:[(0,n.jsx)("option",{children:"Arial"}),(0,n.jsx)("option",{children:"Times New Roman"}),(0,n.jsx)("option",{children:"Monospace"}),(0,n.jsx)("option",{children:"Verdana"}),(0,n.jsx)("option",{children:"Georgia"}),(0,n.jsx)("option",{children:"Courier New"}),(0,n.jsx)("option",{children:"Tahoma"}),(0,n.jsx)("option",{children:"Garamond"}),(0,n.jsx)("option",{children:"Impact"}),(0,n.jsx)("option",{children:"Comic Sans MS"}),(0,n.jsx)("option",{children:"Lucida Console"}),(0,n.jsx)("option",{children:"Lucida Sans Unicode"}),(0,n.jsx)("option",{children:"Palatino Linotype"}),(0,n.jsx)("option",{children:"Symbol"}),(0,n.jsx)("option",{children:"Wingdings"}),(0,n.jsx)("option",{children:"Helvetica"})]}),"Shape"===a.tool&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("select",{title:"Shape",value:a.subTool.shape,onChange:e=>a.setSubTool({...a.subTool,shape:e.target.value}),children:[(0,n.jsx)("option",{children:"Line"}),(0,n.jsx)("option",{children:"Curve"}),(0,n.jsx)("option",{children:"Circle"}),(0,n.jsx)("option",{children:"Rectangle"}),(0,n.jsx)("option",{children:"Polygon"}),(0,n.jsx)("option",{children:"Star"}),(0,n.jsx)("option",{children:"Arrow"}),(0,n.jsx)("option",{children:"Heart"})]}),("Polygon"===a.subTool.shape||"Star"===a.subTool.shape)&&(0,n.jsx)("input",{type:"number",title:"Sides",value:a.subTool.sides,onChange:e=>a.setSubTool({...a.subTool,sides:e.target.value}),min:"3",step:"1"})]})]})},f=e=>{let{subtool:t}=e,o=(0,l.useRef)(null);const s={drawCircleIcon:(e,o,l)=>{e.beginPath(),e.arc(o/2,l/2,l/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath()},drawEllipseIcon:(e,o,l)=>{e.scale(1,.5),e.beginPath(),e.beginPath(),e.arc(o/2,l,l/2-2,0,2*Math.PI),t.fill&&e.fill(),e.stroke(),e.closePath(),e.scale(1,2)},drawRectangleIcon:(e,o,l)=>{t.fill&&e.fillRect(0,l/4,o,l/2),e.strokeRect(0,l/4,o,l/2)},drawPolygonIcon:(e,o,l)=>{e.beginPath();for(let n=0;n<t.sides;n++)e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*n/t.sides-Math.PI/2),l/2+(l/2-3)*Math.sin(2*Math.PI*n/t.sides-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawLineIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/4,2),e.lineTo(3*t/4,o-2),e.closePath(),e.stroke()},drawCurveIcon:(e,t,o)=>{e.beginPath(),e.moveTo(t/6,2),e.bezierCurveTo(5*t/6,o/5,t/6,4*o/5-2,5*t/6,o-2),e.stroke()},drawStarIcon:(e,o,l)=>{e.beginPath(),e.moveTo(o/2,3);for(let n=0;n<2*t.sides;n++)n%2===0?e.lineTo(o/2+(o/2-3)*Math.cos(2*Math.PI*n/(2*t.sides)-Math.PI/2),l/2+(l/2-3)*Math.sin(2*Math.PI*n/(2*t.sides)-Math.PI/2)):e.lineTo(o/2+(o/4-3)*Math.cos(2*Math.PI*n/(2*t.sides)-Math.PI/2),l/2+(l/4-3)*Math.sin(2*Math.PI*n/(2*t.sides)-Math.PI/2));e.closePath(),e.stroke(),t.fill&&e.fill()},drawArrowIcon:(e,o,l)=>{e.beginPath(),e.moveTo(2,l/3),e.lineTo(o/2,l/3),e.lineTo(o/2,2),e.lineTo(o-2,l/2),e.lineTo(o/2,l-2),e.lineTo(o/2,2*l/3),e.lineTo(2,2*l/3),e.closePath(),e.stroke(),t.fill&&e.fill()},drawHeartIcon:(e,o,l)=>{e.beginPath(),e.moveTo(o/2,l-3),e.arc(o/4+1,l/3,o/4-1,3*Math.PI/4,0,!1),e.arc(3*o/4-1,l/3,o/4-1,Math.PI,Math.PI/4,!1),e.closePath(),e.stroke(),t.fill&&e.fill()}};return(0,l.useEffect)((()=>{const e=o.current.getContext("2d"),l=e.canvas.height,n=e.canvas.width;e.clearRect(0,0,n,l),e.fillStyle="lightgray",e.strokeStyle="white",e.lineWidth=2,s["draw"+t.shape+"Icon"](e,n,l)}),[t]),(0,n.jsx)("canvas",{ref:o,id:"shapeCanvas",width:"25",height:"25",title:"Custom Shape"})};var v=o(2639),y=o(8973),w=o(2021),j=o(7962),M=o(9698);const k=e=>{let{setAction:t,contextMenu:o}=e;const a=(0,l.useContext)(s),i=a.tool,r=a.subTool,c=a.setTool,d={Brush:(0,n.jsx)(v.Nw5,{title:"Brush"}),Eraser:(0,n.jsx)(m.qpr,{title:"Eraser"}),Bucket:(0,n.jsx)(m.ATI,{title:"Bucket"}),Spray:(0,n.jsx)(m.bOX,{title:"Spray Can"}),Text:(0,n.jsx)(w.tEi,{title:"Insert Text"}),Pipette:(0,n.jsx)(y._e3,{title:"Color Picker"}),Magnifier:(0,n.jsx)(j.JJh,{title:"Zoom"}),Select:(0,n.jsx)(M.ZdE,{title:"Selection"}),Shape:(0,n.jsx)(f,{subtool:r})};if(a.view.toolBar)return(0,n.jsx)("tool-bar",{onContextMenu:e=>(e=>{e.preventDefault();let l={Hide:{action:()=>t("toolBar")}};o.setOpen(),o.setPosition(e.clientX,e.clientY),o.setContent(l)})(e),children:Object.keys(d).map((e=>(0,n.jsx)("button",{onClick:()=>c(e),className:i===e?"buttonActive":"",children:d[e]},e+"drawToolDropdown")))})},T=e=>{let{action:t,setAction:o,contextMenu:a}=e;const i=(0,l.useContext)(s);if(i.view.bottomNavBar)return(0,n.jsxs)("nav",{onContextMenu:e=>(e=>{e.preventDefault();let t={Hide:{action:()=>o("bottomNavBar")}};a.setOpen(),a.setPosition(e.clientX,e.clientY),a.setContent(t)})(e),children:["Text"===i.tool&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Confirm Text",onClick:()=>o("confirm"),children:(0,n.jsx)("small",{children:"Confirm"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("input",{type:"text",title:"Text Input",value:i.text.text,onChange:e=>i.setText({...i.text,text:e.target.value})})]}),"Select"===i.tool?(0,n.jsx)(n.Fragment,{children:"clipping"===t&&"carry"===i.clipboard.state?(0,n.jsx)("button",{title:"Paste",onClick:()=>{o("confirm"),i.setClipboard({...i.clipboard,state:"paste"})},children:(0,n.jsx)("small",{children:"Paste"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Cut",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"cut"})},children:(0,n.jsx)("small",{children:"Cut"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{title:"Copy",onClick:()=>{o("clipping"),i.setClipboard({...i.clipboard,state:"copy"})},children:(0,n.jsx)("small",{children:"Copy"})})]})}):null,"Shape"===i.tool?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Confirm Shape",onClick:()=>o("confirm"),children:(0,n.jsx)("small",{children:"Confirm"})}),(0,n.jsx)("vertical-rect",{}),"Curve"===i.subTool.shape&&(0,n.jsx)("button",{title:"Cancel Shape",onClick:()=>o("cancel"),children:(0,n.jsx)("small",{children:"Cancel"})}),"Line"!==i.subTool.shape&&"Curve"!==i.subTool.shape?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{title:"Fill",className:i.subTool.fill?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,fill:!i.subTool.fill}),children:(0,n.jsx)("small",{children:"Fill"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsx)("button",{title:"Stretch",className:i.subTool.stretch?"appMenuButtonON":"",onClick:()=>i.setSubTool({...i.subTool,stretch:!i.subTool.stretch}),children:(0,n.jsx)("small",{children:"Stretch"})}),(0,n.jsx)("vertical-rect",{}),(0,n.jsxs)("button",{children:[(0,n.jsx)("label",{htmlFor:"rotationAngle",children:"Rotation"}),(0,n.jsx)("input",{type:"number",title:"Rotation Angle",id:"rotationAngle",value:i.subTool.angle,onChange:e=>i.setSubTool({...i.subTool,angle:e.target.value}),step:"1"})]}),(0,n.jsx)("vertical-rect",{}),"Polygon"===i.subTool.shape||"Star"===i.subTool.shape?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{children:[(0,n.jsx)("label",{htmlFor:"startAngle",children:"Start Angle"}),(0,n.jsx)("input",{type:"number",title:"Start Angle",id:"startAngle",value:i.subTool.startAngle,onChange:e=>i.setSubTool({...i.subTool,startAngle:e.target.value}),step:"1"})]}),(0,n.jsx)("vertical-rect",{})]}):null]}):null]}):null]})};function P(e){let{isSelected:t,action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}=e;(0,l.useContext)(s);return(0,n.jsx)(a,{children:(0,n.jsxs)("app-container",{children:[(0,n.jsx)(C,{setAction:i,contextMenu:u}),(0,n.jsxs)("app-body",{children:[(0,n.jsx)(k,{setAction:i,contextMenu:u}),(0,n.jsxs)("canvas-container",{children:[(0,n.jsx)(x,{action:o,setAction:i,appMenu:r,setAppMenu:c,appDialog:d,setAppDialog:h,contextMenu:u,canClose:b,setCanClose:m}),(0,n.jsx)(p,{setAction:i,contextMenu:u})]})]}),(0,n.jsx)(T,{action:o,setAction:i,contextMenu:u})]})})}},9106:(e,t,o)=>{o.d(t,{A:()=>r});var l=o(5043),n=o(7950);function s(e){let t=e[0],o=e[1],l=e[2];t/=255,o/=255,l/=255;let n=Math.min(t,o,l),s=Math.max(t,o,l),a=s-n,i=0,r=0,c=(s+n)/2;return 0===a?(r=0,i=0):(r=c<=.5?a/(s+n):a/(2-s-n),s===t?i=(o-l)/a:s===o?i=(l-t)/a+2:s===l&&(i=(t-o)/a+4)),i=Math.round(60*i),i<0&&(i+=360),r=Math.abs(100*r).toFixed(0),c=(100*c).toFixed(0),[i,r+"%",c+"%"]}function a(e){var t=e[0],o=e[1],l=e[2],n=e[3];t=parseInt(e[1],16),o=parseInt(e[2],16),l=parseInt(e[3],16),n=parseInt(e[4],16);t/=255,o/=255,l/=255;let s=Math.min(t,o,l),a=Math.max(t,o,l),i=a-s,r=0,c=0,d=(a+s)/2;return 0===i?(c=0,r=0):(c=d<=.5?i/(a+s):i/(2-a-s),a===t?r=(o-l)/i:a===o?r=(l-t)/i+2:a===l&&(r=(t-o)/i+4)),r=Math.round(60*r),r<0&&(r+=360),c=Math.abs(100*c).toFixed(0),d=(100*d).toFixed(0),[r,c+"%",d+"%",n]}o(7915);var i=o(579);function r(e){let{color:t,setColor:o,useAlpha:r}=e;const c=(0,l.useRef)(null),d=(0,l.useRef)(null),h=(0,l.useRef)(null),u=(0,l.useRef)(null),[x,p]=(0,l.useState)({x:0,y:0}),[b,m]=(0,l.useState)(0),[g,C]=(0,l.useState)(0),[f,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(0),[j,M]=(0,l.useState)(50),[k,T]=(0,l.useState)(100),[P,S]=(0,l.useState)(100);(0,l.useEffect)((()=>{f&&c.current.focus()}),[f]);(0,l.useEffect)((()=>{if(t)if(r){let l=[];if("#"===t[0])l=a(function(e){var t;return 5===e.length?0==(t=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e))[4]&&(t[4]="ff"):9===e.length?t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e):8===e.length&&((t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))[4]="ff"),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16)/255]:null}(t));else if("rgba"===t.slice(0,4))l=a(t);else if("hsla"===t.slice(0,4))for(let n=0;n<t.length;n++){"("===t[n]?e=n+1:")"===t[n]?(o=n,l.push(t.slice(e,o))):","===t[n]&&(l.push(t.slice(e,n)),e=n+1)}if(w(Number(l[0])),T(Number(l[1].slice(0,l[1].length-1))),M(Number(l[2].slice(0,l[2].length-1))),S(Number(l[3])),f){const e=d.current.getBoundingClientRect();p({x:l[0]/360*e.width,y:(100-l[2].slice(0,l[2].length-1))/100*e.height});const t=h.current.getBoundingClientRect();m((100-l[1].slice(0,l[1].length-1))/100*t.height);const o=u.current.getBoundingClientRect();C(l[3]*o.width)}}else{let l=[];if("#"===t[0])l=s(function(e){var t;return(t=4===e.length?/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(e):/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}(t));else if("rgb"===t.slice(0,3))l=s(t);else if("hsl"===t.slice(0,3))for(let n=0;n<t.length;n++){var e,o;"("===t[n]?e=n+1:")"===t[n]?(o=n,l.push(t.slice(e,o))):","===t[n]&&(l.push(t.slice(e,n)),e=n+1)}else l=function(e){switch(e){case"red":case"maroon":return[0,"100%","50%"];case"green":case"lime":return[120,"100%","50%"];case"blue":case"aqua":case"navy":return[240,"100%","50%"];case"yellow":case"olive":return[60,"100%","50%"];case"cyan":case"teal":return[180,"100%","50%"];case"magenta":return[300,"100%","50%"];case"black":default:return[0,"0%","0%"];case"white":return[0,"0%","100%"];case"gray":case"grey":return[0,"0%","50%"];case"lightgray":case"lightgrey":return[0,"0%","75%"];case"darkgray":case"darkgrey":return[0,"0%","25%"];case"brown":return[30,"50%","50%"];case"orange":return[30,"100%","50%"];case"purple":return[270,"100%","50%"];case"pink":return[330,"100%","50%"]}}(t);if(w(Number(l[0])),T(Number(l[1].slice(0,l[1].length-1))),M(Number(l[2].slice(0,l[2].length-1))),f){const e=d.current.getBoundingClientRect();p({x:l[0]/360*e.width,y:(100-l[2].slice(0,l[2].length-1))/100*e.height});const t=h.current.getBoundingClientRect();m((100-l[1].slice(0,l[1].length-1))/100*t.height)}}}),[f,t,r]);(0,l.useEffect)((()=>{if(d.current){(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height);let t=e.canvas.width/360,o=e.canvas.height/100;for(let l=0;l<360;l++)for(let n=0;n<100;n++)e.fillStyle=`hsl(${l},${k}%,${100-n}%)`,e.fillRect(l*t,n*o,(l+1)*t,(n+1)*o)})(d.current.getContext("2d",{alpha:!1}))}}),[f,k]);const I=e=>{if(0!==e.buttons){const t=d.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(p({x:o,y:l}),w(Math.floor(360*o/t.width)),M(100-Math.floor(100*l/t.height)))}},N=e=>{if(0!==e.buttons){const t=h.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(T(100-Math.floor(100*l/t.height)),m(l))}},B=e=>{if(0!==e.buttons){const t=u.current.getBoundingClientRect();let o=e.clientX-t.left,l=e.clientY-t.top;o>=0&&o<=t.width&&l>=0&&l<=t.height&&(S(Math.floor(100*o/t.width)/100),C(o))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("color-picker-button",{onClick:()=>v(!f),children:(0,i.jsx)("button",{style:{background:t}})}),f&&(0,n.createPortal)((0,i.jsxs)("color-picker-window",{tabIndex:"0",ref:c,onBlur:e=>{var t;(t=e).currentTarget.contains(t.relatedTarget)||v(!1)},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("hue-light-map",{children:[(0,i.jsx)("canvas",{onMouseDown:e=>I(e),onMouseMove:e=>I(e),ref:d,width:"180",height:"180",style:{opacity:r?P:1}}),(0,i.jsx)("slider-thumb",{style:{top:x.y,left:x.x,background:r?`hsla(${y},${k}%,${j}%, ${P})`:`hsl(${y},${k}%,${j}%)`},onMouseDown:e=>I(e),onMouseMove:e=>I(e)})]}),(0,i.jsxs)("saturation-slider",{title:"Saturation",children:[(0,i.jsx)("div",{ref:h,style:{background:`linear-gradient(0deg, hsl(${y},0%,${j}%), hsla(${y},100%,${j}%))`},onMouseDown:e=>N(e),onMouseMove:e=>N(e)}),(0,i.jsx)("slider-thumb",{style:{top:b,background:`hsla(${y},${k}%,${j}%, ${P})`},onMouseDown:e=>N(e),onMouseMove:e=>N(e)})]})]}),r&&(0,i.jsxs)("alpha-slider",{title:"Alpha",children:[(0,i.jsx)("div",{ref:u,style:{background:`linear-gradient(90deg, hsla(${y},${k}%,${j}%, 0), hsla(${y},${k}%,${j}%, 1))`},onMouseDown:e=>B(e),onMouseMove:e=>B(e)}),(0,i.jsx)("slider-thumb",{style:{left:g,background:`hsl(${y},${k}%,${j}%, ${P})`},onMouseDown:e=>B(e),onMouseMove:e=>B(e)})]}),(0,i.jsxs)("color-inputs",{children:[(0,i.jsxs)("div",{children:["Hue",(0,i.jsx)("input",{type:"number",min:"0",max:"360",value:y,onChange:e=>(e=>{w(e);const t=d.current.getBoundingClientRect();p({...x,x:e/360*t.width})})(e.target.value)})]}),(0,i.jsxs)("div",{children:["Lum.",(0,i.jsx)("input",{type:"number",min:"0",max:"100",value:j,onChange:e=>(e=>{M(e);const t=d.current.getBoundingClientRect();p({...x,y:(100-e)/100*t.height})})(e.target.value)})]}),(0,i.jsxs)("div",{children:["Sat.",(0,i.jsx)("input",{type:"number",min:"0",max:"100",value:k,onChange:e=>(e=>{T(e);const t=h.current.getBoundingClientRect();m((100-e)/100*t.height)})(e.target.value)})]}),r&&(0,i.jsxs)("div",{children:["Alpha",(0,i.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:P,onChange:e=>(e=>{S(e);const t=u.current.getBoundingClientRect();C(e*t.width)})(e.target.value)})]})]}),(0,i.jsx)("color-button",{children:(0,i.jsx)("button",{style:{background:r?`hsla(${y},${k}%,${j}%, ${P})`:`hsl(${y},${k}%,${j}%)`},onClick:()=>{o(r?`hsla(${y},${k}%,${j}%, ${P})`:`hsl(${y},${k}%,${j}%)`)},children:"Apply"})})]}),document.getElementById("root"))]})}}}]);
//# sourceMappingURL=411.256065d8.chunk.js.map